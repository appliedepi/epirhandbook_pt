<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>37 Gráficos interativos | Manual de R para Epidemiologistas</title>
<meta name="author" content="the handbook team">
<meta name="description" content="A visualização de dados é cada vez mais necessária para questionamento do público. Consequentemente, a criação de gráficos interativos torna-se algo comum. Há várias formas de torná-los...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="37 Gráficos interativos | Manual de R para Epidemiologistas">
<meta property="og:type" content="book">
<meta property="og:description" content="A visualização de dados é cada vez mais necessária para questionamento do público. Consequentemente, a criação de gráficos interativos torna-se algo comum. Há várias formas de torná-los...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="37 Gráficos interativos | Manual de R para Epidemiologistas">
<meta name="twitter:description" content="A visualização de dados é cada vez mais necessária para questionamento do público. Consequentemente, a criação de gráficos interativos torna-se algo comum. Há várias formas de torná-los...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.29/datatables.js"></script><link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.10/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.2/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script><script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>
</head>
<body>
<p>

    Você precisa de ajuda para aprender R? Inscreva-se no curso de introdução ao R da Applied Epi, experimente nossos tutoriais gratuitos sobre o R, publique em nosso fórum de perguntas e respostas ou solicite nosso suporte ao R.

    </p>
<div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
      <strong>Você precisa de ajuda para aprender R?</strong> Inscreva-se no curso de <a href="https://www.appliedepi.org/live/" class="alert-link">introdução ao R</a> da Applied Epi, experimente nossos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriais gratuitos sobre o R</a>, publique em nosso <a href="https://community.appliedepi.org/" class="alert-link">fórum de perguntas e respostas</a>, ou solicite nosso <a href="mailto:contact@appliedepi.org" class="alert-link">suporte ao R</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Manual de R para Epidemiologistas</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Sobre este livro</li>
<li><a class="" href="editorial-style.html"><span class="header-section-number">1</span> Notas editoriais e técnicas</a></li>
<li><a class="" href="data-used.html"><span class="header-section-number">2</span> Baixe o livro e os dados</a></li>
<li class="book-part">Básico</li>
<li><a class="" href="basics.html"><span class="header-section-number">3</span> Introdução ao R</a></li>
<li><a class="" href="transition-to-R.html"><span class="header-section-number">4</span> Transição para o R</a></li>
<li><a class="" href="packages-suggested.html"><span class="header-section-number">5</span> Pacotes sugeridos</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> R projects</a></li>
<li><a class="" href="importing.html"><span class="header-section-number">7</span> Importar e exportar</a></li>
<li class="book-part">Gerenciamento dos Dados</li>
<li><a class="" href="cleaning.html"><span class="header-section-number">8</span> Limpeza de dados e principais funções</a></li>
<li><a class="" href="dates.html"><span class="header-section-number">9</span> Trabalhando com datas</a></li>
<li><a class="" href="characters-strings.html"><span class="header-section-number">10</span> Caracteres e strings</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Fatores</a></li>
<li><a class="" href="pivoting.html"><span class="header-section-number">12</span> Pivoteando dados</a></li>
<li><a class="" href="grouping.html"><span class="header-section-number">13</span> Agrupando dados</a></li>
<li><a class="" href="joining-matching.html"><span class="header-section-number">14</span> Juntando dados (Joins)</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> Eliminação de duplicidades</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> Iterações, loops e listas</a></li>
<li class="book-part">Análise dos dados</li>
<li><a class="" href="tables-descriptive.html"><span class="header-section-number">17</span> Tabelas descritivas</a></li>
<li><a class="" href="stat-tests.html"><span class="header-section-number">18</span> Testes estatísticos simples</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">19</span> Regressão simples e múltipla</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> Campos em branco/faltantes</a></li>
<li><a class="" href="standardization.html"><span class="header-section-number">21</span> Normalização de taxas</a></li>
<li><a class="" href="moving-average.html"><span class="header-section-number">22</span> Médias móveis</a></li>
<li><a class="" href="epidemic-models.html"><span class="header-section-number">23</span> Modelagem de epidemias</a></li>
<li><a class="" href="contact-tracing.html"><span class="header-section-number">24</span> Rastreamento de contatos</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">25</span> Analises de pesquisa de questionários (survey)</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">26</span> Análise de sobrevivência</a></li>
<li class="book-part">Visualização de Dados</li>
<li><a class="" href="tables-presentation.html"><span class="header-section-number">27</span> Tabelas para apresentação</a></li>
<li><a class="" href="ggplot-basics.html"><span class="header-section-number">28</span> O básico do ggplot</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">29</span> Dicas do ggplot</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">30</span> Curvas epidêmicas</a></li>
<li><a class="" href="age-pyramid.html"><span class="header-section-number">31</span> Pirâmides demográficas e escalas Likert</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">32</span> Gráficos de calor</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">33</span> Diagramas e gráficos</a></li>
<li><a class="" href="combination-analysis.html"><span class="header-section-number">34</span> Análise de Combinações</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">35</span> Cadeias de Transmissão</a></li>
<li><a class="" href="phylogenetic-trees.html"><span class="header-section-number">36</span> Árvores filogenéticas</a></li>
<li><a class="active" href="interactive-plots.html"><span class="header-section-number">37</span> Gráficos interativos</a></li>
<li class="book-part">Relatórios e dashboards</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">38</span> Relatórios com R Markdown</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">39</span> Organização de relatórios de rotina</a></li>
<li><a class="" href="flexdashboard.html"><span class="header-section-number">40</span> Painéis (Dashboards) com R Markdown</a></li>
<li><a class="" href="shiny-basics.html"><span class="header-section-number">41</span> Painéis com Shiny</a></li>
<li class="book-part">Miscelânea</li>
<li><a class="" href="writing-functions.html"><span class="header-section-number">42</span> Escrevendo funções</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">43</span> Interações de diretório</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">44</span> Controle de versão e colaboração com Git e Github</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">45</span> Erros comuns</a></li>
<li><a class="" href="help.html"><span class="header-section-number">46</span> Conseguindo ajuda</a></li>
<li><a class="" href="network-drives.html"><span class="header-section-number">47</span> R em drives (pastas) na rede</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">48</span> Data Table</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="interactive-plots" class="section level1" number="37">
<h1>
<span class="header-section-number">37</span> Gráficos interativos<a class="anchor" aria-label="anchor" href="#interactive-plots"><i class="fas fa-link"></i></a>
</h1>
<p>A visualização de dados é cada vez mais necessária para questionamento do público. Consequentemente, a criação de gráficos interativos torna-se algo comum. Há várias formas de torná-los interativos, sendo as duas mais comuns: <strong>plotly</strong> e <strong>shiny</strong>.</p>
<p>Nesta página iremos focar na conversão de um gráfico já existente no <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> em um gráfico interativo, utilizando o <strong>plotly</strong>. Para saber mais sobre o <strong>shiny</strong>, veja na no capítulo <a href="shiny-basics.html#shiny-basics">Paineis com Shiny</a>. Importante lembrar que este formato de gráfico interativo tem limitações, utilizados apenas em documentos do R Markdown em formato HTML*, não sendo possível em documentos com formatos em PDF ou Word.</p>
<p>No exemplo abaixo, tem-se um gráfico de curva epidêmica, que foi transformado para ser interativo, usando a integração de <strong>ggplot2</strong> e <strong>plotly</strong>(<em>Passe o mouse sobre o grafico, amplie ou clique nos itens na legenda</em>).</p>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-66afed73e0e40e8f91e1" style="width:75%;height:500px;"></div>
<script type="application/json" data-for="htmlwidget-66afed73e0e40e8f91e1">{"x":{"data":[{"orientation":"v","width":[6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.3000000000010914,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104],"base":[3,8,13,13,14,5,11,17,23,16,27,31,41,37,50,58,78,110,118,157,149,188,167,149,139,136,136,129,87,84,72,75,78,64,70,65,55,55,58,49,40,42,38,62,35,32,36,32,26,25,15,20,16,5],"x":[16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[3,2,3,5,7,12,14,14,10,11,13,15,26,36,37,46,67,68,57,101,121,138,130,121,138,112,113,102,82,82,83,66,59,40,47,57,31,44,51,37,36,28,32,43,33,30,21,29,29,21,14,13,11,3],"text":["week_earliest: 2014-04-21<br />n:   3<br />outcome: Death","week_earliest: 2014-04-28<br />n:   2<br />outcome: Death","week_earliest: 2014-05-05<br />n:   3<br />outcome: Death","week_earliest: 2014-05-12<br />n:   5<br />outcome: Death","week_earliest: 2014-05-19<br />n:   7<br />outcome: Death","week_earliest: 2014-05-26<br />n:  12<br />outcome: Death","week_earliest: 2014-06-02<br />n:  14<br />outcome: Death","week_earliest: 2014-06-09<br />n:  14<br />outcome: Death","week_earliest: 2014-06-16<br />n:  10<br />outcome: Death","week_earliest: 2014-06-23<br />n:  11<br />outcome: Death","week_earliest: 2014-06-30<br />n:  13<br />outcome: Death","week_earliest: 2014-07-07<br />n:  15<br />outcome: Death","week_earliest: 2014-07-14<br />n:  26<br />outcome: Death","week_earliest: 2014-07-21<br />n:  36<br />outcome: Death","week_earliest: 2014-07-28<br />n:  37<br />outcome: Death","week_earliest: 2014-08-04<br />n:  46<br />outcome: Death","week_earliest: 2014-08-11<br />n:  67<br />outcome: Death","week_earliest: 2014-08-18<br />n:  68<br />outcome: Death","week_earliest: 2014-08-25<br />n:  57<br />outcome: Death","week_earliest: 2014-09-01<br />n: 101<br />outcome: Death","week_earliest: 2014-09-08<br />n: 121<br />outcome: Death","week_earliest: 2014-09-15<br />n: 138<br />outcome: Death","week_earliest: 2014-09-22<br />n: 130<br />outcome: Death","week_earliest: 2014-09-29<br />n: 121<br />outcome: Death","week_earliest: 2014-10-06<br />n: 138<br />outcome: Death","week_earliest: 2014-10-13<br />n: 112<br />outcome: Death","week_earliest: 2014-10-20<br />n: 113<br />outcome: Death","week_earliest: 2014-10-27<br />n: 102<br />outcome: Death","week_earliest: 2014-11-03<br />n:  82<br />outcome: Death","week_earliest: 2014-11-10<br />n:  82<br />outcome: Death","week_earliest: 2014-11-17<br />n:  83<br />outcome: Death","week_earliest: 2014-11-24<br />n:  66<br />outcome: Death","week_earliest: 2014-12-01<br />n:  59<br />outcome: Death","week_earliest: 2014-12-08<br />n:  40<br />outcome: Death","week_earliest: 2014-12-15<br />n:  47<br />outcome: Death","week_earliest: 2014-12-22<br />n:  57<br />outcome: Death","week_earliest: 2014-12-29<br />n:  31<br />outcome: Death","week_earliest: 2015-01-05<br />n:  44<br />outcome: Death","week_earliest: 2015-01-12<br />n:  51<br />outcome: Death","week_earliest: 2015-01-19<br />n:  37<br />outcome: Death","week_earliest: 2015-01-26<br />n:  36<br />outcome: Death","week_earliest: 2015-02-02<br />n:  28<br />outcome: Death","week_earliest: 2015-02-09<br />n:  32<br />outcome: Death","week_earliest: 2015-02-16<br />n:  43<br />outcome: Death","week_earliest: 2015-02-23<br />n:  33<br />outcome: Death","week_earliest: 2015-03-02<br />n:  30<br />outcome: Death","week_earliest: 2015-03-09<br />n:  21<br />outcome: Death","week_earliest: 2015-03-16<br />n:  29<br />outcome: Death","week_earliest: 2015-03-23<br />n:  29<br />outcome: Death","week_earliest: 2015-03-30<br />n:  21<br />outcome: Death","week_earliest: 2015-04-06<br />n:  14<br />outcome: Death","week_earliest: 2015-04-13<br />n:  13<br />outcome: Death","week_earliest: 2015-04-20<br />n:  11<br />outcome: Death","week_earliest: 2015-04-27<br />n:   3<br />outcome: Death"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Death","legendgroup":"Death","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.3000000000010914,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104],"base":[0,0,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"x":[16174,16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,3,5,7,6,8,4,6,11,13,8,17,18,28,23,27,39,43,74,77,91,85,120,98,93,86,89,78,65,49,56,45,47,45,31,40,38,31,33,34,33,22,26,25,35,17,18,23,17,13,20,11,12,9,3],"text":["week_earliest: 2014-04-14<br />n:   1<br />outcome: Recover","week_earliest: 2014-04-21<br />n:   3<br />outcome: Recover","week_earliest: 2014-04-28<br />n:   5<br />outcome: Recover","week_earliest: 2014-05-05<br />n:   7<br />outcome: Recover","week_earliest: 2014-05-12<br />n:   6<br />outcome: Recover","week_earliest: 2014-05-19<br />n:   8<br />outcome: Recover","week_earliest: 2014-05-26<br />n:   4<br />outcome: Recover","week_earliest: 2014-06-02<br />n:   6<br />outcome: Recover","week_earliest: 2014-06-09<br />n:  11<br />outcome: Recover","week_earliest: 2014-06-16<br />n:  13<br />outcome: Recover","week_earliest: 2014-06-23<br />n:   8<br />outcome: Recover","week_earliest: 2014-06-30<br />n:  17<br />outcome: Recover","week_earliest: 2014-07-07<br />n:  18<br />outcome: Recover","week_earliest: 2014-07-14<br />n:  28<br />outcome: Recover","week_earliest: 2014-07-21<br />n:  23<br />outcome: Recover","week_earliest: 2014-07-28<br />n:  27<br />outcome: Recover","week_earliest: 2014-08-04<br />n:  39<br />outcome: Recover","week_earliest: 2014-08-11<br />n:  43<br />outcome: Recover","week_earliest: 2014-08-18<br />n:  74<br />outcome: Recover","week_earliest: 2014-08-25<br />n:  77<br />outcome: Recover","week_earliest: 2014-09-01<br />n:  91<br />outcome: Recover","week_earliest: 2014-09-08<br />n:  85<br />outcome: Recover","week_earliest: 2014-09-15<br />n: 120<br />outcome: Recover","week_earliest: 2014-09-22<br />n:  98<br />outcome: Recover","week_earliest: 2014-09-29<br />n:  93<br />outcome: Recover","week_earliest: 2014-10-06<br />n:  86<br />outcome: Recover","week_earliest: 2014-10-13<br />n:  89<br />outcome: Recover","week_earliest: 2014-10-20<br />n:  78<br />outcome: Recover","week_earliest: 2014-10-27<br />n:  65<br />outcome: Recover","week_earliest: 2014-11-03<br />n:  49<br />outcome: Recover","week_earliest: 2014-11-10<br />n:  56<br />outcome: Recover","week_earliest: 2014-11-17<br />n:  45<br />outcome: Recover","week_earliest: 2014-11-24<br />n:  47<br />outcome: Recover","week_earliest: 2014-12-01<br />n:  45<br />outcome: Recover","week_earliest: 2014-12-08<br />n:  31<br />outcome: Recover","week_earliest: 2014-12-15<br />n:  40<br />outcome: Recover","week_earliest: 2014-12-22<br />n:  38<br />outcome: Recover","week_earliest: 2014-12-29<br />n:  31<br />outcome: Recover","week_earliest: 2015-01-05<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-12<br />n:  34<br />outcome: Recover","week_earliest: 2015-01-19<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-26<br />n:  22<br />outcome: Recover","week_earliest: 2015-02-02<br />n:  26<br />outcome: Recover","week_earliest: 2015-02-09<br />n:  25<br />outcome: Recover","week_earliest: 2015-02-16<br />n:  35<br />outcome: Recover","week_earliest: 2015-02-23<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-02<br />n:  18<br />outcome: Recover","week_earliest: 2015-03-09<br />n:  23<br />outcome: Recover","week_earliest: 2015-03-16<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-23<br />n:  13<br />outcome: Recover","week_earliest: 2015-03-30<br />n:  20<br />outcome: Recover","week_earliest: 2015-04-06<br />n:  11<br />outcome: Recover","week_earliest: 2015-04-13<br />n:  12<br />outcome: Recover","week_earliest: 2015-04-20<br />n:   9<br />outcome: Recover","week_earliest: 2015-04-27<br />n:   3<br />outcome: Recover"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Recover","legendgroup":"Recover","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.3000000000010914,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[16146,16167,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,2,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"text":["week_earliest: 2014-03-17<br />n:   1<br />outcome: Unknown","week_earliest: 2014-04-07<br />n:   2<br />outcome: Unknown","week_earliest: 2014-04-28<br />n:   3<br />outcome: Unknown","week_earliest: 2014-05-05<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-12<br />n:   7<br />outcome: Unknown","week_earliest: 2014-05-19<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-26<br />n:   1<br />outcome: Unknown","week_earliest: 2014-06-02<br />n:   5<br />outcome: Unknown","week_earliest: 2014-06-09<br />n:   6<br />outcome: Unknown","week_earliest: 2014-06-16<br />n:  10<br />outcome: Unknown","week_earliest: 2014-06-23<br />n:   8<br />outcome: Unknown","week_earliest: 2014-06-30<br />n:  10<br />outcome: Unknown","week_earliest: 2014-07-07<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-14<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-21<br />n:  14<br />outcome: Unknown","week_earliest: 2014-07-28<br />n:  23<br />outcome: Unknown","week_earliest: 2014-08-04<br />n:  19<br />outcome: Unknown","week_earliest: 2014-08-11<br />n:  35<br />outcome: Unknown","week_earliest: 2014-08-18<br />n:  36<br />outcome: Unknown","week_earliest: 2014-08-25<br />n:  41<br />outcome: Unknown","week_earliest: 2014-09-01<br />n:  66<br />outcome: Unknown","week_earliest: 2014-09-08<br />n:  64<br />outcome: Unknown","week_earliest: 2014-09-15<br />n:  68<br />outcome: Unknown","week_earliest: 2014-09-22<br />n:  69<br />outcome: Unknown","week_earliest: 2014-09-29<br />n:  56<br />outcome: Unknown","week_earliest: 2014-10-06<br />n:  53<br />outcome: Unknown","week_earliest: 2014-10-13<br />n:  47<br />outcome: Unknown","week_earliest: 2014-10-20<br />n:  58<br />outcome: Unknown","week_earliest: 2014-10-27<br />n:  64<br />outcome: Unknown","week_earliest: 2014-11-03<br />n:  38<br />outcome: Unknown","week_earliest: 2014-11-10<br />n:  28<br />outcome: Unknown","week_earliest: 2014-11-17<br />n:  27<br />outcome: Unknown","week_earliest: 2014-11-24<br />n:  28<br />outcome: Unknown","week_earliest: 2014-12-01<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-08<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-15<br />n:  30<br />outcome: Unknown","week_earliest: 2014-12-22<br />n:  27<br />outcome: Unknown","week_earliest: 2014-12-29<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-05<br />n:  22<br />outcome: Unknown","week_earliest: 2015-01-12<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-19<br />n:  16<br />outcome: Unknown","week_earliest: 2015-01-26<br />n:  18<br />outcome: Unknown","week_earliest: 2015-02-02<br />n:  16<br />outcome: Unknown","week_earliest: 2015-02-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-02-16<br />n:  27<br />outcome: Unknown","week_earliest: 2015-02-23<br />n:  18<br />outcome: Unknown","week_earliest: 2015-03-02<br />n:  14<br />outcome: Unknown","week_earliest: 2015-03-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-16<br />n:  15<br />outcome: Unknown","week_earliest: 2015-03-23<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-30<br />n:   5<br />outcome: Unknown","week_earliest: 2015-04-06<br />n:   4<br />outcome: Unknown","week_earliest: 2015-04-13<br />n:   8<br />outcome: Unknown","week_earliest: 2015-04-20<br />n:   7<br />outcome: Unknown","week_earliest: 2015-04-27<br />n:   2<br />outcome: Unknown"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Unknown","legendgroup":"Unknown","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.228310502283104,"r":7.3059360730593621,"b":40.182648401826491,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16122.235000000001,16575.765000000003],"tickmode":"array","ticktext":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"tickvals":[16161,16252,16344,16436,16526],"categoryorder":"array","categoryarray":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Week of infection/onset","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-16.300000000000001,342.30000000000001],"tickmode":"array","ticktext":["0","100","200","300"],"tickvals":[0,100,200,300],"categoryorder":"array","categoryarray":["0","100","200","300"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Cases per week","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"outcome","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false,"modeBarButtonsToRemove":["zoom2d","pan2d","lasso2d","select2d","zoomIn2d","zoomOut2d","autoScale2d","hoverClosestCartesian","toggleSpikelines","hoverCompareCartesian"]},"source":"A","attrs":{"5628b6819a6":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"5628b6819a6","visdat":{"5628b6819a6":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><!-- ======================================================= --><div id="preparação-29" class="section level2" number="37.1">
<h2>
<span class="header-section-number">37.1</span> Preparação<a class="anchor" aria-label="anchor" href="#prepara%C3%A7%C3%A3o-29"><i class="fas fa-link"></i></a>
</h2>
<div id="carregando-os-pacotes" class="section level3 unnumbered">
<h3>Carregando os pacotes<a class="anchor" aria-label="anchor" href="#carregando-os-pacotes"><i class="fas fa-link"></i></a>
</h3>
<p>Esta parte de código(chunk) mostra o carregamento de pacotes necessários para as análises, com destaque <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> do <strong>pacman</strong>, que instala o pacote se necessário e o carrega para uso. Você também pode carregar utilizando a função <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> - “R base”. Para mais informações sobre pacotes consulte o capítulo <a href="basics.html#basics">Introdução ao R</a>.</p>
<div class="sourceCode" id="cb1620"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">rio</span>,       <span class="co"># importar e exportar dados</span></span>
<span>  <span class="va">here</span>,      <span class="co"># especificar caminho dos dados</span></span>
<span>  <span class="va">lubridate</span>, <span class="co"># trabalhar dados</span></span>
<span>  <span class="va">plotly</span>,    <span class="co"># graficos interativos</span></span>
<span>  <span class="va">scales</span>,    <span class="co"># percents</span></span>
<span>  <span class="va">tidyverse</span>, <span class="co"># manuseio e visualização</span></span>
<span>  <span class="va">incidence2</span>,<span class="co"># gráfico epicurva</span></span>
<span>  <span class="va">magrittr</span><span class="op">)</span>  <span class="co"># pipe %&gt;%</span></span>
<span><span class="co"># Verificar a versão do R, o pacote pacman e o rio  foi construido na versão 4.1.2</span></span></code></pre></div>
</div>
<div id="comece-com-um-ggplot" class="section level3 unnumbered">
<h3>Comece com um <code>ggplot()</code><a class="anchor" aria-label="anchor" href="#comece-com-um-ggplot"><i class="fas fa-link"></i></a>
</h3>
<p>Nessa seção, assumimos que que você está começando com um gráfico <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> que pretende tornar interativo. Vamos contruir então, vários gráficos usando o <code>linelist</code> de casos, exemplo utilizado em outros capítulos deste manual.</p>
</div>
<div id="importar-os-dados-1" class="section level3 unnumbered">
<h3>Importar os dados<a class="anchor" aria-label="anchor" href="#importar-os-dados-1"><i class="fas fa-link"></i></a>
</h3>
<p>Para começar, importe a lista de casos (limpa/organizada) de uma epidemia simulada de Ebola. Se quiser acompanhar o script, &lt;ahref=‘<a href="https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds" class="uri">https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds</a>’ class=‘download-button’&gt; clique para baixar a linelist “limpa” (como arquivo .rds). Importe dados com a função <em>import()</em> do pacote rio (ele lida com vários tipos de arquivos como .xlsx, .csv, .rds - veja a página <a href="importing.html#importing">Importar e exportar</a> para mais detalhes).</p>
<div class="sourceCode" id="cb1621"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Importar os casos linelist (Ébola)</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.rds"</span><span class="op">)</span></span></code></pre></div>
<p>As primeiras 50 linhas da lista de linhas são exibidas abaixo.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-512c52c8f406a07977c8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-512c52c8f406a07977c8">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2\" data-max=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399075200000\" data-max=\"1406419200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399939200000\" data-max=\"1407024000000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400025600000\" data-max=\"1407110400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400371200000\" data-max=\"1410566400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-29&quot;,&quot;30-49&quot;,&quot;50-69&quot;,&quot;70+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;,&quot;50-54&quot;,&quot;55-59&quot;,&quot;60-64&quot;,&quot;65-69&quot;,&quot;70-74&quot;,&quot;75-79&quot;,&quot;80-84&quot;,&quot;85+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"-13.2697246824573\" data-max=\"-13.209391925612\" data-scale=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"8.45171855856465\" data-max=\"8.48802917129884\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"11\" data-max=\"241\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"20\" data-max=\"24\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"35.9\" data-max=\"38\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"428.994082840237\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Ausente","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Ausente","Ausente","Ausente","Ausente","Port Hospital","Military Hospital","Ausente","Ausente","Other","Port Hospital","Port Hospital","Port Hospital","Ausente","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Ausente","Other","Ausente","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Ausente","Military Hospital","Other","Ausente","Ausente","Port Hospital","Port Hospital","Port Hospital","Ausente","Central Hospital","Military Hospital","Other","Other","Other","Ausente","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Ausente"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.461830626007281,8.462729314626459,8.461443675342711,8.46191259217774,8.472923276435059,8.48401630165138,8.458371253408441,8.477617055125091,8.47570184950483,8.477799468789719,8.47145134147474,8.478048406853629,8.48528034195779,8.469575303958671,8.45957352078114,8.474048895115439,8.488029171298839,8.473437335922,8.484082637344621,8.46242233645879,8.470268221265719,8.463984474805329,8.464134789434199,8.456230946296071,8.48334624336805,8.47493999153642,8.47832062438022,8.469393389176499,8.48480589906514,8.47121232619015,8.48438437371817,8.484661585743391,8.477141599844281,8.462381270106089,8.455685978131131,8.4632880274758,8.47940722413856,8.46353857052336,8.461789681588639,8.47508713872833,8.458258081280711,8.4532568143863,8.4732571907655,8.479115866419329,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.81844297615629,16.06524962926347,22.49657064471879,71.41440190438405,41.61712247324614,62.09538908706566,0,16.83765369253662,22.79032897344431,53.41198979591836,24.28026361429067,22.46003435064077,54.32098765432099,41.05784325564545,28.56648199445983,17.03205520132763,25.04129149128882,38.7172182043977,27.3876813705495,31.55555555555556,14.80690759456621,30.88398111998135,26.61934338952972,59.37499999999999,96.61835748792272,19.23947487550928,84.94031221303948,18.41993774061044,27.77226740726046,41.32231404958677,17.20806665861611,24.16716240333135,15.72189710891781,428.9940828402366,27.99302202929125,243.2610124917817,20.23950075898128,30.52744643563797,25.15589569160998,47,39.04,31.06616432017979,77.96836711962574,29.51659612385831,166.4932362122789,100.3086419753086,37.76,20.60378034578518,23.45856237526698],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
</div>
<div id="gráfico-com-ggplotly" class="section level2" number="37.2">
<h2>
<span class="header-section-number">37.2</span> Gráfico com <code>ggplotly()</code><a class="anchor" aria-label="anchor" href="#gr%C3%A1fico-com-ggplotly"><i class="fas fa-link"></i></a>
</h2>
<p>A função <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code> do pacote <strong>plotly</strong> facilita a conversão de um <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> para ser interativo. Só precisa salvar o seu <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> e na sequência direciona-lo para a função do <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code>.</p>
<p>Abaixo, é traçada uma linha simples no gráfico representando a proporção de casos que morreram em uma determinada semana:</p>
<p>Para começar, necessário cria um conjunto de dados resumido de cada semana epidemiológica e a porcentagem de casos com desfecho conhecido que morreram.</p>
<div class="sourceCode" id="cb1622"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weekly_deaths</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span>epiweek <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html">floor_date</a></span><span class="op">(</span><span class="va">date_onset</span>, <span class="st">"week"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># criar e agrupar dados por coluna *epiweek*</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>                                              <span class="co"># criar um novo da Data Frame resumido</span></span>
<span>    n_known_outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,      <span class="co"># número de casos por grupo(com resultados conhecidos)</span></span>
<span>    n_death  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">==</span> <span class="st">"Death"</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,          <span class="co"># número de casos que foram a óbitos</span></span>
<span>    pct_death <span class="op">=</span> <span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="va">n_death</span> <span class="op">/</span> <span class="va">n_known_outcome</span><span class="op">)</span>           <span class="co"># percentual de casos que foram a obitos com resultados conhecidos</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Aqui estão as primeiras 50 linhas do conjunto <code>weekly_deaths</code>.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5efa6ddda4544d03ad18" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5efa6ddda4544d03ad18">{"x":{"filter":"none","vertical":false,"data":[["2014-04-06","2014-04-13","2014-04-20","2014-04-27","2014-05-04","2014-05-11","2014-05-18","2014-05-25","2014-06-01","2014-06-08","2014-06-15","2014-06-22","2014-06-29","2014-07-06","2014-07-13","2014-07-20","2014-07-27","2014-08-03","2014-08-10","2014-08-17","2014-08-24","2014-08-31","2014-09-07","2014-09-14","2014-09-21","2014-09-28","2014-10-05","2014-10-12","2014-10-19","2014-10-26","2014-11-02","2014-11-09","2014-11-16","2014-11-23","2014-11-30","2014-12-07","2014-12-14","2014-12-21","2014-12-28","2015-01-04","2015-01-11","2015-01-18","2015-01-25","2015-02-01","2015-02-08","2015-02-15","2015-02-22","2015-03-01","2015-03-08","2015-03-15"],[0,0,3,4,7,10,8,17,16,14,25,16,25,23,40,46,62,66,92,91,120,146,159,223,214,213,210,199,199,180,163,134,116,140,120,94,86,94,70,76,88,74,70,63,52,59,64,56,52,41],[0,0,0,2,3,5,1,11,11,8,12,11,11,9,22,21,43,33,51,46,61,72,85,118,110,115,131,120,112,97,98,86,79,84,68,52,42,62,43,39,46,43,39,41,27,33,34,37,31,23],[null,null,0,50,42.85714285714285,50,12.5,64.70588235294117,68.75,57.14285714285714,48,68.75,44,39.1304347826087,55.00000000000001,45.65217391304348,69.35483870967742,50,55.43478260869566,50.54945054945055,50.83333333333333,49.31506849315068,53.45911949685534,52.91479820627802,51.4018691588785,53.9906103286385,62.38095238095238,60.30150753768844,56.28140703517588,53.88888888888889,60.12269938650306,64.17910447761194,68.10344827586206,60,56.66666666666666,55.31914893617022,48.83720930232558,65.95744680851064,61.42857142857143,51.31578947368421,52.27272727272727,58.10810810810811,55.71428571428572,65.07936507936508,51.92307692307693,55.93220338983051,53.125,66.07142857142857,59.61538461538461,56.09756097560976]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>epiweek<\/th>\n      <th>n_known_outcome<\/th>\n      <th>n_death<\/th>\n      <th>pct_death<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Na sequência criamos o gráfico com <strong>ggplot2</strong>, usando o <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>.</p>
<div class="sourceCode" id="cb1623"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">deaths_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">weekly_deaths</span><span class="op">)</span><span class="op">+</span>            <span class="co"># começar com o registro de óbito semanal</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">epiweek</span>, y <span class="op">=</span> <span class="va">pct_death</span><span class="op">)</span><span class="op">)</span>  <span class="co"># criar a linha no gráfico</span></span>
<span></span>
<span><span class="va">deaths_plot</span>   <span class="co"># visualizar</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1250-1.png" width="672"></div>
<p>Para torná-lo interativo, basta passar esse gráfico para <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code>, como abaixo. Passe o mouse sobre a linha para mostrar os valores x e y. Você pode ampliar o gráfico e arrastá-lo. Você também pode ver os ícones no canto superior direito do gráfico. Em ordem, eles permitem que você:</p>
<ul>
<li>Baixar a visualização atual como uma imagem PNG<br>
</li>
<li>Ampliar com uma caixa de seleção<br>
</li>
<li>Gire, ou mova-se pelo gráfico clicando e arrastando<br>
</li>
<li>Ampliar, reduzir ou retornar ao zoom padrão</li>
<li>Redefinir os eixos para os padrões</li>
<li>Ative/desative as “Spike Lines” que são linhas pontilhadas do ponto interativo que se estendem até os eixos x e y</li>
<li>Ajustes para mostrar os dados quando você não está navegando na linha</li>
</ul>
<div class="sourceCode" id="cb1624"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">deaths_plot</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-eadec0bf9ea68a0bbdcb" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-eadec0bf9ea68a0bbdcb">{"x":{"data":[{"x":[16166,16173,16180,16187,16194,16201,16208,16215,16222,16229,16236,16243,16250,16257,16264,16271,16278,16285,16292,16299,16306,16313,16320,16327,16334,16341,16348,16355,16362,16369,16376,16383,16390,16397,16404,16411,16418,16425,16432,16439,16446,16453,16460,16467,16474,16481,16488,16495,16502,16509,16516,16523,16530,16537,16544,16551,null],"y":[null,null,0,50,42.857142857142854,50,12.5,64.705882352941174,68.75,57.142857142857139,48,68.75,44,39.130434782608695,55.000000000000007,45.652173913043477,69.354838709677423,50,55.434782608695656,50.549450549450547,50.833333333333329,49.315068493150683,53.459119496855344,52.914798206278022,51.401869158878498,53.990610328638496,62.38095238095238,60.301507537688437,56.281407035175882,53.888888888888886,60.122699386503065,64.179104477611943,68.103448275862064,60,56.666666666666664,55.319148936170215,48.837209302325576,65.957446808510639,61.428571428571431,51.315789473684212,52.272727272727273,58.108108108108105,55.714285714285715,65.079365079365076,51.923076923076927,55.932203389830505,53.125,66.071428571428569,59.615384615384613,56.09756097560976,53.488372093023251,63.829787234042556,42.424242424242422,65.789473684210535,57.142857142857139,52.380952380952387,62.790697674418603],"text":["epiweek: 2014-04-06<br />pct_death:      NaN","epiweek: 2014-04-13<br />pct_death:      NaN","epiweek: 2014-04-20<br />pct_death:  0.00000","epiweek: 2014-04-27<br />pct_death: 50.00000","epiweek: 2014-05-04<br />pct_death: 42.85714","epiweek: 2014-05-11<br />pct_death: 50.00000","epiweek: 2014-05-18<br />pct_death: 12.50000","epiweek: 2014-05-25<br />pct_death: 64.70588","epiweek: 2014-06-01<br />pct_death: 68.75000","epiweek: 2014-06-08<br />pct_death: 57.14286","epiweek: 2014-06-15<br />pct_death: 48.00000","epiweek: 2014-06-22<br />pct_death: 68.75000","epiweek: 2014-06-29<br />pct_death: 44.00000","epiweek: 2014-07-06<br />pct_death: 39.13043","epiweek: 2014-07-13<br />pct_death: 55.00000","epiweek: 2014-07-20<br />pct_death: 45.65217","epiweek: 2014-07-27<br />pct_death: 69.35484","epiweek: 2014-08-03<br />pct_death: 50.00000","epiweek: 2014-08-10<br />pct_death: 55.43478","epiweek: 2014-08-17<br />pct_death: 50.54945","epiweek: 2014-08-24<br />pct_death: 50.83333","epiweek: 2014-08-31<br />pct_death: 49.31507","epiweek: 2014-09-07<br />pct_death: 53.45912","epiweek: 2014-09-14<br />pct_death: 52.91480","epiweek: 2014-09-21<br />pct_death: 51.40187","epiweek: 2014-09-28<br />pct_death: 53.99061","epiweek: 2014-10-05<br />pct_death: 62.38095","epiweek: 2014-10-12<br />pct_death: 60.30151","epiweek: 2014-10-19<br />pct_death: 56.28141","epiweek: 2014-10-26<br />pct_death: 53.88889","epiweek: 2014-11-02<br />pct_death: 60.12270","epiweek: 2014-11-09<br />pct_death: 64.17910","epiweek: 2014-11-16<br />pct_death: 68.10345","epiweek: 2014-11-23<br />pct_death: 60.00000","epiweek: 2014-11-30<br />pct_death: 56.66667","epiweek: 2014-12-07<br />pct_death: 55.31915","epiweek: 2014-12-14<br />pct_death: 48.83721","epiweek: 2014-12-21<br />pct_death: 65.95745","epiweek: 2014-12-28<br />pct_death: 61.42857","epiweek: 2015-01-04<br />pct_death: 51.31579","epiweek: 2015-01-11<br />pct_death: 52.27273","epiweek: 2015-01-18<br />pct_death: 58.10811","epiweek: 2015-01-25<br />pct_death: 55.71429","epiweek: 2015-02-01<br />pct_death: 65.07937","epiweek: 2015-02-08<br />pct_death: 51.92308","epiweek: 2015-02-15<br />pct_death: 55.93220","epiweek: 2015-02-22<br />pct_death: 53.12500","epiweek: 2015-03-01<br />pct_death: 66.07143","epiweek: 2015-03-08<br />pct_death: 59.61538","epiweek: 2015-03-15<br />pct_death: 56.09756","epiweek: 2015-03-22<br />pct_death: 53.48837","epiweek: 2015-03-29<br />pct_death: 63.82979","epiweek: 2015-04-05<br />pct_death: 42.42424","epiweek: 2015-04-12<br />pct_death: 65.78947","epiweek: 2015-04-19<br />pct_death: 57.14286","epiweek: 2015-04-26<br />pct_death: 52.38095","epiweek: NA<br />pct_death: 62.79070"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.228310502283104,"r":7.3059360730593621,"b":40.182648401826491,"l":37.260273972602747},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16146.75,16570.25],"tickmode":"array","ticktext":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"tickvals":[16161,16252,16344,16436,16526],"categoryorder":"array","categoryarray":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"epiweek","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.4677419354838714,72.822580645161295],"tickmode":"array","ticktext":["0","20","40","60"],"tickvals":[0,20,40,60],"categoryorder":"array","categoryarray":["0","20","40","60"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"pct_death","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"562868497732":{"x":{},"y":{},"type":"scatter"}},"cur_data":"562868497732","visdat":{"562868497732":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>Dados agrupados também funcionam com o <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code>. Abaixo, é feita uma epicurva semanal, agrupada por resultado. As barras empilhadas são interativas. Tente clicar nos diferentes itens da legenda (eles irão aparecer/desaparecer).</p>
<div class="sourceCode" id="cb1625"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Produzir a curva com o pacote incidence2 verificar se tem instalado</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">incidence2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/incidence.html">incidence</a></span><span class="op">(</span></span>
<span>  <span class="va">linelist</span>,</span>
<span>  date_index <span class="op">=</span> <span class="va">date_onset</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"weeks"</span>,</span>
<span>  groups <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co">#não esquecer de chamar o pacote %&gt;% (magrittr)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb1626"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Gráfico interativo </span></span>
<span><span class="va">p</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="op">)</span> </span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3ca51a7c995f53b097b1" style="width:95%;height:500px;"></div>
<script type="application/json" data-for="htmlwidget-3ca51a7c995f53b097b1">{"x":{"data":[{"orientation":"v","width":[6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.3000000000010914,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104],"base":[3,8,13,13,14,5,11,17,23,16,27,31,41,37,50,58,78,110,118,157,149,188,167,149,139,136,136,129,87,84,72,75,78,64,70,65,55,55,58,49,40,42,38,62,35,32,36,32,26,25,15,20,16,5],"x":[16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[3,2,3,5,7,12,14,14,10,11,13,15,26,36,37,46,67,68,57,101,121,138,130,121,138,112,113,102,82,82,83,66,59,40,47,57,31,44,51,37,36,28,32,43,33,30,21,29,29,21,14,13,11,3],"text":["week_earliest: 2014-04-21<br />n:   3<br />outcome: Death","week_earliest: 2014-04-28<br />n:   2<br />outcome: Death","week_earliest: 2014-05-05<br />n:   3<br />outcome: Death","week_earliest: 2014-05-12<br />n:   5<br />outcome: Death","week_earliest: 2014-05-19<br />n:   7<br />outcome: Death","week_earliest: 2014-05-26<br />n:  12<br />outcome: Death","week_earliest: 2014-06-02<br />n:  14<br />outcome: Death","week_earliest: 2014-06-09<br />n:  14<br />outcome: Death","week_earliest: 2014-06-16<br />n:  10<br />outcome: Death","week_earliest: 2014-06-23<br />n:  11<br />outcome: Death","week_earliest: 2014-06-30<br />n:  13<br />outcome: Death","week_earliest: 2014-07-07<br />n:  15<br />outcome: Death","week_earliest: 2014-07-14<br />n:  26<br />outcome: Death","week_earliest: 2014-07-21<br />n:  36<br />outcome: Death","week_earliest: 2014-07-28<br />n:  37<br />outcome: Death","week_earliest: 2014-08-04<br />n:  46<br />outcome: Death","week_earliest: 2014-08-11<br />n:  67<br />outcome: Death","week_earliest: 2014-08-18<br />n:  68<br />outcome: Death","week_earliest: 2014-08-25<br />n:  57<br />outcome: Death","week_earliest: 2014-09-01<br />n: 101<br />outcome: Death","week_earliest: 2014-09-08<br />n: 121<br />outcome: Death","week_earliest: 2014-09-15<br />n: 138<br />outcome: Death","week_earliest: 2014-09-22<br />n: 130<br />outcome: Death","week_earliest: 2014-09-29<br />n: 121<br />outcome: Death","week_earliest: 2014-10-06<br />n: 138<br />outcome: Death","week_earliest: 2014-10-13<br />n: 112<br />outcome: Death","week_earliest: 2014-10-20<br />n: 113<br />outcome: Death","week_earliest: 2014-10-27<br />n: 102<br />outcome: Death","week_earliest: 2014-11-03<br />n:  82<br />outcome: Death","week_earliest: 2014-11-10<br />n:  82<br />outcome: Death","week_earliest: 2014-11-17<br />n:  83<br />outcome: Death","week_earliest: 2014-11-24<br />n:  66<br />outcome: Death","week_earliest: 2014-12-01<br />n:  59<br />outcome: Death","week_earliest: 2014-12-08<br />n:  40<br />outcome: Death","week_earliest: 2014-12-15<br />n:  47<br />outcome: Death","week_earliest: 2014-12-22<br />n:  57<br />outcome: Death","week_earliest: 2014-12-29<br />n:  31<br />outcome: Death","week_earliest: 2015-01-05<br />n:  44<br />outcome: Death","week_earliest: 2015-01-12<br />n:  51<br />outcome: Death","week_earliest: 2015-01-19<br />n:  37<br />outcome: Death","week_earliest: 2015-01-26<br />n:  36<br />outcome: Death","week_earliest: 2015-02-02<br />n:  28<br />outcome: Death","week_earliest: 2015-02-09<br />n:  32<br />outcome: Death","week_earliest: 2015-02-16<br />n:  43<br />outcome: Death","week_earliest: 2015-02-23<br />n:  33<br />outcome: Death","week_earliest: 2015-03-02<br />n:  30<br />outcome: Death","week_earliest: 2015-03-09<br />n:  21<br />outcome: Death","week_earliest: 2015-03-16<br />n:  29<br />outcome: Death","week_earliest: 2015-03-23<br />n:  29<br />outcome: Death","week_earliest: 2015-03-30<br />n:  21<br />outcome: Death","week_earliest: 2015-04-06<br />n:  14<br />outcome: Death","week_earliest: 2015-04-13<br />n:  13<br />outcome: Death","week_earliest: 2015-04-20<br />n:  11<br />outcome: Death","week_earliest: 2015-04-27<br />n:   3<br />outcome: Death"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Death","legendgroup":"Death","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.3000000000010914,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104],"base":[0,0,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"x":[16174,16181,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,3,5,7,6,8,4,6,11,13,8,17,18,28,23,27,39,43,74,77,91,85,120,98,93,86,89,78,65,49,56,45,47,45,31,40,38,31,33,34,33,22,26,25,35,17,18,23,17,13,20,11,12,9,3],"text":["week_earliest: 2014-04-14<br />n:   1<br />outcome: Recover","week_earliest: 2014-04-21<br />n:   3<br />outcome: Recover","week_earliest: 2014-04-28<br />n:   5<br />outcome: Recover","week_earliest: 2014-05-05<br />n:   7<br />outcome: Recover","week_earliest: 2014-05-12<br />n:   6<br />outcome: Recover","week_earliest: 2014-05-19<br />n:   8<br />outcome: Recover","week_earliest: 2014-05-26<br />n:   4<br />outcome: Recover","week_earliest: 2014-06-02<br />n:   6<br />outcome: Recover","week_earliest: 2014-06-09<br />n:  11<br />outcome: Recover","week_earliest: 2014-06-16<br />n:  13<br />outcome: Recover","week_earliest: 2014-06-23<br />n:   8<br />outcome: Recover","week_earliest: 2014-06-30<br />n:  17<br />outcome: Recover","week_earliest: 2014-07-07<br />n:  18<br />outcome: Recover","week_earliest: 2014-07-14<br />n:  28<br />outcome: Recover","week_earliest: 2014-07-21<br />n:  23<br />outcome: Recover","week_earliest: 2014-07-28<br />n:  27<br />outcome: Recover","week_earliest: 2014-08-04<br />n:  39<br />outcome: Recover","week_earliest: 2014-08-11<br />n:  43<br />outcome: Recover","week_earliest: 2014-08-18<br />n:  74<br />outcome: Recover","week_earliest: 2014-08-25<br />n:  77<br />outcome: Recover","week_earliest: 2014-09-01<br />n:  91<br />outcome: Recover","week_earliest: 2014-09-08<br />n:  85<br />outcome: Recover","week_earliest: 2014-09-15<br />n: 120<br />outcome: Recover","week_earliest: 2014-09-22<br />n:  98<br />outcome: Recover","week_earliest: 2014-09-29<br />n:  93<br />outcome: Recover","week_earliest: 2014-10-06<br />n:  86<br />outcome: Recover","week_earliest: 2014-10-13<br />n:  89<br />outcome: Recover","week_earliest: 2014-10-20<br />n:  78<br />outcome: Recover","week_earliest: 2014-10-27<br />n:  65<br />outcome: Recover","week_earliest: 2014-11-03<br />n:  49<br />outcome: Recover","week_earliest: 2014-11-10<br />n:  56<br />outcome: Recover","week_earliest: 2014-11-17<br />n:  45<br />outcome: Recover","week_earliest: 2014-11-24<br />n:  47<br />outcome: Recover","week_earliest: 2014-12-01<br />n:  45<br />outcome: Recover","week_earliest: 2014-12-08<br />n:  31<br />outcome: Recover","week_earliest: 2014-12-15<br />n:  40<br />outcome: Recover","week_earliest: 2014-12-22<br />n:  38<br />outcome: Recover","week_earliest: 2014-12-29<br />n:  31<br />outcome: Recover","week_earliest: 2015-01-05<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-12<br />n:  34<br />outcome: Recover","week_earliest: 2015-01-19<br />n:  33<br />outcome: Recover","week_earliest: 2015-01-26<br />n:  22<br />outcome: Recover","week_earliest: 2015-02-02<br />n:  26<br />outcome: Recover","week_earliest: 2015-02-09<br />n:  25<br />outcome: Recover","week_earliest: 2015-02-16<br />n:  35<br />outcome: Recover","week_earliest: 2015-02-23<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-02<br />n:  18<br />outcome: Recover","week_earliest: 2015-03-09<br />n:  23<br />outcome: Recover","week_earliest: 2015-03-16<br />n:  17<br />outcome: Recover","week_earliest: 2015-03-23<br />n:  13<br />outcome: Recover","week_earliest: 2015-03-30<br />n:  20<br />outcome: Recover","week_earliest: 2015-04-06<br />n:  11<br />outcome: Recover","week_earliest: 2015-04-13<br />n:  12<br />outcome: Recover","week_earliest: 2015-04-20<br />n:   9<br />outcome: Recover","week_earliest: 2015-04-27<br />n:   3<br />outcome: Recover"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Recover","legendgroup":"Recover","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.2999999999992724,6.3000000000010914,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104,6.3000000000029104],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[16146,16167,16188,16195,16202,16209,16216,16223,16230,16237,16244,16251,16258,16265,16272,16279,16286,16293,16300,16307,16314,16321,16328,16335,16342,16349,16356,16363,16370,16377,16384,16391,16398,16405,16412,16419,16426,16433,16440,16447,16454,16461,16468,16475,16482,16489,16496,16503,16510,16517,16524,16531,16538,16545,16552],"y":[1,2,3,6,7,6,1,5,6,10,8,10,13,13,14,23,19,35,36,41,66,64,68,69,56,53,47,58,64,38,28,27,28,33,33,30,27,24,22,24,16,18,16,13,27,18,14,13,15,13,5,4,8,7,2],"text":["week_earliest: 2014-03-17<br />n:   1<br />outcome: Unknown","week_earliest: 2014-04-07<br />n:   2<br />outcome: Unknown","week_earliest: 2014-04-28<br />n:   3<br />outcome: Unknown","week_earliest: 2014-05-05<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-12<br />n:   7<br />outcome: Unknown","week_earliest: 2014-05-19<br />n:   6<br />outcome: Unknown","week_earliest: 2014-05-26<br />n:   1<br />outcome: Unknown","week_earliest: 2014-06-02<br />n:   5<br />outcome: Unknown","week_earliest: 2014-06-09<br />n:   6<br />outcome: Unknown","week_earliest: 2014-06-16<br />n:  10<br />outcome: Unknown","week_earliest: 2014-06-23<br />n:   8<br />outcome: Unknown","week_earliest: 2014-06-30<br />n:  10<br />outcome: Unknown","week_earliest: 2014-07-07<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-14<br />n:  13<br />outcome: Unknown","week_earliest: 2014-07-21<br />n:  14<br />outcome: Unknown","week_earliest: 2014-07-28<br />n:  23<br />outcome: Unknown","week_earliest: 2014-08-04<br />n:  19<br />outcome: Unknown","week_earliest: 2014-08-11<br />n:  35<br />outcome: Unknown","week_earliest: 2014-08-18<br />n:  36<br />outcome: Unknown","week_earliest: 2014-08-25<br />n:  41<br />outcome: Unknown","week_earliest: 2014-09-01<br />n:  66<br />outcome: Unknown","week_earliest: 2014-09-08<br />n:  64<br />outcome: Unknown","week_earliest: 2014-09-15<br />n:  68<br />outcome: Unknown","week_earliest: 2014-09-22<br />n:  69<br />outcome: Unknown","week_earliest: 2014-09-29<br />n:  56<br />outcome: Unknown","week_earliest: 2014-10-06<br />n:  53<br />outcome: Unknown","week_earliest: 2014-10-13<br />n:  47<br />outcome: Unknown","week_earliest: 2014-10-20<br />n:  58<br />outcome: Unknown","week_earliest: 2014-10-27<br />n:  64<br />outcome: Unknown","week_earliest: 2014-11-03<br />n:  38<br />outcome: Unknown","week_earliest: 2014-11-10<br />n:  28<br />outcome: Unknown","week_earliest: 2014-11-17<br />n:  27<br />outcome: Unknown","week_earliest: 2014-11-24<br />n:  28<br />outcome: Unknown","week_earliest: 2014-12-01<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-08<br />n:  33<br />outcome: Unknown","week_earliest: 2014-12-15<br />n:  30<br />outcome: Unknown","week_earliest: 2014-12-22<br />n:  27<br />outcome: Unknown","week_earliest: 2014-12-29<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-05<br />n:  22<br />outcome: Unknown","week_earliest: 2015-01-12<br />n:  24<br />outcome: Unknown","week_earliest: 2015-01-19<br />n:  16<br />outcome: Unknown","week_earliest: 2015-01-26<br />n:  18<br />outcome: Unknown","week_earliest: 2015-02-02<br />n:  16<br />outcome: Unknown","week_earliest: 2015-02-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-02-16<br />n:  27<br />outcome: Unknown","week_earliest: 2015-02-23<br />n:  18<br />outcome: Unknown","week_earliest: 2015-03-02<br />n:  14<br />outcome: Unknown","week_earliest: 2015-03-09<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-16<br />n:  15<br />outcome: Unknown","week_earliest: 2015-03-23<br />n:  13<br />outcome: Unknown","week_earliest: 2015-03-30<br />n:   5<br />outcome: Unknown","week_earliest: 2015-04-06<br />n:   4<br />outcome: Unknown","week_earliest: 2015-04-13<br />n:   8<br />outcome: Unknown","week_earliest: 2015-04-20<br />n:   7<br />outcome: Unknown","week_earliest: 2015-04-27<br />n:   2<br />outcome: Unknown"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Unknown","legendgroup":"Unknown","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.228310502283104,"r":7.3059360730593621,"b":40.182648401826491,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16122.235000000001,16575.765000000003],"tickmode":"array","ticktext":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"tickvals":[16161,16252,16344,16436,16526],"categoryorder":"array","categoryarray":["Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Week of infection/onset","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-16.300000000000001,342.30000000000001],"tickmode":"array","ticktext":["0","100","200","300"],"tickvals":[0,100,200,300],"categoryorder":"array","categoryarray":["0","100","200","300"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Cases per week","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"outcome","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"56283a3f43fa":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"56283a3f43fa","visdat":{"56283a3f43fa":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
<div id="modificações" class="section level2" number="37.3">
<h2>
<span class="header-section-number">37.3</span> Modificações<a class="anchor" aria-label="anchor" href="#modifica%C3%A7%C3%B5es"><i class="fas fa-link"></i></a>
</h2>
<div id="tamanho-do-arquivo" class="section level3 unnumbered">
<h3>Tamanho do arquivo<a class="anchor" aria-label="anchor" href="#tamanho-do-arquivo"><i class="fas fa-link"></i></a>
</h3>
<p>Ao exportar em HTML gerado pelo R Markdown (como este livro!), você irá desejar o gráfico com o menor tamanho de dados possível (sem efeitos colaterais negativos na maioria dos casos). Para isso, basta direcionar a plotagem interativa para <code><a href="https://rdrr.io/pkg/plotly/man/partial_bundle.html">partial_bundle()</a></code>, também do <strong>plotly</strong>.</p>
<div class="sourceCode" id="cb1627"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/partial_bundle.html">partial_bundle</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="botões" class="section level3 unnumbered">
<h3>Botões<a class="anchor" aria-label="anchor" href="#bot%C3%B5es"><i class="fas fa-link"></i></a>
</h3>
<p>Alguns dos botões em uma plotagem padrão são supérfluos e podem ser uma distração, então você pode removê-los. Você pode fazer isso simplesmente direcionando a saída <code>config()</code> do <strong>plotly</strong> e especificando quais botões devem ser removidos. No exemplo abaixo, os nomes dos botões a serem removidos foram expecificados previamente e fornecido o argumento <code>modeBarButtonsToRemove =</code>. Também definiu-se a remoção do logotipo do plotly com o <code>displaylogo = FALSE</code>.</p>
<div class="sourceCode" id="cb1628"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##Esses botões são distrações e podem ser removidos</span></span>
<span><span class="va">plotly_buttons_remove</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'zoom2d'</span>,<span class="st">'pan2d'</span>,<span class="st">'lasso2d'</span>, <span class="st">'select2d'</span>,<span class="st">'zoomIn2d'</span>,</span>
<span>                              <span class="st">'zoomOut2d'</span>,<span class="st">'autoScale2d'</span>,<span class="st">'hoverClosestCartesian'</span>,</span>
<span>                              <span class="st">'toggleSpikelines'</span>,<span class="st">'hoverCompareCartesian'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>          <span class="co"># redefinir o grafico interativo com esses botões</span></span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu">config</span><span class="op">(</span>displaylogo <span class="op">=</span> <span class="cn">FALSE</span>, modeBarButtonsToRemove <span class="op">=</span> <span class="va">plotly_buttons_remove</span><span class="op">)</span></span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="gráfico--blocos-de-calor" class="section level2" number="37.4">
<h2>
<span class="header-section-number">37.4</span> Gráfico -Blocos de calor<a class="anchor" aria-label="anchor" href="#gr%C3%A1fico--blocos-de-calor"><i class="fas fa-link"></i></a>
</h2>
<p>Você pode tornar quase qualquer gráfico do <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> interativo, incluindo o gráfico de calor. No exemplo, a seguir mostra a proporção de dias por semana que certas instalações reportaram dados de malária à sua província.</p>
<p>Aqui está o código, embora não descrito em profundidade neste tópico.</p>
<div class="sourceCode" id="cb1629"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Importar os dados de malária</span></span>
<span><span class="va">facility_count_data</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"malaria_facility_count_data.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Dados agregados por semana para o distrito durante a primavera</span></span>
<span><span class="va">agg_weeks</span> <span class="op">&lt;-</span> <span class="va">facility_count_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">District</span> <span class="op">==</span> <span class="st">"Spring"</span>,</span>
<span>         <span class="va">data_date</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2020-08-01"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>week <span class="op">=</span> <span class="fu">aweek</span><span class="fu">::</span><span class="fu"><a href="https://www.repidemicsconsortium.org/aweek/reference/date2week.html">date2week</a></span><span class="op">(</span></span>
<span>    <span class="va">data_date</span>,</span>
<span>    start_date <span class="op">=</span> <span class="st">"Monday"</span>,</span>
<span>    floor_day <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    factor <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">location_name</span>, <span class="va">week</span>, .drop <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    n_days          <span class="op">=</span> <span class="fl">7</span>,</span>
<span>    n_reports       <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    malaria_tot     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">malaria_tot</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>    n_days_reported <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">data_date</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    p_days_reported <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="va">n_days_reported</span> <span class="op">/</span> <span class="va">n_days</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="va">location_name</span>, <span class="va">week</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand.html">expand</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">week</span>, <span class="va">location_name</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>week <span class="op">=</span> <span class="fu">aweek</span><span class="fu">::</span><span class="fu"><a href="https://www.repidemicsconsortium.org/aweek/reference/date2week.html">week2date</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Criar gráfico</span></span>
<span><span class="va">metrics_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">agg_weeks</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">week</span>,</span>
<span>           y <span class="op">=</span> <span class="va">location_name</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">p_days_reported</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span>colour<span class="op">=</span><span class="st">"white"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"orange"</span>, high <span class="op">=</span> <span class="st">"darkgreen"</span>, na.value <span class="op">=</span> <span class="st">"grey80"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>               date_breaks <span class="op">=</span> <span class="st">"2 weeks"</span>,</span>
<span>               date_labels <span class="op">=</span> <span class="st">"%d\n%b"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span>, face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    legend.text  <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">10</span>, face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    legend.key.height <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>,<span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    legend.key.width  <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0.6</span>,<span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span>,</span>
<span>    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>vjust<span class="op">=</span><span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">0.4</span><span class="op">)</span>,</span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span>, face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust<span class="op">=</span><span class="fl">0</span>,size<span class="op">=</span><span class="fl">14</span>,face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0</span>, face <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Semana"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Nome do Estabelecimento"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Performance de \n reporte (%)"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Porcentagem de dia por semana que o estabelecimento \n reportou dados"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Estabelecimento de saúdes distritais, Abril-Maio 2019"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Semanas de 7 diad começando às segundas"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">metrics_plot</span> <span class="co"># mostrar gráfico</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1254-1.png" width="672"></div>
<p>Abaixo, o gráfico foi transformado no modo interativo e o tamanho do arquivo, assim como os botões modificados para formas mais simples.</p>
<div class="sourceCode" id="cb1630"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metrics_plot</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/partial_bundle.html">partial_bundle</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu">config</span><span class="op">(</span>displaylogo <span class="op">=</span> <span class="cn">FALSE</span>, modeBarButtonsToRemove <span class="op">=</span> <span class="va">plotly_buttons_remove</span><span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b4e7cecd6ea49cc90f16" style="width:95%;height:500px;"></div>
<script type="application/json" data-for="htmlwidget-b4e7cecd6ea49cc90f16">{"x":{"data":[{"x":[18393,18400,18407,18414,18421,18428,18435,18442,18449,18456,18463,18470],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"z":[[0,0,0,0,0.28999999999999998,1,1,1,1,1,1,0.56999999999999995],[0,0,0,0,0,0,0,0.28999999999999998,1,0.85999999999999999,0.28999999999999998,0.42999999999999999],[0,0,0,0.14000000000000001,0.70999999999999996,0.28999999999999998,0.70999999999999996,0.85999999999999999,0.70999999999999996,1,0.85999999999999999,0.70999999999999996],[0.28999999999999998,1,1,1,1,1,1,1,1,1,1,0.70999999999999996],[0,0,0,0.14000000000000001,0.85999999999999999,0.42999999999999999,0.70999999999999996,0.56999999999999995,0.70999999999999996,1,1,0.70999999999999996],[0,0,0,0,0.85999999999999999,0.85999999999999999,1,1,1,1,1,0.70999999999999996],[0,0,0,0,0,0,0.28999999999999998,0.70999999999999996,1,1,1,0.70999999999999996],[0,0,0,0,0.85999999999999999,1,1,1,1,1,1,0.70999999999999996],[0,0,0,0,0.14000000000000001,0.85999999999999999,0.85999999999999999,0.85999999999999999,0.85999999999999999,1,0.85999999999999999,0.56999999999999995],[0,0,0,0,0,0,0.14000000000000001,0,0,0,0,0],[0,0,0,0.14000000000000001,1,1,1,1,1,1,1,0.70999999999999996],[0,0,0,0,0,0.28999999999999998,0.85999999999999999,0.70999999999999996,0.85999999999999999,0.85999999999999999,0.70999999999999996,0.70999999999999996],[0,0,0,0,0,0.28999999999999998,0.56999999999999995,0,0,0,0,0],[0,0,0,0,0,0.70999999999999996,1,1,0.85999999999999999,1,1,0.70999999999999996],[0,0,0,0,0.85999999999999999,1,1,1,1,1,0.56999999999999995,0.70999999999999996]],"text":[["week: 2020-05-11<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 1<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 1<br />p_days_reported:  29","week: 2020-06-15<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 1<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 1<br />p_days_reported:  57"],["week: 2020-05-11<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-22<br />location_name: Facility 11<br />p_days_reported:   0","week: 2020-06-29<br />location_name: Facility 11<br />p_days_reported:  29","week: 2020-07-06<br />location_name: Facility 11<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 11<br />p_days_reported:  86","week: 2020-07-20<br />location_name: Facility 11<br />p_days_reported:  29","week: 2020-07-27<br />location_name: Facility 11<br />p_days_reported:  43"],["week: 2020-05-11<br />location_name: Facility 27<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 27<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 27<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 27<br />p_days_reported:  14","week: 2020-06-08<br />location_name: Facility 27<br />p_days_reported:  71","week: 2020-06-15<br />location_name: Facility 27<br />p_days_reported:  29","week: 2020-06-22<br />location_name: Facility 27<br />p_days_reported:  71","week: 2020-06-29<br />location_name: Facility 27<br />p_days_reported:  86","week: 2020-07-06<br />location_name: Facility 27<br />p_days_reported:  71","week: 2020-07-13<br />location_name: Facility 27<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 27<br />p_days_reported:  86","week: 2020-07-27<br />location_name: Facility 27<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 28<br />p_days_reported:  29","week: 2020-05-18<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-05-25<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-01<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-08<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-15<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 28<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 28<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 32<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 32<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 32<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 32<br />p_days_reported:  14","week: 2020-06-08<br />location_name: Facility 32<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 32<br />p_days_reported:  43","week: 2020-06-22<br />location_name: Facility 32<br />p_days_reported:  71","week: 2020-06-29<br />location_name: Facility 32<br />p_days_reported:  57","week: 2020-07-06<br />location_name: Facility 32<br />p_days_reported:  71","week: 2020-07-13<br />location_name: Facility 32<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 32<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 32<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 35<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 35<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 35<br />p_days_reported:  86","week: 2020-06-22<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 35<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 35<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 39<br />p_days_reported:   0","week: 2020-06-22<br />location_name: Facility 39<br />p_days_reported:  29","week: 2020-06-29<br />location_name: Facility 39<br />p_days_reported:  71","week: 2020-07-06<br />location_name: Facility 39<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 39<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 39<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 39<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 50<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 50<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 50<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 50<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 51<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 51<br />p_days_reported:  14","week: 2020-06-15<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-06-22<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-06-29<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-07-06<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-07-13<br />location_name: Facility 51<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 51<br />p_days_reported:  86","week: 2020-07-27<br />location_name: Facility 51<br />p_days_reported:  57"],["week: 2020-05-11<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-06-22<br />location_name: Facility 56<br />p_days_reported:  14","week: 2020-06-29<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-06<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-13<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-20<br />location_name: Facility 56<br />p_days_reported:   0","week: 2020-07-27<br />location_name: Facility 56<br />p_days_reported:   0"],["week: 2020-05-11<br />location_name: Facility 58<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 58<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 58<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 58<br />p_days_reported:  14","week: 2020-06-08<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-06-15<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 58<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 58<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 59<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 59<br />p_days_reported:  29","week: 2020-06-22<br />location_name: Facility 59<br />p_days_reported:  86","week: 2020-06-29<br />location_name: Facility 59<br />p_days_reported:  71","week: 2020-07-06<br />location_name: Facility 59<br />p_days_reported:  86","week: 2020-07-13<br />location_name: Facility 59<br />p_days_reported:  86","week: 2020-07-20<br />location_name: Facility 59<br />p_days_reported:  71","week: 2020-07-27<br />location_name: Facility 59<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 65<br />p_days_reported:  29","week: 2020-06-22<br />location_name: Facility 65<br />p_days_reported:  57","week: 2020-06-29<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-06<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-13<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-20<br />location_name: Facility 65<br />p_days_reported:   0","week: 2020-07-27<br />location_name: Facility 65<br />p_days_reported:   0"],["week: 2020-05-11<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 7<br />p_days_reported:   0","week: 2020-06-15<br />location_name: Facility 7<br />p_days_reported:  71","week: 2020-06-22<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 7<br />p_days_reported:  86","week: 2020-07-13<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 7<br />p_days_reported: 100","week: 2020-07-27<br />location_name: Facility 7<br />p_days_reported:  71"],["week: 2020-05-11<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-05-18<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-05-25<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-06-01<br />location_name: Facility 9<br />p_days_reported:   0","week: 2020-06-08<br />location_name: Facility 9<br />p_days_reported:  86","week: 2020-06-15<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-06-22<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-06-29<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-07-06<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-07-13<br />location_name: Facility 9<br />p_days_reported: 100","week: 2020-07-20<br />location_name: Facility 9<br />p_days_reported:  57","week: 2020-07-27<br />location_name: Facility 9<br />p_days_reported:  71"]],"colorscale":[[0,"#FFA500"],[0.14000000000000001,"#E09D00"],[0.28999999999999998,"#BE9500"],[0.42999999999999999,"#9F8C00"],[0.56999999999999995,"#818300"],[0.70999999999999996,"#617A00"],[0.85999999999999999,"#3C6F00"],[1,"#006400"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18400],"y":[1],"name":"99_b00e3d05e5d69976201e1f94cacbc418","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#FFA500"],[0.0033444816053511705,"#FEA500"],[0.006688963210702341,"#FDA500"],[0.010033444816053512,"#FDA400"],[0.013377926421404682,"#FCA400"],[0.016722408026755852,"#FBA400"],[0.020066889632107024,"#FAA400"],[0.023411371237458196,"#FAA400"],[0.026755852842809364,"#F9A400"],[0.030100334448160532,"#F8A300"],[0.033444816053511704,"#F7A300"],[0.03678929765886288,"#F7A300"],[0.040133779264214048,"#F6A300"],[0.043478260869565216,"#F5A300"],[0.046822742474916391,"#F4A300"],[0.05016722408026756,"#F4A200"],[0.053511705685618728,"#F3A200"],[0.056856187290969896,"#F2A200"],[0.060200668896321065,"#F1A200"],[0.06354515050167224,"#F1A200"],[0.066889632107023408,"#F0A100"],[0.070234113712374577,"#EFA100"],[0.073578595317725759,"#EEA100"],[0.076923076923076927,"#EEA100"],[0.080267558528428096,"#EDA100"],[0.083612040133779264,"#ECA100"],[0.086956521739130432,"#EBA000"],[0.090301003344481601,"#EBA000"],[0.093645484949832783,"#EAA000"],[0.096989966555183937,"#E9A000"],[0.10033444816053512,"#E8A000"],[0.10367892976588627,"#E89F00"],[0.10702341137123746,"#E79F00"],[0.11036789297658864,"#E69F00"],[0.11371237458193979,"#E59F00"],[0.11705685618729098,"#E59F00"],[0.12040133779264213,"#E49F00"],[0.12374581939799331,"#E39E00"],[0.12709030100334448,"#E29E00"],[0.13043478260869565,"#E29E00"],[0.13377926421404682,"#E19E00"],[0.13712374581939801,"#E09E00"],[0.14046822742474915,"#E09D00"],[0.14381270903010035,"#DF9D00"],[0.14715719063545152,"#DE9D00"],[0.15050167224080269,"#DD9D00"],[0.15384615384615385,"#DD9D00"],[0.15719063545150502,"#DC9D00"],[0.16053511705685619,"#DB9C00"],[0.16387959866220736,"#DA9C00"],[0.16722408026755853,"#DA9C00"],[0.1705685618729097,"#D99C00"],[0.17391304347826086,"#D89C00"],[0.17725752508361203,"#D79B00"],[0.1806020066889632,"#D79B00"],[0.1839464882943144,"#D69B00"],[0.18729096989966557,"#D59B00"],[0.19063545150501671,"#D49B00"],[0.19397993311036787,"#D49A00"],[0.19732441471571907,"#D39A00"],[0.20066889632107024,"#D29A00"],[0.20401337792642141,"#D19A00"],[0.20735785953177255,"#D19A00"],[0.21070234113712374,"#D09900"],[0.21404682274247491,"#CF9900"],[0.21739130434782608,"#CE9900"],[0.22073578595317728,"#CE9900"],[0.22408026755852842,"#CD9900"],[0.22742474916387959,"#CC9900"],[0.23076923076923075,"#CB9800"],[0.23411371237458195,"#CB9800"],[0.23745819397993312,"#CA9800"],[0.24080267558528426,"#C99800"],[0.24414715719063543,"#C89800"],[0.24749163879598662,"#C89700"],[0.25083612040133779,"#C79700"],[0.25418060200668896,"#C69700"],[0.25752508361204013,"#C69700"],[0.2608695652173913,"#C59700"],[0.26421404682274247,"#C49600"],[0.26755852842809363,"#C39600"],[0.2709030100334448,"#C39600"],[0.27424749163879603,"#C29600"],[0.27759197324414714,"#C19600"],[0.28093645484949831,"#C09500"],[0.28428093645484948,"#C09500"],[0.2876254180602007,"#BF9500"],[0.29096989966555187,"#BE9500"],[0.29431438127090304,"#BD9500"],[0.29765886287625415,"#BD9400"],[0.30100334448160537,"#BC9400"],[0.30434782608695654,"#BB9400"],[0.30769230769230771,"#BA9400"],[0.31103678929765888,"#BA9400"],[0.31438127090301005,"#B99300"],[0.31772575250836121,"#B89300"],[0.32107023411371238,"#B79300"],[0.32441471571906355,"#B79300"],[0.32775919732441472,"#B69300"],[0.33110367892976589,"#B59200"],[0.33444816053511706,"#B59200"],[0.33779264214046828,"#B49200"],[0.34113712374581939,"#B39200"],[0.34448160535117056,"#B29200"],[0.34782608695652173,"#B29100"],[0.3511705685618729,"#B19100"],[0.35451505016722407,"#B09100"],[0.35785953177257523,"#AF9100"],[0.3612040133779264,"#AF9100"],[0.36454849498327763,"#AE9000"],[0.3678929765886288,"#AD9000"],[0.37123745819397996,"#AC9000"],[0.37458193979933113,"#AC9000"],[0.37792642140468224,"#AB9000"],[0.38127090301003341,"#AA8F00"],[0.38461538461538458,"#A98F00"],[0.38795986622073575,"#A98F00"],[0.39130434782608697,"#A88F00"],[0.39464882943143814,"#A78E00"],[0.39799331103678931,"#A78E00"],[0.40133779264214048,"#A68E00"],[0.40468227424749165,"#A58E00"],[0.40802675585284282,"#A48E00"],[0.41137123745819393,"#A48D00"],[0.4147157190635451,"#A38D00"],[0.41806020066889632,"#A28D00"],[0.42140468227424749,"#A18D00"],[0.42474916387959866,"#A18D00"],[0.42809364548494983,"#A08C00"],[0.43143812709030099,"#9F8C00"],[0.43478260869565216,"#9E8C00"],[0.43812709030100339,"#9E8C00"],[0.44147157190635455,"#9D8C00"],[0.44481605351170572,"#9C8B00"],[0.44816053511705684,"#9B8B00"],[0.451505016722408,"#9B8B00"],[0.45484949832775917,"#9A8B00"],[0.45819397993311034,"#998A00"],[0.46153846153846151,"#998A00"],[0.46488294314381273,"#988A00"],[0.4682274247491639,"#978A00"],[0.47157190635451507,"#968A00"],[0.47491638795986624,"#968900"],[0.47826086956521741,"#958900"],[0.48160535117056852,"#948900"],[0.48494983277591969,"#938900"],[0.48829431438127086,"#938900"],[0.49163879598662208,"#928800"],[0.49498327759197325,"#918800"],[0.49832775919732442,"#908800"],[0.50167224080267558,"#908800"],[0.50501672240802675,"#8F8700"],[0.50836120401337792,"#8E8700"],[0.51170568561872909,"#8D8700"],[0.51505016722408026,"#8D8700"],[0.51839464882943143,"#8C8700"],[0.52173913043478259,"#8B8600"],[0.52508361204013376,"#8B8600"],[0.52842809364548493,"#8A8600"],[0.5317725752508361,"#898600"],[0.53511705685618727,"#888600"],[0.53846153846153844,"#888500"],[0.5418060200668896,"#878500"],[0.54515050167224077,"#868500"],[0.54849498327759205,"#858500"],[0.55183946488294322,"#858400"],[0.55518394648829428,"#848400"],[0.55852842809364545,"#838400"],[0.56187290969899661,"#828400"],[0.56521739130434778,"#828400"],[0.56856187290969895,"#818300"],[0.57190635451505012,"#808300"],[0.5752508361204014,"#7F8300"],[0.57859531772575257,"#7F8300"],[0.58193979933110374,"#7E8200"],[0.5852842809364549,"#7D8200"],[0.58862876254180607,"#7C8200"],[0.59197324414715713,"#7C8200"],[0.5953177257525083,"#7B8200"],[0.59866220735785947,"#7A8100"],[0.60200668896321075,"#798100"],[0.60535117056856191,"#798100"],[0.60869565217391308,"#788100"],[0.61204013377926425,"#778000"],[0.61538461538461542,"#768000"],[0.61872909698996659,"#768000"],[0.62207357859531776,"#758000"],[0.62541806020066881,"#747F00"],[0.62876254180602009,"#737F00"],[0.63210702341137126,"#737F00"],[0.63545150501672243,"#727F00"],[0.6387959866220736,"#717F00"],[0.64214046822742477,"#707E00"],[0.64548494983277593,"#707E00"],[0.6488294314381271,"#6F7E00"],[0.65217391304347827,"#6E7E00"],[0.65551839464882944,"#6D7D00"],[0.65886287625418061,"#6D7D00"],[0.66220735785953178,"#6C7D00"],[0.66555183946488294,"#6B7D00"],[0.66889632107023411,"#6A7C00"],[0.67224080267558539,"#6A7C00"],[0.67558528428093656,"#697C00"],[0.67892976588628751,"#687C00"],[0.68227424749163879,"#677C00"],[0.68561872909698995,"#677B00"],[0.68896321070234112,"#667B00"],[0.69230769230769229,"#657B00"],[0.69565217391304346,"#647B00"],[0.69899665551839463,"#637A00"],[0.7023411371237458,"#637A00"],[0.70568561872909696,"#627A00"],[0.70903010033444813,"#617A00"],[0.7123745819397993,"#607900"],[0.71571906354515047,"#607900"],[0.71906354515050164,"#5F7900"],[0.72240802675585281,"#5E7900"],[0.72575250836120409,"#5D7800"],[0.72909698996655525,"#5C7800"],[0.73244147157190642,"#5C7800"],[0.73578595317725759,"#5B7800"],[0.73913043478260876,"#5A7800"],[0.74247491638795993,"#597700"],[0.7458193979933111,"#587700"],[0.74916387959866226,"#587700"],[0.75250836120401332,"#577700"],[0.75585284280936449,"#567600"],[0.75919732441471566,"#557600"],[0.76254180602006683,"#557600"],[0.76588628762541799,"#547600"],[0.76923076923076916,"#537500"],[0.77257525083612033,"#527500"],[0.7759197324414715,"#517500"],[0.77926421404682278,"#507500"],[0.78260869565217395,"#507400"],[0.78595317725752512,"#4F7400"],[0.78929765886287628,"#4E7400"],[0.79264214046822745,"#4D7400"],[0.79598662207357862,"#4C7300"],[0.79933110367892979,"#4C7300"],[0.80267558528428096,"#4B7300"],[0.80602006688963213,"#4A7300"],[0.80936454849498329,"#497200"],[0.81270903010033446,"#487200"],[0.81605351170568563,"#477200"],[0.81939799331103691,"#467200"],[0.82274247491638786,"#467100"],[0.82608695652173902,"#457100"],[0.82943143812709019,"#447100"],[0.83277591973244147,"#437100"],[0.83612040133779264,"#427000"],[0.83946488294314381,"#417000"],[0.84280936454849498,"#407000"],[0.84615384615384615,"#3F7000"],[0.84949832775919731,"#3F7000"],[0.85284280936454848,"#3E6F00"],[0.85618729096989965,"#3D6F00"],[0.85953177257525082,"#3C6F00"],[0.86287625418060199,"#3B6F00"],[0.86622073578595316,"#3A6E00"],[0.86956521739130432,"#396E00"],[0.8729096989966556,"#386E00"],[0.87625418060200677,"#376E00"],[0.87959866220735794,"#366D00"],[0.88294314381270911,"#356D00"],[0.88628762541806028,"#346D00"],[0.88963210702341144,"#336D00"],[0.8929765886287625,"#326C00"],[0.89632107023411367,"#316C00"],[0.89966555183946484,"#306C00"],[0.90301003344481601,"#2F6B00"],[0.90635451505016718,"#2E6B00"],[0.90969899665551834,"#2D6B00"],[0.91304347826086951,"#2C6B00"],[0.91638795986622068,"#2B6A00"],[0.91973244147157185,"#2A6A00"],[0.92307692307692302,"#296A00"],[0.9264214046822743,"#286A00"],[0.92976588628762546,"#266900"],[0.93311036789297663,"#256900"],[0.9364548494983278,"#246900"],[0.93979933110367897,"#236900"],[0.94314381270903014,"#226800"],[0.94648829431438131,"#206800"],[0.94983277591973247,"#1F6800"],[0.95317725752508364,"#1D6800"],[0.95652173913043481,"#1C6700"],[0.95986622073578598,"#1B6700"],[0.96321070234113704,"#196700"],[0.96655518394648821,"#176700"],[0.96989966555183937,"#166600"],[0.97324414715719054,"#146600"],[0.97658862876254171,"#126600"],[0.97993311036789299,"#106600"],[0.98327759197324416,"#0E6500"],[0.98662207357859533,"#0B6500"],[0.98996655518394649,"#086500"],[0.99331103678929766,"#056500"],[0.99665551839464883,"#036400"],[1,"#006400"]],"colorbar":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"thickness":22.677165354330711,"title":"Performance de <br /> reporte (%)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402243},"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,0.25,0.5,0.75,1],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835198},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":44.825238688252384,"r":7.3059360730593621,"b":45.761726857617269,"l":91.191365711913676},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Porcentagem de dia por semana que o estabelecimento <br /> reportou dados <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":18.596928185969279},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[18389.5,18473.5],"tickmode":"array","ticktext":["18<br />May","01<br />Jun","15<br />Jun","29<br />Jun","13<br />Jul","27<br />Jul"],"tickvals":[18400,18414,18428,18442,18456,18470],"categoryorder":"array","categoryarray":["18<br />May","01<br />Jun","15<br />Jun","29<br />Jun","13<br />Jul","27<br />Jul"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.6529680365296811,"tickwidth":0.53134080531340799,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":15.940224159402243},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"<b> Semana <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402243}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,15.6],"tickmode":"array","ticktext":["Facility 1","Facility 11","Facility 27","Facility 28","Facility 32","Facility 35","Facility 39","Facility 50","Facility 51","Facility 56","Facility 58","Facility 59","Facility 65","Facility 7","Facility 9"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"categoryorder":"array","categoryarray":["Facility 1","Facility 11","Facility 27","Facility 28","Facility 32","Facility 35","Facility 39","Facility 50","Facility 51","Facility 56","Facility 58","Facility 59","Facility 65","Facility 7","Facility 9"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.6529680365296811,"tickwidth":0.5313408053134081,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"<b> Nome do Estabelecimento <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402243}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835198},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402243}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false,"modeBarButtonsToRemove":["zoom2d","pan2d","lasso2d","select2d","zoomIn2d","zoomOut2d","autoScale2d","hoverClosestCartesian","toggleSpikelines","hoverCompareCartesian"]},"source":"A","attrs":{"562838d05b62":{"x":{},"y":{},"fill":{},"type":"heatmap"}},"cur_data":"562838d05b62","visdat":{"562838d05b62":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><!-- ## Mapas{.unnumbered}   --><!-- Você também pode fazer mapas GIS interativos do `ggplot()`, porém  exige mais trabalho--><!-- SEÇÃO EM CONSTRUÇÃO --><!-- Embora o **plotly**  funcione bem com o `ggplot2::geom_sf` no RStudio,   quando na tentativa de incluir os resultados no formato HTML pelo R Markdown(como neste livro), não se obteve o resultado esperado.   --><!-- Assim, em vez disso, pode usar as próprias ferramentas de mapeamento do{**plotly**} que podem ser complicadas,  mas são fáceis quando se sabe como. Continuar leitura..   --><!-- Vamos usar a incidência de Covid-19 em todos os países africanos para este exemplo. Os dados utilizados podem ser encontrados no  [World Health Organisation website](https://covid19.who.int/table).   --><!-- Também vai precisar de um novo tipo de arquivo, um GeoJSON, mais ou menos semelhante a um arquivo de shp para quem está familiarizado com o SIG. Para este livro, será utilizado [este](https://geojson-maps.ash.ms).   --><!-- GeoJSON são armazenados em R como listas complexas e terá de manipulá-los um pouco --><!-- ```{r, echo=T,} --><!-- ## Instalar dois novos pacotes: {rjson} and {purrr} --><!-- pacman::p_load(plotly, rjson, purrr) --><!-- ## Esta é uma versão simplificada dos dados da OMS --><!-- df <- rio::import(here::here("data", "gis", "covid_incidence.csv")) --><!-- ## Carregar seu arquivo geojson --><!-- geoJSON <- rjson::fromJSON(file=here::here("data", "gis", "africa_countries.geo.json")) --><!-- ## Aqui estão algumas das propriedades de cada elemento do objeto --><!-- head(geoJSON$features[[1]]$properties) --><!-- ``` --><!-- Esta é a parte complicada. Para{**plotly**} fazer corresponder os seus dados de incidência ao GeoJSON, os países do geoJSON precisam de uma identificação num lugar específico na lista. Para isso, é necessário construir uma função básica: --><!-- ```{r} --><!-- ## A coluna da propriedade a ser escolhida é a "sovereignt" pois são os nomes de cada país--><!-- give_id <- function(x){ --><!--   x$id <- x$properties$sovereignt  ## Assumir  "sovereignt" das propriedades e defini-la como o id --><!--   return(x) --><!-- } --><!-- ## Use {purrr} para aplicar esta função a cada elemento da lista de características do objeto geoJSON --><!-- geoJSON$features <- purrr::map(.x = geoJSON$features, give_id) --><!-- ``` --><!-- <!-- ======================================================= --><p>–&gt;
<!-- ### Mapas - plot {  } --></p>
<!-- Em construção -->
<!-- ```{r, echo=FALSE, eval=FALSE, out.width=c('95%'), out.height=c('500px'),warning=F} -->
<!-- plotly::plot_ly() %>%  -->
<!--   plotly::add_trace(         ##A função principal de mapeamento -->
<!--     type="choropleth", -->
<!--     geojson=geoJSON, -->
<!--     locations=df$Name,      #A coluna com os nomes (deve corresponder ao id)  -->
<!--     z=df$Cumulative_incidence,  #A coluna com os valores de incidência -->
<!--     zmin=0, -->
<!--     zmax=57008, -->
<!--     colorscale="Viridis", -->
<!--     marker=list(line=list(width=0)) -->
<!--   ) %>% -->
<!--   colorbar(title = "Cases per million") %>% -->
<!--   layout(title = "Covid-19 cumulative incidence", -->
<!--                  geo = list(scope = 'africa')) %>%  -->
<!--   config(displaylogo = FALSE, modeBarButtonsToRemove = plotly_buttons_remove) -->
<!-- ``` -->
<!-- ======================================================= -->
</div>
<div id="recursos-21" class="section level2" number="37.5">
<h2>
<span class="header-section-number">37.5</span> Recursos<a class="anchor" aria-label="anchor" href="#recursos-21"><i class="fas fa-link"></i></a>
</h2>
<p>Plotly não é apenas para R, também funciona bem com Python (e qualquer linguagem de ciência de dados, por ser construído em JavaScript). Você pode ler mais sobre o tema no <a href="https://plotly.com/r/">Website plotly</a></p>

</div>
</div>



<div class="chapter-nav">
<div class="prev"><a href="phylogenetic-trees.html"><span class="header-section-number">36</span> Árvores filogenéticas</a></div>
<div class="next"><a href="rmarkdown.html"><span class="header-section-number">38</span> Relatórios com R Markdown</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#interactive-plots"><span class="header-section-number">37</span> Gráficos interativos</a></li>
<li>
<a class="nav-link" href="#prepara%C3%A7%C3%A3o-29"><span class="header-section-number">37.1</span> Preparação</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#carregando-os-pacotes">Carregando os pacotes</a></li>
<li><a class="nav-link" href="#comece-com-um-ggplot">Comece com um ggplot()</a></li>
<li><a class="nav-link" href="#importar-os-dados-1">Importar os dados</a></li>
</ul>
</li>
<li><a class="nav-link" href="#gr%C3%A1fico-com-ggplotly"><span class="header-section-number">37.2</span> Gráfico com ggplotly()</a></li>
<li>
<a class="nav-link" href="#modifica%C3%A7%C3%B5es"><span class="header-section-number">37.3</span> Modificações</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tamanho-do-arquivo">Tamanho do arquivo</a></li>
<li><a class="nav-link" href="#bot%C3%B5es">Botões</a></li>
</ul>
</li>
<li><a class="nav-link" href="#gr%C3%A1fico--blocos-de-calor"><span class="header-section-number">37.4</span> Gráfico -Blocos de calor</a></li>
<li><a class="nav-link" href="#recursos-21"><span class="header-section-number">37.5</span> Recursos</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>
</div>
  

  

</div>
 <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Manual de R para Epidemiologistas</strong>" was written by the handbook team. It was last built on 2023-10-22.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
