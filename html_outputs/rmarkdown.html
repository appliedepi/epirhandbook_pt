<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>40 Relatórios com R Markdown | Manual de R para Epidemiologistas</title>
<meta name="author" content="the handbook team">
<meta name="description" content="R Markdown é uma ferramenta amplamente usada para criar produtos automatizados, reproduzíveis e compartilháveis, como relatórios. É possível criar produtos estáticos ou interativos, em MS Word,...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="40 Relatórios com R Markdown | Manual de R para Epidemiologistas">
<meta property="og:type" content="book">
<meta property="og:description" content="R Markdown é uma ferramenta amplamente usada para criar produtos automatizados, reproduzíveis e compartilháveis, como relatórios. É possível criar produtos estáticos ou interativos, em MS Word,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="40 Relatórios com R Markdown | Manual de R para Epidemiologistas">
<meta name="twitter:description" content="R Markdown é uma ferramenta amplamente usada para criar produtos automatizados, reproduzíveis e compartilháveis, como relatórios. É possível criar produtos estáticos ou interativos, em MS Word,...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.29/datatables.js"></script><link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.2.0/leaflet.js"></script><script src="libs/leaflet-providers-1.13.0/leaflet-providers_1.13.0.js"></script><script src="libs/leaflet-providers-plugin-2.2.0/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.10/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.2/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script><script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>
</head>
<body>
<div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
      <strong>Você precisa de ajuda para aprender R?</strong> Inscreva-se no curso de <a href="https://www.appliedepi.org/live/" class="alert-link">introdução ao R</a> da Applied Epi, experimente nossos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriais gratuitos sobre o R</a>, publique em nosso <a href="https://community.appliedepi.org/" class="alert-link">fórum de perguntas e respostas</a>, ou solicite nosso <a href="mailto:contact@appliedepi.org" class="alert-link">suporte ao R</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Manual de R para Epidemiologistas</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Sobre este livro</li>
<li><a class="" href="editorial-style.html"><span class="header-section-number">1</span> Notas editoriais e técnicas</a></li>
<li><a class="" href="data-used.html"><span class="header-section-number">2</span> Baixe o livro e os dados</a></li>
<li class="book-part">Básico</li>
<li><a class="" href="basics.html"><span class="header-section-number">3</span> Introdução ao R</a></li>
<li><a class="" href="transition-to-R.html"><span class="header-section-number">4</span> Transição para o R</a></li>
<li><a class="" href="packages-suggested.html"><span class="header-section-number">5</span> Pacotes sugeridos</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> R projects</a></li>
<li><a class="" href="importing.html"><span class="header-section-number">7</span> Importar e exportar</a></li>
<li class="book-part">Gerenciamento dos Dados</li>
<li><a class="" href="cleaning.html"><span class="header-section-number">8</span> Limpeza de dados e principais funções</a></li>
<li><a class="" href="dates.html"><span class="header-section-number">9</span> Trabalhando com datas</a></li>
<li><a class="" href="characters-strings.html"><span class="header-section-number">10</span> Caracteres e strings</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Fatores</a></li>
<li><a class="" href="pivoting.html"><span class="header-section-number">12</span> Pivoteando dados</a></li>
<li><a class="" href="grouping.html"><span class="header-section-number">13</span> Agrupando dados</a></li>
<li><a class="" href="joining-matching.html"><span class="header-section-number">14</span> Juntando dados (Joins)</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> Eliminação de duplicidades</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> Iterações, loops e listas</a></li>
<li class="book-part">Análise dos dados</li>
<li><a class="" href="tables-descriptive.html"><span class="header-section-number">17</span> Tabelas descritivas</a></li>
<li><a class="" href="stat-tests.html"><span class="header-section-number">18</span> Testes estatísticos simples</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">19</span> Regressão simples e múltipla</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> Campos em branco/faltantes</a></li>
<li><a class="" href="standardization.html"><span class="header-section-number">21</span> Normalização de taxas</a></li>
<li><a class="" href="moving-average.html"><span class="header-section-number">22</span> Médias móveis</a></li>
<li><a class="" href="time-series.html"><span class="header-section-number">23</span> Séries temporais e detecção de surtos</a></li>
<li><a class="" href="epidemic-models.html"><span class="header-section-number">24</span> Modelagem de epidemias</a></li>
<li><a class="" href="contact-tracing.html"><span class="header-section-number">25</span> Rastreamento de contatos</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">26</span> Analises de pesquisa de questionários (survey)</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">27</span> Análise de sobrevivência</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">28</span> Introdução ao GIS</a></li>
<li class="book-part">Visualização de Dados</li>
<li><a class="" href="tables-presentation.html"><span class="header-section-number">29</span> Tabelas para apresentação</a></li>
<li><a class="" href="ggplot-basics.html"><span class="header-section-number">30</span> O básico do ggplot</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">31</span> Dicas do ggplot</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">32</span> Curvas epidêmicas</a></li>
<li><a class="" href="age-pyramid.html"><span class="header-section-number">33</span> Pirâmides demográficas e escalas Likert</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">34</span> Gráficos de calor</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">35</span> Diagramas e gráficos</a></li>
<li><a class="" href="combination-analysis.html"><span class="header-section-number">36</span> Análise de Combinações</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">37</span> Cadeias de Transmissão</a></li>
<li><a class="" href="phylogenetic-trees.html"><span class="header-section-number">38</span> Árvores filogenéticas</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">39</span> Gráficos interativos</a></li>
<li class="book-part">Relatórios e dashboards</li>
<li><a class="active" href="rmarkdown.html"><span class="header-section-number">40</span> Relatórios com R Markdown</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">41</span> Organização de relatórios de rotina</a></li>
<li><a class="" href="flexdashboard.html"><span class="header-section-number">42</span> Painéis (Dashboards) com R Markdown</a></li>
<li><a class="" href="shiny-basics.html"><span class="header-section-number">43</span> Painéis com Shiny</a></li>
<li class="book-part">Miscelânea</li>
<li><a class="" href="writing-functions.html"><span class="header-section-number">44</span> Escrevendo funções</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">45</span> Interações de diretório</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">46</span> Controle de versão e colaboração com Git e Github</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">47</span> Erros comuns</a></li>
<li><a class="" href="help.html"><span class="header-section-number">48</span> Conseguindo ajuda</a></li>
<li><a class="" href="network-drives.html"><span class="header-section-number">49</span> R em drives (pastas) na rede</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">50</span> Data Table</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="rmarkdown" class="section level1" number="40">
<h1>
<span class="header-section-number">40</span> Relatórios com R Markdown<a class="anchor" aria-label="anchor" href="#rmarkdown"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/markdown/rmarkdown_overview.png" width="100%" style="display: block; margin: auto;"></div>
<p>R Markdown é uma ferramenta amplamente usada para criar produtos automatizados, reproduzíveis e compartilháveis, como relatórios. É possível criar produtos estáticos ou interativos, em MS Word, pdf, html, powerpoint, entre outros formatos.</p>
<p>Um script de R Markdown intercala código em R e texto de modo que o script <em>se torna o seu output final</em>. é possível criar um documento completamente formatado, incluindo o texto (que pode ser dinâmico para mudar de acordo com os seus dados), tabelas, figuras, itens enumerados ou não, bibliografia, etc.</p>
<p>Esses documentos podem ser produzidos para serem atualizados com base em uma rotina (por exemplo, relatórios diários de vigilância) ou rodarem com subconjuntos dos seus dados, como relatórios para cada jurisdição de uma agência.</p>
<p>Outras páginas nesse livro expandem esse assunto:</p>
<ul>
<li>A página <a href="reportfactory.html#reportfactory">Organização de relatórios de rotina</a> demonstra como aplicar uma rotina à produção de relatórios com pastas geradas automaticamente com seus metadados de tempo (<strong>timestamps</strong>).</li>
<li>A página <a href="flexdashboard.html#flexdashboard">Dashboards with R Markdown</a> explica como formatar um relatório R Markdown como um painel (<strong>dashboard</strong>).</li>
</ul>
<p>Em outra nota, o projeto <a href="https://r4epis.netlify.app/">R4Epis</a> tem desenvolvido templates de scripts R Markdown para surtos comuns e cenários de pesquisa encontrados em locais do projeto MSF (Médicos Sem Fronteiras).</p>
<!-- ======================================================= -->
<div id="preparação-32" class="section level2" number="40.1">
<h2>
<span class="header-section-number">40.1</span> Preparação<a class="anchor" aria-label="anchor" href="#prepara%C3%A7%C3%A3o-32"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Ideias preliminares ao R Markdown</strong></p>
<p>Para explicar alguns dos conceitos e pacotes envolvidos:</p>
<ul>
<li>
<strong>Markdown</strong> é uma “linguagem” que permite escrever um documento usando texto comum, que pode ser convertido para html e outros formatos. Não é específico de R e arquivos escritos nessa “linguagem” tem extensão ‘.md’.</li>
<li>
<strong>R Markdown</strong>: é uma variação de markdown que <em>é específica de R</em> - permite escrever um documento usando markdown para produzir código, <em>mas também incluir código em R e expor seus resultados</em>.<br>
</li>
<li>
<strong>rmarkdown - o pacote</strong>: é usado pelo R para renderizar o arquivo .Rmd para a exportação desejada. Seu foco é converter a sintaxe markdown (texto), então também precisamos de…</li>
<li>
<strong>knitr</strong>: Esse pacote do R lerá os blocos de código, executá-los e costurá-los (do inglês <em>knit</em>, tricotar) de volta ao documento.</li>
<li>
<strong>Pandoc</strong>: Finalmente, pandoc converte o objeto final em um documento word/pdf/powerpoint, etc. É um software separado do R, mas é instalado automaticamente com o RStudio.</li>
</ul>
<div class="inline-figure"><img src="images/markdown/0_rmd.png" width="100%" style="display: block; margin: auto;"></div>
<p>(Fonte: <a href="https://rmarkdown.rstudio.com/authoring_quick_tour.html" class="uri">https://rmarkdown.rstudio.com/authoring_quick_tour.html</a>):</p>
<p><strong>Instalação</strong></p>
<p>Para criar um produto R Markdown, é necessário ter os seguintes instalados:</p>
<ul>
<li>O pacote <strong>rmarkdown</strong> (<strong>knitr</strong> será automaticamente instalado também)<br>
</li>
<li>Pandoc, que deve ter vindo instalado com RStudio. Se você não está usando RStudio, é possível baixar o Pandoc aqui: <a href="http://pandoc.org" class="uri">http://pandoc.org</a>.</li>
<li>Se quiser gerar um arquivo PDF (um pouquinho mais complicado), será necessário instalar o LaTeX. Para usuários de R Markdown que nunca instalaram o LaTeX antes, recomendamos que instale o TinyTeX (<a href="https://yihui.name/tinytex/" class="uri">https://yihui.name/tinytex/</a>). Para isso, use os seguintes comandos:</li>
</ul>
<div class="sourceCode" id="cb1760"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">tinytex</span><span class="op">)</span>     <span class="co"># instala o pacote tinytex</span></span>
<span><span class="fu">tinytex</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tinytex/man/install_tinytex.html">install_tinytex</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Comando de R para instalar o software TinyTeX</span></span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="começando" class="section level2" number="40.2">
<h2>
<span class="header-section-number">40.2</span> Começando<a class="anchor" aria-label="anchor" href="#come%C3%A7ando"><i class="fas fa-link"></i></a>
</h2>
<div id="instalação-do-pacote-rmarkdown-para-r" class="section level3 unnumbered">
<h3>Instalação do pacote rmarkdown para R<a class="anchor" aria-label="anchor" href="#instala%C3%A7%C3%A3o-do-pacote-rmarkdown-para-r"><i class="fas fa-link"></i></a>
</h3>
<p>Instale o pacote <strong>rmarkdown</strong>. Neste livro enfatizamos <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> de <strong>pacman</strong>, que instala o pacote se necessário <em>e</em> o carrega para ser usado. É possível também carregar pacotes instalados com <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> do R <strong>base</strong>. Vera a pagina em <a href="basics.html#basics">Introdução ao R</a> para mais informação sobre os pacotes de R.</p>
<!-- revisar [R basics] -->
<div class="sourceCode" id="cb1761"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">rmarkdown</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="começando-um-novo-arquivo-rmd" class="section level3 unnumbered">
<h3>Começando um novo arquivo Rmd<a class="anchor" aria-label="anchor" href="#come%C3%A7ando-um-novo-arquivo-rmd"><i class="fas fa-link"></i></a>
</h3>
<p>No Rstudio, abra um novo arquivo R markdown, começando em ‘Arquivo’, depois ‘Novo arquivo’, depois em ‘R markdown…’.</p>
<div class="inline-figure"><img src="images/markdown/1_gettingstarted.png" width="50%" style="display: block; margin: auto;"></div>
<p>Rstudio lhe dará opções de output para selecionar. No exemplo abaixo, escolhemos “HTML” porque queremos criar um documento html. O título e o nome do autor não são importantes. Se o tipo do documento de saída desejado não é nenhum desses, não se preocupe - é possível escolher qualquer um e alterar posteriormente.</p>
<div class="inline-figure"><img src="images/markdown/1_gettingstartedB.png" width="50%" style="display: block; margin: auto;"></div>
<p>Isso abrirá um novo script .Rmd.</p>
</div>
<div id="importante-saber" class="section level3 unnumbered">
<h3>Importante saber<a class="anchor" aria-label="anchor" href="#importante-saber"><i class="fas fa-link"></i></a>
</h3>
<p><strong>O diretório de trabalho</strong></p>
<p>O diretório de trabalho de um arquivo markdown é o local onde o próprio arquivo Rmd é salvo. Por exemplo, se o projeto R estiver dentro de <code>~/Documents/projectX</code> e o próprio arquivo Rmd estiver em uma subpasta<code>~/Documents/projectX/markdownfiles/markdown.Rmd</code>, o código <code>read.csv("data.csv")</code> Dentro do markdown irá procurar por um arquivo csv na pasta <code>markdownfiles</code>, e não na pasta raiz do projeto onde os scripts dentro dos projetos normalmente procurariam automaticamente.</p>
<p>Para se referir a arquivos em outro lugar, você precisará usar o caminho completo do arquivo ou usar o pacote <strong>here</strong>. O pacote <strong>here</strong> define o diretório de trabalho para a pasta raiz do projeto R e é explicado em detalhes nas páginas <a href="r-projects.html#r-projects">Projetos R</a> e <a href="importing.html#importing">Importar e exportar</a>)(#importing) deste manual. Por exemplo, para importar um arquivo chamado “data.csv” de dentro da pasta <code>projectX</code>, o código seria <code>import(here(“data.csv”))</code>.</p>
<p>Observe que o uso de <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> em scripts R Markdown não é recomendado - ele se aplica apenas ao trecho de código em que está escrito.</p>
<p><strong>Trabalhando em uma unidade vs no seu computador</strong></p>
<p>Como o R Markdown pode ter problemas de pandoc ao ser executado em uma unidade de rede compartilhada, é recomendado que sua pasta esteja em sua máquina local, por exemplo, em um projeto em ‘Meus Documentos’. Se você usa Git (muito recomendado!), Isso será familiar. Para obter mais detalhes, consulte as páginas do manual em <a href="network-drives.html#network-drives">R em unidades de rede</a> e <a href="errors.html#errors">Erros</a> e <a href="help.html#help">ajuda</a>.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="componentes-do-r-markdown" class="section level2" number="40.3">
<h2>
<span class="header-section-number">40.3</span> Componentes do R Markdown<a class="anchor" aria-label="anchor" href="#componentes-do-r-markdown"><i class="fas fa-link"></i></a>
</h2>
<p>Um documento R Markdown pode ser editado no RStudio da mesma forma que um script R padrão. Quando você inicia um novo script R Markdown, o RStudio tenta ser útil mostrando um modelo que explica as diferentes seções de um script R Markdown.</p>
<p>A seguir está o que aparece ao iniciar um novo script Rmd destinado a produzir uma saída html (conforme a seção anterior).</p>
<div class="inline-figure"><img src="images/markdown/2_defaultRMD.png" width="100%" style="display: block; margin: auto;"></div>
<p>Como você pode ver, existem três componentes básicos em um arquivo Rmd: YAML, texto Markdown e blocos de código R.</p>
<p>Eles irão <em>criar e se tornar a saída do seu documento</em>. Veja o diagrama abaixo:</p>
<div class="inline-figure"><img src="images/markdown/rmarkdown_translation.png" width="100%" height="150%" style="display: block; margin: auto;"></div>
<div id="metadados-yaml" class="section level3 unnumbered">
<h3>Metadados YAML<a class="anchor" aria-label="anchor" href="#metadados-yaml"><i class="fas fa-link"></i></a>
</h3>
<p>Referido como ‘metadados YAML’ ou apenas ‘YAML’, isso está no topo do documento R Markdown. Esta seção do script dirá ao seu arquivo Rmd que tipo de saída produzir, preferências de formatação e outros metadados, como título do documento, autor e data. Existem outros usos não mencionados aqui (mas mencionados em ‘Produção de uma saída’). Observe que o recuo é importante; tabulações não são aceitas, mas espaços, sim.</p>
<p>Esta seção deve começar com uma linha contendo apenas três traços <code>---</code> e deve fechar com uma linha contendo apenas três traços <code>---</code>. Os parâmetros YAML vêm em pares <code>chave: valor</code>. A colocação dos dois pontos em YAML é importante - os pares <code>chave: valor</code> são separados por dois pontos (e não sinais de igual!).</p>
<p>O YAML deve começar com metadados para o documento. A ordem desses parâmetros YAML primários (não recuados) não importa. Por exemplo:</p>
<div class="sourceCode" id="cb1762"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1762-1"><a href="rmarkdown.html#cb1762-1" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"My document"</span></span>
<span id="cb1762-2"><a href="rmarkdown.html#cb1762-2" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"Me"</span></span>
<span id="cb1762-3"><a href="rmarkdown.html#cb1762-3" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">"2023-10-24"</span></span></code></pre></div>
<p>You can use R code in YAML values by writing it as in-line code (preceded by <code>r</code> within back-ticks) but also within quotes (see above example for <code>date:</code>).</p>
<p>In the image above, because we clicked that our default output would be an html file, we can see that the YAML says <code>output: html_document</code>. However we can also change this to say <code>powerpoint_presentation</code> or <code>word_document</code> or even <code>pdf_document</code>.</p>
<p>Você pode usar o código R em valores YAML escrevendo-o como código in-line (precedido por <code>r</code> dentro de crases), mas também entre aspas (veja o exemplo acima para <code>date:</code>).</p>
<p>Na imagem acima, como clicamos que nossa saída padrão seria um arquivo html, podemos ver que o YAML diz <code>output: html_document</code>. No entanto, também podemos alterar isso para dizer <code>powerpoint_presentation</code>ou<code>word_document</code> ou mesmo <code>pdf_document</code>.</p>
</div>
<div id="texto" class="section level3 numerado" number="40.3.1">
<h3>
<span class="header-section-number">40.3.1</span> Texto<a class="anchor" aria-label="anchor" href="#texto"><i class="fas fa-link"></i></a>
</h3>
<p>Esta é a narrativa do seu documento, incluindo os títulos e cabeçalhos. Ele é escrito na linguagem “markdown”, que é usada em muitos softwares diferentes.</p>
<p>Abaixo estão as principais maneiras de escrever este texto. Consulte a documentação mais extensa disponível na “cheatsheet” do R Markdown no <a href="https://rstudio.com/resources/cheatsheets/">site do RStudio</a>.</p>
<div id="novas-linhas" class="section level4 unnumbered">
<h4>Novas linhas<a class="anchor" aria-label="anchor" href="#novas-linhas"><i class="fas fa-link"></i></a>
</h4>
<p>Exclusivamente no R Markdown, para iniciar uma nova linha, insira <strong>dois espaços</strong> no final da linha anterior e pressione Enter / Return.</p>
</div>
<div id="case" class="section level4 unnumbered">
<h4>Case<a class="anchor" aria-label="anchor" href="#case"><i class="fas fa-link"></i></a>
</h4>
<p>Cerque seu texto normal com esses caracteres para alterar como ele aparece na saída.</p>
<ul>
<li>Sublinhados (<code>_text_</code>) ou asterisco único (<code>*texto*</code>) para <em>itálico</em>
</li>
<li>Asteriscos duplos (<code>**texto**</code>) para <strong>texto em negrito</strong>
</li>
<li>Crases (<code>text</code>) para exibir o texto como código</li>
</ul>
<p>A aparência real da fonte pode ser definida usando modelos específicos (especificados nos metadados YAML; consulte as guias de exemplo).</p>
</div>
<div id="cor" class="section level4 numerada" number="40.3.1.1">
<h4>
<span class="header-section-number">40.3.1.1</span> Cor<a class="anchor" aria-label="anchor" href="#cor"><i class="fas fa-link"></i></a>
</h4>
<p>Não existe um mecanismo simples para alterar a cor do texto no R Markdown. Uma solução alternativa, <em>SE sua saída for um arquivo HTML</em>, é adicionar uma linha HTML ao texto markdown. O código HTML abaixo imprimirá uma linha de texto em vermelho negrito.</p>
<div class="sourceCode" id="cb1763"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb1763-1"><a href="rmarkdown.html#cb1763-1" tabindex="-1"></a><span class="kw">&lt;span</span> <span class="er">style</span><span class="ot">=</span><span class="st">"color: red;"</span><span class="kw">&gt;</span>**_DANGER:_** This is a warning.<span class="kw">&lt;/span&gt;</span>  </span></code></pre></div>
<p>[<strong><em>PERIGO:</em></strong> Este é um aviso.] {style = “color: red;”}</p>
</div>
<div id="títulos-e-cabeçalhos" class="section level4 unnumbered">
<h4>Títulos e cabeçalhos<a class="anchor" aria-label="anchor" href="#t%C3%ADtulos-e-cabe%C3%A7alhos"><i class="fas fa-link"></i></a>
</h4>
<p>Um símbolo hash (#) em uma parte do texto de um script R Markdown cria um título. Isso é diferente de um pedaço de código R no script, no qual um símbolo hash é um mecanismo para comentar / anotar / desativar, como em um script R normal.</p>
<p>Diferentes níveis de título são estabelecidos com diferentes números de símbolos hash no início de uma nova linha. Um símbolo de hash é um título ou cabeçalho principal. Dois símbolos hash são um título de segundo nível. Os cabeçalhos de terceiro e quarto níveis podem ser feitos com mais símbolos hash sucessivamente.</p>
<div class="sourceCode" id="cb1764"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb1764-1"><a href="rmarkdown.html#cb1764-1" tabindex="-1"></a><span class="fu"># First-level heading / title</span></span>
<span id="cb1764-2"><a href="rmarkdown.html#cb1764-2" tabindex="-1"></a></span>
<span id="cb1764-3"><a href="rmarkdown.html#cb1764-3" tabindex="-1"></a><span class="fu">## Second level heading  </span></span>
<span id="cb1764-4"><a href="rmarkdown.html#cb1764-4" tabindex="-1"></a></span>
<span id="cb1764-5"><a href="rmarkdown.html#cb1764-5" tabindex="-1"></a><span class="fu">### Third-level heading</span></span></code></pre></div>
</div>
<div id="marcadores-e-numeração" class="section level4 unnumbered">
<h4>Marcadores e numeração<a class="anchor" aria-label="anchor" href="#marcadores-e-numera%C3%A7%C3%A3o"><i class="fas fa-link"></i></a>
</h4>
<p>Use asteriscos (<code>*</code>) para criar uma lista de marcadores. Conclua a frase anterior, insira dois espaços, Enter/Return <em>duas vezes</em> e, em seguida, inicie seus marcadores. Inclua um espaço entre o asterisco e o texto do marcador. Após cada marcador, insira dois espaços e pressione Enter/Return. Os submarcadores funcionam da mesma maneira, mas são recuados. Os números funcionam da mesma maneira, mas em vez de um asterisco, escreva 1), 2), etc. Abaixo está a aparência do texto do script R Markdown.</p>
<div class="sourceCode" id="cb1765"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb1765-1"><a href="rmarkdown.html#cb1765-1" tabindex="-1"></a>Here are my bullets (there are two spaces after this colon):  </span>
<span id="cb1765-2"><a href="rmarkdown.html#cb1765-2" tabindex="-1"></a></span>
<span id="cb1765-3"><a href="rmarkdown.html#cb1765-3" tabindex="-1"></a><span class="ss">* </span>Bullet 1 (followed by two spaces and Enter/Return)  </span>
<span id="cb1765-4"><a href="rmarkdown.html#cb1765-4" tabindex="-1"></a><span class="ss">* </span>Bullet 2 (followed by two spaces and Enter/Return)  </span>
<span id="cb1765-5"><a href="rmarkdown.html#cb1765-5" tabindex="-1"></a><span class="ss">  * </span>Sub-bullet 1 (followed by two spaces and Enter/Return)  </span>
<span id="cb1765-6"><a href="rmarkdown.html#cb1765-6" tabindex="-1"></a><span class="ss">  * </span>Sub-bullet 2 (followed by two spaces and Enter/Return)  </span>
<span id="cb1765-7"><a href="rmarkdown.html#cb1765-7" tabindex="-1"></a>  </span></code></pre></div>
</div>
<div id="comente-o-texto" class="section level4 unnumbered">
<h4>Comente o texto<a class="anchor" aria-label="anchor" href="#comente-o-texto"><i class="fas fa-link"></i></a>
</h4>
<p>Você pode “comentar” o texto do R Markdown da mesma forma que pode usar o “#” para comentar uma linha do código R em um bloco R. Basta destacar o texto e pressionar Ctrl+Shift+c (Cmd+Shift+c para Mac). O texto será circundado por setas e ficará verde. Ele não aparecerá na sua saída.</p>
<div class="inline-figure"><img src="images/markdown/rmarkdown_hide_text.png" width="100%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="blocos-de-código" class="section level3 unnumbered">
<h3>Blocos de código<a class="anchor" aria-label="anchor" href="#blocos-de-c%C3%B3digo"><i class="fas fa-link"></i></a>
</h3>
<p>As seções do script que são dedicadas à execução do código R são chamadas de “blocos”. É aqui que você pode carregar pacotes, importar dados e realizar o gerenciamento e visualização de dados reais. Pode haver muitos blocos de código, então eles podem ajudá-lo a organizar seu código R em partes, talvez intercaladas com texto. Note: Esses ‘pedaços’ parecerão ter uma cor de fundo ligeiramente diferente da parte narrativa do documento.</p>
<p>Cada pedaço é aberto com uma linha que começa com três crases e chaves que contêm parâmetros para o pedaço (<code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code>). O pedaço termina com mais três crases.</p>
<p>Você pode criar um novo bloco digitando-o você mesmo, usando o atalho de teclado “Ctrl+Alt+i” (ou Cmd+Shift+r no Mac) ou clicando no ícone verde ‘inserir um novo bloco de código’ no topo do seu editor de script.</p>
<p>Algumas notas sobre o conteúdo das chaves <code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code>:</p>
<ul>
<li>Eles começam com ‘r’ para indicar que o nome do idioma dentro do bloco é R</li>
<li>Após o r, você pode opcionalmente escrever um “nome” de trecho – eles não são necessários, mas podem ajudá-lo a organizar seu trabalho. Observe que se você nomear seus blocos, você deve SEMPRE usar nomes exclusivos ou então R reclamará quando você tentar renderizar.<br>
</li>
<li>As chaves também podem incluir outras opções, escritas como <code>tag = value</code>, como:<br>
</li>
<li>
<code>eval = FALSE</code> para não executar o código R<br>
</li>
<li>
<code>echo = FALSE</code> para não imprimir o código-fonte R do trecho no documento de saída<br>
</li>
<li>
<code>aviso = FALSO</code> para não imprimir avisos produzidos pelo código R<br>
</li>
<li>
<code>mensagem = FALSO</code> para não imprimir nenhuma mensagem produzida pelo código R<br>
</li>
<li>
<code>incluir =</code> VERDADEIRO / FALSO se incluir saídas em partes (por exemplo, gráficos) no documento</li>
<li>
<code>out.width =</code> e <code>out.height =</code> - fornecer no estilo <code>out.width ="75%"</code><br>
</li>
<li>
<code>fig.align = "center"</code> ajustar como uma figura é alinhada na página<br>
</li>
<li>
<code>fig.show = 'hold'</code> se o seu pedaço imprimir várias figuras e você quiser que elas sejam impressas lado a lado (par com <code>out.width = c("33%", "67%")</code>. Também pode ser definido como <code>fig.show = 'asis'</code> para mostrá-los abaixo do código que os gera,<code>'hide'</code> para ocultar ou <code>'animate'</code> para concatenar múltiplos em uma animação.<br>
</li>
<li>Um cabeçalho de bloco deve ser escrito em <em>uma linha</em><br>
</li>
<li>Tente evitar pontos, sublinhados e espaços. Use hifens ( - ) se precisar de um separador.</li>
</ul>
<p>Leia mais extensivamente sobre as opções do <strong>knitr</strong> <a href="https://yihui.org/knitr/options/">aqui</a>.</p>
<p>Algumas das opções acima podem ser configuradas com apontar e clicar usando os botões de configuração no canto superior direito do bloco. Aqui, você pode especificar quais partes do pedaço você deseja que o documento renderizado inclua, a saber, o código, as saídas e os avisos. Isso sairá como preferências escritas dentro das chaves, por exemplo, <code>echo = FALSE</code> se você especificar que deseja ‘Mostrar apenas a saída’.</p>
<div class="inline-figure"><img src="images/markdown/3_chunk.png" width="80%" style="display: block; margin: auto;"></div>
<p>Também há duas setas no canto superior direito de cada fragmento, que são úteis para executar o código dentro de um fragmento ou todo o código em blocos anteriores. Passe o mouse sobre eles para ver o que fazem.</p>
<p>Para que as opções globais sejam aplicadas a todos os fragmentos do script, você pode configurar isso em seu primeiro bloco de código R no script. Por exemplo, para que apenas as saídas sejam mostradas para cada bloco de código e não o código em si, você pode incluir este comando no fragmento de código R:</p>
<div class="sourceCode" id="cb1766"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>echo <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code></pre></div>
<div id="código-r-no-texto" class="section level4 unnumbered">
<h4>Código R no texto<a class="anchor" aria-label="anchor" href="#c%C3%B3digo-r-no-texto"><i class="fas fa-link"></i></a>
</h4>
<p>Você também pode incluir código R mínimo dentro de crases. Dentro dos crases, comece o código com “r” e um espaço, para que o RStudio saiba avaliar o código como código R. Veja o exemplo abaixo.</p>
<p>O exemplo abaixo mostra vários níveis de título, marcadores e usa o código R para a data atual (<code><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date ()</a></code>) para avaliar em uma data impressa.</p>
<div class="inline-figure"><img src="images/markdown/2_text.png" width="80%" style="display: block; margin: auto;"></div>
<p>O exemplo acima é simples (mostrando a data atual), mas usando a mesma sintaxe, você pode exibir valores produzidos por códigos R mais complexos (por exemplo, para calcular o mínimo, a mediana, o máximo de uma coluna). Você também pode integrar objetos R ou valores que foram criados em blocos de código R anteriormente no script.</p>
<p>Como exemplo, o script abaixo calcula a proporção de casos com menos de 18 anos, usando as funções <strong>tidyverse</strong>, e cria os objetos <code>less18</code>,<code>total</code> e <code>less18prop</code>. Este valor dinâmico é inserido no texto subsequente. Vemos como fica quando imprimimos um documento do Word.</p>
<div class="inline-figure"><img src="images/markdown/3_chunktext.png" width="100%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="imagens" class="section level3 numeradas" number="40.3.2">
<h3>
<span class="header-section-number">40.3.2</span> Imagens<a class="anchor" aria-label="anchor" href="#imagens"><i class="fas fa-link"></i></a>
</h3>
<p>Você pode incluir imagens em seu R Markdown de duas maneiras:</p>
<div class="sourceCode" id="cb1767"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1767-1"><a href="rmarkdown.html#cb1767-1" tabindex="-1"></a><span class="sc">!</span>[](<span class="st">"path/to/image.png"</span>)  </span></code></pre></div>
<p>Se o acima não funcionar, tente usar <code><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">knitr::include_graphics()</a></code></p>
<div class="sourceCode" id="cb1768"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"path/to/image.png"</span><span class="op">)</span></span></code></pre></div>
<p>(lembre-se, o caminho do seu arquivo pode ser escrito usando o pacote <strong>here</strong>)</p>
<div class="sourceCode" id="cb1769"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"path"</span>, <span class="st">"to"</span>, <span class="st">"image.png"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="tabelas" class="section level3 numeradas" number="40.3.3">
<h3>
<span class="header-section-number">40.3.3</span> Tabelas<a class="anchor" aria-label="anchor" href="#tabelas"><i class="fas fa-link"></i></a>
</h3>
<p>Crie uma tabela usando hifens ( - ) e barras ( | ). O número de hifens antes/entre as barras permite o número de espaços na célula antes que o texto comece a quebrar.</p>
<div class="sourceCode" id="cb1770"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb1770-1"><a href="rmarkdown.html#cb1770-1" tabindex="-1"></a>Column 1 |Column  2 |Column 3</span>
<span id="cb1770-2"><a href="rmarkdown.html#cb1770-2" tabindex="-1"></a>---------|----------|--------</span>
<span id="cb1770-3"><a href="rmarkdown.html#cb1770-3" tabindex="-1"></a>Cell A   |Cell B    |Cell C</span>
<span id="cb1770-4"><a href="rmarkdown.html#cb1770-4" tabindex="-1"></a>Cell D   |Cell E    |Cell F</span></code></pre></div>
<p>O código acima produz a tabela abaixo:</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Column 1</th>
<th>Column 2</th>
<th>Column 3</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Cell A</td>
<td>Cell B</td>
<td>Cell C</td>
</tr>
<tr class="even">
<td>Cell D</td>
<td>Cell E</td>
<td>Cell F</td>
</tr>
</tbody>
</table></div>
</div>
<div id="seções-com-guias" class="section level3 numeradas" number="40.3.4">
<h3>
<span class="header-section-number">40.3.4</span> Seções com guias<a class="anchor" aria-label="anchor" href="#se%C3%A7%C3%B5es-com-guias"><i class="fas fa-link"></i></a>
</h3>
<p>Para saídas HTML, você pode organizar as seções em “guias”. Basta adicionar <code>.tabset</code> nas chaves <code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code>que são colocadas * após um título *. Quaisquer subtítulos abaixo desse título (até outro título do mesmo nível) aparecerão como guias nas quais o usuário pode clicar. Leia mais <a href="https://bookdown.org/yihui/rmarkdown-cookbook/html-tabs.html">aqui</a></p>
<p><img src="images/markdown/tabbed_script.png" width="100%" style="display: block; margin: auto;"><img src="images/markdown/tabbed_view.gif" width="100%" style="display: block; margin: auto;"></p>
<p>Você pode adicionar uma opção adicional <code>.tabset-pills</code> após <code>.tabset</code> para dar às próprias guias uma aparência de pastilha. Esteja ciente de que, ao visualizar a saída HTML com guias, a funcionalidade de pesquisa Ctrl+f pesquisará apenas guias “ativas”, não guias ocultas.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="estrutura-do-arquivo" class="section level2" number="40.4">
<h2>
<span class="header-section-number">40.4</span> Estrutura do arquivo<a class="anchor" aria-label="anchor" href="#estrutura-do-arquivo"><i class="fas fa-link"></i></a>
</h2>
<p>Existem várias maneiras de estruturar seu R Markdown e quaisquer scripts R associados. Cada um tem vantagens e desvantagens:</p>
<ul>
<li>R Markdown independente - tudo o que é necessário para o relatório é importado ou criado dentro do R Markdown</li>
<li>Fonte de outros arquivos - Você pode executar scripts R externos com o comando <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> e usar suas saídas no Rmd</li>
<li>Scripts filhos - um mecanismo alternativo para <code><a href="https://rdrr.io/r/base/source.html">source()</a></code>
</li>
<li>Utilizar um “runfile” - Executar comandos em um script R <em>antes</em> de renderizar o R Markdown</li>
</ul>
<div id="rmd-independente-.não-numerado" class="section level3" number="40.4.1">
<h3>
<span class="header-section-number">40.4.1</span> Rmd independente {.não numerado}<a class="anchor" aria-label="anchor" href="#rmd-independente-.n%C3%A3o-numerado"><i class="fas fa-link"></i></a>
</h3>
<p>Para um relatório relativamente simples, você pode optar por organizar seu script R Markdown de forma que seja “independente” e não envolva nenhum script externo.</p>
<p>Tudo que você precisa para executar o markdown R é importado ou criado dentro do arquivo Rmd, incluindo todos os pedaços de código e carregamento de pacote. Esta abordagem “independente” é apropriada quando você não precisa fazer muito processamento de dados (por exemplo, traz um arquivo de dados limpo ou semilimpeza) e a renderização do R Markdown não demora muito.</p>
<p>Neste cenário, uma organização lógica do script R Markdown pode ser:</p>
<ol style="list-style-type: decimal">
<li>Defina as opções globais do <strong>knitr</strong>
</li>
<li>Carregar pacotes</li>
<li>Importar dados</li>
<li>Dados do processo</li>
<li>Produza resultados (tabelas, gráficos, etc.)</li>
<li>Salve as saídas, se aplicável (.csv, .png, etc.)</li>
</ol>
<div id="fonte-de-outros-arquivos" class="section level4 unnumbered">
<h4>Fonte de outros arquivos<a class="anchor" aria-label="anchor" href="#fonte-de-outros-arquivos"><i class="fas fa-link"></i></a>
</h4>
<p>Uma variação da abordagem “independente” é fazer com que os pedaços de código do R Markdown “originem” (executem) outros scripts R. Isso pode tornar seu script R Markdown menos confuso, mais simples e mais fácil de organizar. Também pode ajudar se você deseja exibir os valores finais no início do relatório. Nesta abordagem, o script final R Markdown simplesmente combina saídas pré-processadas em um documento.</p>
<p>Uma maneira de fazer isso é fornecendo os scripts R (caminho e nome do arquivo com extensão) para o comando R <strong>base</strong> <code><a href="https://rdrr.io/r/base/source.html">source()</a></code>.</p>
<div class="sourceCode" id="cb1771"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"your-script.R"</span>, local <span class="op">=</span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/knit_global.html">knit_global</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># or sys.source("your-script.R", envir = knitr::knit_global())</span></span></code></pre></div>
<p>Observe que ao usar <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> <em>dentro</em> do R Markdown, os arquivos externos ainda serão executados <em>durante o curso de renderização de seu arquivo Rmd</em>. Portanto, cada script é executado sempre que você renderiza o relatório. Portanto, ter esses comandos <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> <em>dentro</em> do R Markdown não acelera seu tempo de execução, nem ajuda muito na eliminação de bugs, pois o erro produzido ainda será impresso ao produzir o R Markdown.</p>
<p>Uma alternativa é utilizar a opção <code>child =</code> <strong>knitr</strong>. EXPLIQUE MAIS A FAZER</p>
<p>Você deve estar ciente dos vários <em>ambientes</em> R. Os objetos criados dentro de um ambiente não estarão necessariamente disponíveis para o ambiente usado pelo R Markdown.</p>
</div>
</div>
<div id="runfile" class="section level3 unnumbered">
<h3>Runfile<a class="anchor" aria-label="anchor" href="#runfile"><i class="fas fa-link"></i></a>
</h3>
<p>Esta abordagem envolve a utilização do script R que contém o (s) comando (s) <code>render()</code> para pré-processar objetos que alimentam o markdown R.</p>
<p>Por exemplo, você pode carregar os pacotes, carregar e limpar os dados e até mesmo criar os gráficos de interesse antes de <code>render()</code>. Essas etapas podem ocorrer no script R ou em outros scripts originados via source. Contanto que esses comandos ocorram na mesma sessão RStudio e os objetos sejam salvos no ambiente, os objetos podem ser chamados dentro do conteúdo Rmd. Em seguida, o próprio markdown R será usado apenas para a etapa final - para produzir a saída com todos os objetos pré-processados. Isso é muito mais fácil de corrigir se algo der errado.</p>
<p>Essa abordagem é útil pelos seguintes motivos:</p>
<ul>
<li>Mensagens de erro mais informativas - essas mensagens serão geradas a partir do script R, não do R Markdown. R Erros de Markdown tendem a dizer qual pedaço teve um problema, mas não revelam qual linha.</li>
<li>Se aplicável, você pode executar longas etapas de processamento antes do comando <code>render()</code> - elas serão executadas apenas uma vez.</li>
</ul>
<p>No exemplo abaixo, temos um script R separado no qual pré-processamos um objeto <code>data</code> no ambiente R e então renderizamos o “create_output.Rmd” usando <code>render()</code>.</p>
<div class="sourceCode" id="cb1772"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"datafile.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>       <span class="co"># Load data and save to environment</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">hospital</span>, <span class="va">weight</span><span class="op">)</span>          <span class="co"># Select limited columns</span></span>
<span></span>
<span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">render</a></span><span class="op">(</span>input <span class="op">=</span> <span class="st">"create_output.Rmd"</span><span class="op">)</span>   <span class="co"># Create Rmd file</span></span></code></pre></div>
</div>
<div id="estrutura-da-pasta" class="section level3 numerada" number="40.4.2">
<h3>
<span class="header-section-number">40.4.2</span> Estrutura da pasta<a class="anchor" aria-label="anchor" href="#estrutura-da-pasta"><i class="fas fa-link"></i></a>
</h3>
<p>O fluxo de trabalho também diz respeito à estrutura geral da pasta, como ter uma pasta de ‘saída’ para documentos e figuras criados e pastas de ‘dados’ ou ‘entradas’ para dados limpos. Não entramos em maiores detalhes aqui, mas verifique a página <a href="reportfactory.html#reportfactory">Organizando relatórios de rotina</a>.</p>
</div>
</div>
<div id="produzindo-o-documento" class="section level2" number="40.5">
<h2>
<span class="header-section-number">40.5</span> Produzindo o documento<a class="anchor" aria-label="anchor" href="#produzindo-o-documento"><i class="fas fa-link"></i></a>
</h2>
<p>Você pode produzir o documento das seguintes maneiras:</p>
<ul>
<li>Manualmente pressionando o botão “Knit” na parte superior do editor de script RStudio (rápido e fácil)<br>
</li>
<li>Execute o comando <code>render()</code> (executado fora do script R Markdown)</li>
</ul>
<div id="opção-1-botão-knit" class="section level3 numerado" number="40.5.1">
<h3>
<span class="header-section-number">40.5.1</span> Opção 1: Botão “Knit”<a class="anchor" aria-label="anchor" href="#op%C3%A7%C3%A3o-1-bot%C3%A3o-knit"><i class="fas fa-link"></i></a>
</h3>
<p>Quando você tiver o arquivo Rmd aberto, pressione o ícone / botão ‘Knit’ na parte superior do arquivo.</p>
<p>R Studio mostrará o progresso em uma guia ‘R Markdown’ perto do console R. O documento será aberto automaticamente quando concluído.</p>
<p>O documento será salvo na mesma pasta que seu script markdown R e com o mesmo nome de arquivo (exceto a extensão). Obviamente, isso não é ideal para o controle de versão (será sobrescrito a cada vez que você exportar, a menos que movido manualmente), pois você pode precisar renomear o arquivo (por exemplo, adicionar uma data).</p>
<p>Este é o botão de atalho do RStudio para a função <code>render()</code> de <strong>rmarkdown</strong>. Essa abordagem é compatível apenas com um R markdown autocontido, onde todos os componentes necessários existem ou são originados no arquivo.</p>
<div class="inline-figure"><img src="images/markdown/4_progress.png" width="90%" style="display: block; margin: auto;"></div>
</div>
<div id="opção-2-comando-render" class="section level3 unnumbered">
<h3>Opção 2: comando <code>render()</code><a class="anchor" aria-label="anchor" href="#op%C3%A7%C3%A3o-2-comando-render"><i class="fas fa-link"></i></a>
</h3>
<p>Outra maneira de produzir a saída do R Markdown é rodar a função <code>render()</code> (do pacote <strong>rmarkdown</strong>). Você deve executar este comando <em>fora</em> do script R Markdown - ou em um script R separado (geralmente chamado de “arquivo de execução”) ou como um comando independente no R Console.</p>
<div class="sourceCode" id="cb1773"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">render</a></span><span class="op">(</span>input <span class="op">=</span> <span class="st">"my_report.Rmd"</span><span class="op">)</span></span></code></pre></div>
<p>Tal como acontece com “knit”, as configurações padrão salvarão a saída Rmd na mesma pasta do script Rmd, com o mesmo nome de arquivo (além da extensão do arquivo). Por exemplo, “my_report.Rmd” quando exportado criará “my_report.docx” se você estiver exportando para um documento do Word. No entanto, usando <code>render()</code> você tem a opção de usar configurações diferentes. <code>render()</code> pode aceitar argumentos, incluindo:</p>
<ul>
<li>
<code>output_format =</code> Este é o formato de saída para converter (por exemplo, <code>"html_document"</code>, <code>"pdf_document"</code>, <code>"word_document"</code> ou <code>"all"</code>). Você também pode especificar isso no YAML dentro do script R Markdown.<br>
</li>
<li>
<code>output_file =</code> Este é o nome do arquivo de saída (e caminho do arquivo). Isso pode ser criado por meio de funções R como <code><a href="https://here.r-lib.org//reference/here.html">here()</a></code> ou <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> conforme demonstrado abaixo.<br>
</li>
<li>
<code>output_dir =</code> Este é um diretório de saída (pasta) para salvar o arquivo. Isso permite que você escolha uma alternativa diferente do diretório em que o arquivo Rmd é salvo.<br>
</li>
<li>
<code>output_options =</code> Você pode fornecer uma lista de opções que irão sobrescrever aquelas no script YAML (por exemplo)</li>
<li>
<code>output_yaml =</code> Você pode fornecer o caminho para um arquivo .yml que contém especificações YAML<br>
</li>
<li>
<code>params =</code> Veja a seção sobre parâmetros abaixo<br>
</li>
<li>Veja a lista completa <a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">aqui</a>
</li>
</ul>
<p>Como um exemplo, para melhorar o controle de versão, o comando a seguir salvará o arquivo de saída dentro de uma subpasta ‘outputs’, com a data atual no nome do arquivo. Para criar o nome do arquivo, a função <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> do pacote <strong>stringr</strong> é usada para ‘colar’ strings estáticas (escritas de forma simples) com código R dinâmico (escrito entre colchetes). Por exemplo, se for 10 de abril de 2021, o nome do arquivo abaixo será “Report_2021-04-10.docx”. Veja a página em <a href="characters-strings.html#characters-strings">Caracteres e strings</a> para mais detalhes sobre <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code>.</p>
<div class="sourceCode" id="cb1774"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">render</a></span><span class="op">(</span></span>
<span>  input <span class="op">=</span> <span class="st">"create_output.Rmd"</span>,</span>
<span>  output_file <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"outputs/Report_{Sys.Date()}.docx"</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>À medida que o arquivo é renderizado, o console do RStudio mostrará o andamento da renderização em até 100% e uma mensagem final para indicar que a renderização foi concluída.</p>
</div>
<div id="opções-3-pacote-reportfactory" class="section level3 unnumbered">
<h3>Opções 3: pacote <strong>reportfactory</strong><a class="anchor" aria-label="anchor" href="#op%C3%A7%C3%B5es-3-pacote-reportfactory"><i class="fas fa-link"></i></a>
</h3>
<p>O pacote R <strong>reportfactory</strong> oferece um método alternativo de organização e compilação de relatórios R Markdown <em>voltados para cenários onde você executa relatórios rotineiramente (por exemplo, diariamente, semanalmente …).</em> Facilita a compilação de vários arquivos R Markdown e o organização de seus resultados. Em essência, ele fornece uma “fábrica” a partir da qual você pode executar os relatórios R Markdown, obter pastas com carimbo de data e hora automaticamente para as saídas e ter controle de versão “leve”.</p>
<p>Leia mais sobre esse fluxo de trabalho na página <a href="reportfactory.html#reportfactory">Organização de relatórios de rotina</a>.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="relatórios-parametrizados" class="section level2" number="40.6">
<h2>
<span class="header-section-number">40.6</span> Relatórios parametrizados<a class="anchor" aria-label="anchor" href="#relat%C3%B3rios-parametrizados"><i class="fas fa-link"></i></a>
</h2>
<p>Você pode usar a parametrização para tornar um relatório dinâmico, de modo que possa ser executado com uma configuração específica (por exemplo, uma data ou local específico ou com certas opções de knit). Abaixo, nos concentramos no básico, mas há mais <a href="https://bookdown.org/yihui/rmarkdown/parameterized-reports.html">detalhes online</a> sobre relatórios parametrizados.</p>
<p>Usando a lista de linha do Ebola como exemplo, digamos que queremos executar um relatório de vigilância padrão para cada hospital a cada dia. Mostramos como fazer isso usando parâmetros.</p>
<p><em>Importante: relatórios dinâmicos também são possíveis sem a estrutura formal de parâmetros (sem <code>params:</code>), usando objetos R simples em um script R adjacente. Isso é explicado no final desta seção.</em></p>
<div id="configurando-parâmetros" class="section level3 unnumbered">
<h3>Configurando parâmetros<a class="anchor" aria-label="anchor" href="#configurando-par%C3%A2metros"><i class="fas fa-link"></i></a>
</h3>
<p>Você tem várias opções para especificar valores de parâmetro para sua saída R Markdown.</p>
<div id="opção-1-defina-os-parâmetros-em-yaml" class="section level4 unnumbered">
<h4>Opção 1: Defina os parâmetros em YAML<a class="anchor" aria-label="anchor" href="#op%C3%A7%C3%A3o-1-defina-os-par%C3%A2metros-em-yaml"><i class="fas fa-link"></i></a>
</h4>
<p>Edite o YAML para incluir uma opção <code>params:</code>, com declarações recuadas para cada parâmetro que você deseja definir. Neste exemplo, criamos os parâmetros <code>data</code> e<code>hospital</code>, para os quais especificamos valores. Esses valores estão sujeitos a alterações cada vez que o relatório é executado. Se você usar o botão “Knit” para produzir a saída, os parâmetros terão esses valores padrão. Da mesma forma, se você usar <code>render()</code> os parâmetros terão esses valores padrão, a menos que seja especificado de outra forma no comando <code>render()</code>.</p>
<div class="sourceCode" id="cb1775"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1775-1"><a href="rmarkdown.html#cb1775-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1775-2"><a href="rmarkdown.html#cb1775-2" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Surveillance report</span></span>
<span id="cb1775-3"><a href="rmarkdown.html#cb1775-3" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_document</span></span>
<span id="cb1775-4"><a href="rmarkdown.html#cb1775-4" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb1775-5"><a href="rmarkdown.html#cb1775-5" tabindex="-1"></a><span class="at"> </span><span class="fu">date</span><span class="kw">:</span><span class="at"> 2021-04-10</span></span>
<span id="cb1775-6"><a href="rmarkdown.html#cb1775-6" tabindex="-1"></a><span class="at"> </span><span class="fu">hospital</span><span class="kw">:</span><span class="at"> Central Hospital</span></span>
<span id="cb1775-7"><a href="rmarkdown.html#cb1775-7" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>Em segundo plano, esses valores de parâmetro estão contidos em uma lista somente leitura chamada <code>params</code>. Assim, você pode inserir os valores dos parâmetros no código R da mesma forma que faria com outro objeto / valor R em seu ambiente. Simplesmente digite <code>params$</code> seguido do nome do parâmetro. Por exemplo, <code>params$hospital</code> para representar o nome do hospital (“Hospital Central” por padrão).</p>
<p>Observe que os parâmetros também podem conter valores <code>true</code> ou <code>false</code> e, portanto, podem ser incluídos nas opções do <strong>knitr</strong> para um bloco R. Por exemplo, você pode definir <code>{r, eval = params$run}</code> em vez de <code>{r, eval = FALSE}</code>, e agora se o trecho é executado ou não depende do valor de um parâmetro <code>run:</code>.</p>
<p>Observe que para os parâmetros que são datas, eles serão inseridos como uma string. Portanto, para que <code>params$date</code> seja interpretado no código R, ele provavelmente precisará ser empacotado com <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> ou uma função semelhante para converter para a classe Date.</p>
</div>
<div id="opção-2-defina-os-parâmetros-em-render" class="section level4 unnumbered">
<h4>Opção 2: Defina os parâmetros em <code>render()</code><a class="anchor" aria-label="anchor" href="#op%C3%A7%C3%A3o-2-defina-os-par%C3%A2metros-em-render"><i class="fas fa-link"></i></a>
</h4>
<p>Como mencionado acima, uma alternativa para pressionar o botão “Knit” para produzir a saída é executar a função <code>render()</code> a partir de um script separado. Neste último caso, você pode especificar os parâmetros a serem usados naquela renderização para o argumento <code>params =</code> de <code>render()</code>.</p>
<p>Observe que quaisquer valores de parâmetro fornecidos aqui irão <em>sobrescrever</em> seus valores padrão se escritos dentro do YAML. Escrevemos os valores entre aspas, pois neste caso eles devem ser definidos como valores de caractere / string.</p>
<p>O comando abaixo renderiza “monitoramento_report.Rmd”, especifica um nome de arquivo de saída dinâmica e pasta, e fornece uma <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> de dois parâmetros e seus valores para o argumento <code>params =</code>.</p>
<div class="sourceCode" id="cb1776"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">render</a></span><span class="op">(</span></span>
<span>  input <span class="op">=</span> <span class="st">"surveillance_report.Rmd"</span>,  </span>
<span>  output_file <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"outputs/Report_{Sys.Date()}.docx"</span><span class="op">)</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>date <span class="op">=</span> <span class="st">"2021-04-10"</span>, hospital  <span class="op">=</span> <span class="st">"Central Hospital"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="opção-3-defina-os-parâmetros-usando-uma-interface-gráfica-do-usuário" class="section level4 unnumbered">
<h4>Opção 3: Defina os parâmetros usando uma interface gráfica do usuário<a class="anchor" aria-label="anchor" href="#op%C3%A7%C3%A3o-3-defina-os-par%C3%A2metros-usando-uma-interface-gr%C3%A1fica-do-usu%C3%A1rio"><i class="fas fa-link"></i></a>
</h4>
<p>Para uma sensação mais interativa, você também pode usar a Interface Gráfica do Usuário (GUI) para selecionar manualmente os valores dos parâmetros. Para fazer isso, podemos clicar no menu suspenso ao lado do botão ‘Knit’ e escolher ‘Knit com parâmetros’.</p>
<p>Um pop-up aparecerá permitindo que você digite valores para os parâmetros que são estabelecidos no YAML do documento.</p>
<div class="inline-figure"><img src="images/markdown/5_parametersGUI.png" width="50%" style="display: block; margin: auto;"></div>
<p>Você pode conseguir o mesmo por meio de um comando <code>render()</code> especificando <code>params = "ask "</code>, como demonstrado abaixo.</p>
<div class="sourceCode" id="cb1777"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1777-1"><a href="rmarkdown.html#cb1777-1" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(</span>
<span id="cb1777-2"><a href="rmarkdown.html#cb1777-2" tabindex="-1"></a>  <span class="at">input =</span> <span class="st">"surveillance_report.Rmd"</span>,  </span>
<span id="cb1777-3"><a href="rmarkdown.html#cb1777-3" tabindex="-1"></a>  <span class="at">output_file =</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"outputs/Report_{Sys.Date()}.docx"</span>),</span>
<span id="cb1777-4"><a href="rmarkdown.html#cb1777-4" tabindex="-1"></a>  <span class="at">params =</span> “ask”)</span></code></pre></div>
<p>No entanto, digitar valores nesta janela pop-up está sujeito a erros e erros ortográficos. Você pode preferir adicionar restrições aos valores que podem ser inseridos nos menus suspensos. Você pode fazer isso adicionando no YAML várias especificações para cada entrada <code>params:</code>.</p>
<ul>
<li>
<code>label:</code> é como o título para aquele menu suspenso específico</li>
<li>
<code>value:</code> é o valor padrão (inicial)</li>
<li>
<code>input:</code> definido como <code>select</code> para o menu suspenso</li>
<li>
<code>choices:</code> Dê os valores elegíveis no menu suspenso</li>
</ul>
<p>Abaixo, essas especificações são escritas para o parâmetro <code>hospital</code>.</p>
<div class="sourceCode" id="cb1778"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1778-1"><a href="rmarkdown.html#cb1778-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1778-2"><a href="rmarkdown.html#cb1778-2" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Surveillance report</span></span>
<span id="cb1778-3"><a href="rmarkdown.html#cb1778-3" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_document</span></span>
<span id="cb1778-4"><a href="rmarkdown.html#cb1778-4" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb1778-5"><a href="rmarkdown.html#cb1778-5" tabindex="-1"></a><span class="at"> </span><span class="fu">date</span><span class="kw">:</span><span class="at"> 2021-04-10</span></span>
<span id="cb1778-6"><a href="rmarkdown.html#cb1778-6" tabindex="-1"></a><span class="at"> </span><span class="fu">hospital</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb1778-7"><a href="rmarkdown.html#cb1778-7" tabindex="-1"></a><span class="at">  </span><span class="fu">label</span><span class="kw">:</span><span class="at"> “Town:”</span></span>
<span id="cb1778-8"><a href="rmarkdown.html#cb1778-8" tabindex="-1"></a><span class="at">  </span><span class="fu">value</span><span class="kw">:</span><span class="at"> Central Hospital</span></span>
<span id="cb1778-9"><a href="rmarkdown.html#cb1778-9" tabindex="-1"></a><span class="at">  </span><span class="fu">input</span><span class="kw">:</span><span class="at"> select</span></span>
<span id="cb1778-10"><a href="rmarkdown.html#cb1778-10" tabindex="-1"></a><span class="at">  </span><span class="fu">choices</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">Central Hospital</span><span class="kw">,</span><span class="at"> Military Hospital</span><span class="kw">,</span><span class="at"> Port Hospital</span><span class="kw">,</span><span class="at"> St. Mark</span><span class="st">'s Maternity Hospital (SMMH)]</span></span>
<span id="cb1778-11"><a href="rmarkdown.html#cb1778-11" tabindex="-1"></a><span class="st">---</span></span></code></pre></div>
<p>Ao exportar (através do botão ‘knit com parâmetros’ ou por <code>render()</code>), a janela pop-up terá opções suspensas para selecionar.</p>
<div class="inline-figure"><img src="images/markdown/5_parametersGUIB.png" width="50%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="exemplo-parametrizado" class="section level3 unnumbered">
<h3>Exemplo parametrizado<a class="anchor" aria-label="anchor" href="#exemplo-parametrizado"><i class="fas fa-link"></i></a>
</h3>
<p>O código a seguir cria parâmetros para <code>data</code> e<code>hospital</code>, que são usados no R Markdown como <code>params$date</code> e <code>params$hospital</code>, respectivamente.</p>
<p>Na saída do relatório resultante, veja como os dados são filtrados para o hospital específico e o título do gráfico se refere ao hospital e à data corretos. Usamos o arquivo “linelist_cleaned.rds” aqui, mas seria particularmente apropriado se a própria lista de linha também tivesse um carimbo de data para alinhar com a data parametrizada.</p>
<div class="inline-figure"><img src="images/markdown/6_Rmdexample.png" width="100%" style="display: block; margin: auto;"></div>
<p>Exportar isso produz a saída final com a fonte e o layout padrão.</p>
<div class="inline-figure"><img src="images/markdown/6_RmdexampleB.png" width="80%" style="display: block; margin: auto;"></div>
</div>
<div id="parametrização-sem-params" class="section level3 unnumbered">
<h3>Parametrização sem <code>params</code><a class="anchor" aria-label="anchor" href="#parametriza%C3%A7%C3%A3o-sem-params"><i class="fas fa-link"></i></a>
</h3>
<p>Se você estiver renderizando um arquivo R Markdown com <code>render()</code> de um script separado, você pode criar o impacto da parametrização sem usar a funcionalidade <code>params:</code>.</p>
<p>Por exemplo, no <em>script R</em> que contém o comando <code>render()</code>, você pode simplesmente definir <code>hospital</code> e <code>date</code> como dois objetos R (valores) antes do comando <code>render()</code>. No R Markdown, você não precisaria ter uma seção <code>params:</code> no YAML, e nos referiríamos ao objeto <code>date</code> ao invés de <code>params$date</code> e <code>hospital</code> ao invés de<code>params$hospital</code>.</p>
<div class="sourceCode" id="cb1779"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This is a R script that is separate from the R Markdown</span></span>
<span></span>
<span><span class="co"># define R objects</span></span>
<span><span class="va">hospital</span> <span class="op">&lt;-</span> <span class="st">"Central Hospital"</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="st">"2021-04-10"</span></span>
<span></span>
<span><span class="co"># Render the R markdown</span></span>
<span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">render</a></span><span class="op">(</span>input <span class="op">=</span> <span class="st">"create_output.Rmd"</span><span class="op">)</span> </span></code></pre></div>
<p>Seguir essa abordagem significa que você não pode “tricotar com parâmetros”, usar a GUI ou incluir opções de knit dentro dos parâmetros. No entanto, permite um código mais simples, o que pode ser vantajoso.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="reiterando-relatórios" class="section level2" number="40.7">
<h2>
<span class="header-section-number">40.7</span> Reiterando relatórios<a class="anchor" aria-label="anchor" href="#reiterando-relat%C3%B3rios"><i class="fas fa-link"></i></a>
</h2>
<p>Podemos querer executar um relatório várias vezes, variando os parâmetros de entrada, para produzir um relatório para cada jurisdição / unidade. Isso pode ser feito usando ferramentas para <em>iteração</em>, que são explicadas em detalhes na página <a href="iteration.html#iteration">Iteração, loops e listas</a>. As opções incluem o pacote <strong>purrr</strong> ou o uso de um <em>for loop</em> conforme explicado abaixo.</p>
<p>Abaixo, usamos um simples <em>for loop</em> para gerar um relatório de vigilância para todos os hospitais de interesse. Isso é feito com um comando (em vez de alterar manualmente o parâmetro do hospital um por vez). O comando para renderizar os relatórios deve existir em um script separado <em>fora</em> do relatório Rmd. Este script também conterá objetos definidos para “fazer um loop” - a data de hoje e um vetor de nomes de hospitais para fazer o loop.</p>
<div class="sourceCode" id="cb1780"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hospitals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Central Hospital"</span>,</span>
<span>                <span class="st">"Military Hospital"</span>, </span>
<span>                <span class="st">"Port Hospital"</span>,</span>
<span>                <span class="st">"St. Mark's Maternity Hospital (SMMH)"</span><span class="op">)</span> </span></code></pre></div>
<p>Em seguida, alimentamos esses valores um de cada vez no comando <code>render()</code> usando um loop, que executa o comando uma vez para cada valor no vetor <code>hospitais</code>. A letra <code>i</code> representa a posição do índice (1 a 4) do hospital que está sendo usado nessa iteração, de modo que <code>hospital_list[1]</code> seria “Hospital Central”. Esta informação é fornecida em dois lugares no comando <code>render()</code>:</p>
<ol style="list-style-type: decimal">
<li>Para o nome do arquivo, de forma que o nome do arquivo da primeira iteração, se produzido em 10 de abril de 2021, seria “Report_Central Hospital_2021-04-10.docx”, salvo na subpasta ‘output’ do diretório de trabalho.<br>
</li>
<li>Para <code>params =</code> tal que o Rmd use o nome do hospital internamente sempre que o valor <code>params$hospital</code> é chamado (por exemplo, para filtrar o conjunto de dados para o hospital específico apenas). Neste exemplo, quatro arquivos seriam criados - um para cada hospital.</li>
</ol>
<div class="sourceCode" id="cb1781"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">hospitals</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">render</a></span><span class="op">(</span></span>
<span>    input <span class="op">=</span> <span class="st">"surveillance_report.Rmd"</span>,</span>
<span>    output_file <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"output/Report_{hospitals[i]}_{Sys.Date()}.docx"</span><span class="op">)</span>,</span>
<span>    params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>hospital  <span class="op">=</span> <span class="va">hospitals</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span>       </span></code></pre></div>
<p><!-- No cenário em que você não está usando esta forma estrita de parametrização, mas salvando objetos no ambiente, conforme discutido no final da seção de parametrização, a função de renderização ficaria assim:  --></p>
<!-- ```md -->
<!-- for(i in 1:length(hospital_list)){ -->
<!-- rmarkdown::render("surveillance_report.Rmd", -->
<p>&lt;! - output_file = paste0 (“output / Report_”, hospital_list [i], refdate, “.docx”) -&gt;</p>
<!-- }        -->
<!-- ``` -->
<p>&lt;! - O texto dentro da marcação precisaria então se referir a <code>hospital_list [i]</code> e <code>refdate</code>. -&gt;</p>
<!-- ======================================================= -->
</div>
<div id="modelos" class="section level2" number="40.8">
<h2>
<span class="header-section-number">40.8</span> Modelos<a class="anchor" aria-label="anchor" href="#modelos"><i class="fas fa-link"></i></a>
</h2>
<p>Usando um documento de modelo que contém qualquer formatação desejada, você pode ajustar a estética de como a saída Rmd ficará. Você pode criar, por exemplo, um arquivo MS Word ou PowerPoint que contenha páginas / slides com as dimensões, marcas d’água, planos de fundo e fontes desejados.</p>
<div id="documentos-do-word" class="section level3 numerados" number="40.8.1">
<h3>
<span class="header-section-number">40.8.1</span> Documentos do Word<a class="anchor" aria-label="anchor" href="#documentos-do-word"><i class="fas fa-link"></i></a>
</h3>
<p>Para criar um modelo, inicie um novo documento do Word (ou use uma saída existente com a formatação que mais lhe convier) e edite as fontes definindo os Estilos. Em Estilo, os títulos 1, 2 e 3 referem-se aos vários níveis de cabeçalho de redução (<code># Cabeçalho 1</code>, <code>## Cabeçalho 2</code> e <code>### Cabeçalho 3</code> respectivamente). Clique com o botão direito no estilo e clique em ‘modificar’ para alterar a formatação da fonte, bem como o parágrafo (por exemplo, você pode introduzir quebras de página antes de certos estilos que podem ajudar com o espaçamento). Outros aspectos do documento do Word, como margens, tamanho da página, cabeçalhos, etc., podem ser alterados como um documento do Word normal no qual você está trabalhando diretamente.</p>
<div class="inline-figure"><img src="images/markdown/7_template.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div id="documentos-do-powerpoint" class="section level3 numerados" number="40.8.2">
<h3>
<span class="header-section-number">40.8.2</span> Documentos do PowerPoint<a class="anchor" aria-label="anchor" href="#documentos-do-powerpoint"><i class="fas fa-link"></i></a>
</h3>
<p>Como acima, crie um novo conjunto de slides ou use um arquivo PowerPoint existente com a formatação desejada. Para outras edições, clique em ‘Exibir’ e ‘Slide Master’. A partir daqui, você pode alterar a aparência do slide ‘mestre’ editando a formatação do texto nas caixas de texto, bem como as dimensões do plano de fundo / página para a página geral.</p>
<div class="inline-figure"><img src="images/markdown/8_ppttemplate.PNG" width="100%" style="display: block; margin: auto;"></div>
<p>Infelizmente, editar arquivos PowerPoint é um pouco menos flexível:</p>
<ul>
<li>Um cabeçalho de primeiro nível (<code># Cabeçalho 1</code>) se tornará automaticamente o título de um novo slide,</li>
<li>Um texto de <code>## Header 2</code> não aparecerá como uma legenda, mas como um texto dentro da caixa de texto principal do slide (a menos que você encontre uma maneira de manipular a visualização mestre).</li>
<li>Plotagens e tabelas geradas irão automaticamente para novos slides. Você precisará combiná-los, por exemplo, a função <strong>patchwork</strong> para combinar ggplots, de modo que apareçam na mesma página. Veja esta <a href="https://mattherman.info/blog/ppt-patchwork/">postagem no blog</a> sobre como usar o pacote <strong>patchwork</strong> para colocar várias imagens em um slide.</li>
</ul>
<p>Veja o <a href="https://davidgohel.github.io/officer/">pacote <strong>officer</strong></a> para uma ferramenta para trabalhar mais a fundo com apresentações em PowerPoint.</p>
</div>
<div id="integração-de-modelos-no-yaml" class="section level3 unnumbered">
<h3>Integração de modelos no YAML<a class="anchor" aria-label="anchor" href="#integra%C3%A7%C3%A3o-de-modelos-no-yaml"><i class="fas fa-link"></i></a>
</h3>
<p>Uma vez que um modelo é preparado, o detalhe disso pode ser adicionado no YAML do Rmd abaixo da linha de ‘output’ e abaixo de onde o tipo de documento é especificado (que vai para uma linha separada). Nota <code>reference_doc</code> pode ser usado para modelos de slides do PowerPoint.</p>
<p>É mais fácil salvar o modelo na mesma pasta onde está o arquivo Rmd (como no exemplo abaixo) ou em uma subpasta.</p>
<div class="sourceCode" id="cb1782"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1782-1"><a href="rmarkdown.html#cb1782-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1782-2"><a href="rmarkdown.html#cb1782-2" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Surveillance report</span></span>
<span id="cb1782-3"><a href="rmarkdown.html#cb1782-3" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb1782-4"><a href="rmarkdown.html#cb1782-4" tabindex="-1"></a><span class="at"> </span><span class="fu">word_document</span><span class="kw">:</span></span>
<span id="cb1782-5"><a href="rmarkdown.html#cb1782-5" tabindex="-1"></a><span class="at">  </span><span class="fu">reference_docx</span><span class="kw">:</span><span class="at"> </span><span class="st">"template.docx"</span></span>
<span id="cb1782-6"><a href="rmarkdown.html#cb1782-6" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb1782-7"><a href="rmarkdown.html#cb1782-7" tabindex="-1"></a><span class="at"> </span><span class="fu">date</span><span class="kw">:</span><span class="at"> 2021-04-10</span></span>
<span id="cb1782-8"><a href="rmarkdown.html#cb1782-8" tabindex="-1"></a><span class="at"> </span><span class="fu">hospital</span><span class="kw">:</span><span class="at"> Central Hospital</span></span>
<span id="cb1782-9"><a href="rmarkdown.html#cb1782-9" tabindex="-1"></a><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb1782-10"><a href="rmarkdown.html#cb1782-10" tabindex="-1"></a><span class="at"> </span></span>
<span id="cb1782-11"><a href="rmarkdown.html#cb1782-11" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="formatando-arquivos-html" class="section level3 unnumbered">
<h3>Formatando arquivos HTML<a class="anchor" aria-label="anchor" href="#formatando-arquivos-html"><i class="fas fa-link"></i></a>
</h3>
<p>Os arquivos HTML não usam modelos, mas podem ter os estilos configurados no YAML. HTMLs são documentos interativos e são particularmente flexíveis. Cobrimos algumas opções básicas aqui.</p>
<ul>
<li><p>Índice: Podemos adicionar um índice com <code>toc: true</code> abaixo, e também especificar que ele permanece visível (“floats”) conforme você rola, com <code>toc_float: true</code>.</p></li>
<li><p>Temas: Podemos nos referir a alguns temas pré-fabricados, que vêm de uma biblioteca de temas Bootswatch. No exemplo abaixo, usamos cerulean. Outras opções incluem: diário, plano, escuro, legível, laboratório espacial, unido, cosmo, lúmen, papel, arenito, simplex e yeti. No original, journal, flatly, darkly, readable, spacelab, united, cosmo, lumen, paper, sandstone, simplex, e yeti</p></li>
<li><p>Realçar: Configurar isso muda a aparência do texto destacado (por exemplo, código dentro dos pedaços que são mostrados). Os estilos suportados incluem default, tango, pygments, kate, monochrome, espresso, zenburn, haddock, breezedark, e textmate.</p></li>
</ul>
<p>Aqui está um exemplo de como integrar as opções acima no YAML.</p>
<div class="sourceCode" id="cb1783"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1783-1"><a href="rmarkdown.html#cb1783-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1783-2"><a href="rmarkdown.html#cb1783-2" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"HTML example"</span></span>
<span id="cb1783-3"><a href="rmarkdown.html#cb1783-3" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb1783-4"><a href="rmarkdown.html#cb1783-4" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb1783-5"><a href="rmarkdown.html#cb1783-5" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1783-6"><a href="rmarkdown.html#cb1783-6" tabindex="-1"></a><span class="at">    </span><span class="fu">toc_float</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1783-7"><a href="rmarkdown.html#cb1783-7" tabindex="-1"></a><span class="at">    </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> cerulean</span></span>
<span id="cb1783-8"><a href="rmarkdown.html#cb1783-8" tabindex="-1"></a><span class="at">    </span><span class="fu">highlight</span><span class="kw">:</span><span class="at"> kate</span></span>
<span id="cb1783-9"><a href="rmarkdown.html#cb1783-9" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb1783-10"><a href="rmarkdown.html#cb1783-10" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>Abaixo estão dois exemplos de saídas HTML, ambas com índices flutuantes, mas diferentes temas e estilos de destaque selecionados:</p>
<div class="inline-figure"><img src="images/markdown/9_html.png" width="100%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="conteúdo-dinâmico" class="section level2" number="40.9">
<h2>
<span class="header-section-number">40.9</span> Conteúdo dinâmico<a class="anchor" aria-label="anchor" href="#conte%C3%BAdo-din%C3%A2mico"><i class="fas fa-link"></i></a>
</h2>
<p>Em uma saída HTML, o conteúdo do seu relatório pode ser dinâmico. Abaixo estão alguns exemplos:</p>
<div id="tabelas-1" class="section level3 numeradas" number="40.9.1">
<h3>
<span class="header-section-number">40.9.1</span> Tabelas<a class="anchor" aria-label="anchor" href="#tabelas-1"><i class="fas fa-link"></i></a>
</h3>
<p>Em um relatório HTML, você pode imprimir quadros / tabelas de dados de forma que o conteúdo seja dinâmico, com filtros e barras de rolagem. Existem vários pacotes que oferecem esse recurso.</p>
<p>Para fazer isso com o pacote <strong>DT</strong>, como é usado em todo este manual, você pode inserir um trecho de código como este:</p>
<div class="inline-figure"><img src="images/markdown/10_dynamictable.png" width="100%" style="display: block; margin: auto;"></div>
<p>A função <code>datatable()</code> imprimirá o quadro de dados fornecido como uma tabela dinâmica para o leitor. Você pode definir <code>rownames = FALSE</code> para simplificar o lado esquerdo da tabela. <code>filter = "top"</code> fornece um filtro para cada coluna. No argumento <code>option()</code> forneça uma lista de outras especificações. Abaixo, incluímos dois: <code>pageLength = 5</code> define o número de linhas que aparecem como 5 (as linhas restantes podem ser visualizadas através das setas), e <code>scrollX = TRUE</code> habilita uma barra de rolagem na parte inferior da tabela (para colunas que se estendem muito para a direita).</p>
<p>Se seu conjunto de dados for muito grande, considere mostrar apenas as primeiras X linhas envolvendo o quadro de dados em <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>.</p>
</div>
<div id="widgets-html" class="section level3 unnumbered">
<h3>Widgets HTML<a class="anchor" aria-label="anchor" href="#widgets-html"><i class="fas fa-link"></i></a>
</h3>
<p>[HTML widgets for R] (<a href="http://www.htmlwidgets.org/" class="uri">http://www.htmlwidgets.org/</a>) são uma classe especial de pacotes R que permitem maior interatividade utilizando bibliotecas JavaScript. Você pode embuti-los nas saídas HTML R Markdown.</p>
<p>Alguns exemplos comuns desses widgets incluem:</p>
<ul>
<li>Plotly (usado nesta página do manual e na página <a href="interactive-plots.html#interactive-plots">Gráficos interativos</a>)</li>
<li>visNetwork (usado na página <a href="transmission-chains.html#transmission-chains">Cadeias de transmissão</a> deste manual)</li>
<li>Folheto (usado na página <a href="gis.html#gis">Noções básicas de GIS</a> deste manual)</li>
<li>dygraphs (úteis para mostrar dados de séries temporais de forma interativa)</li>
<li>DT (<code>datatable()</code>) (usado para mostrar tabelas dinâmicas com filtro, classificação, etc.)</li>
</ul>
<p>A função <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code> de <strong>plotly</strong> é particularmente fácil de usar. Veja a página <a href="interactive-plots.html#interactive-plots">Gráficos interativos</a>.</p>
</div>
</div>
<div id="recursos-24" class="section level2" number="40.10">
<h2>
<span class="header-section-number">40.10</span> Recursos<a class="anchor" aria-label="anchor" href="#recursos-24"><i class="fas fa-link"></i></a>
</h2>
<p>Mais informações podem ser encontradas em:</p>
<ul>
<li><a href="https://bookdown.org/yihui/rmarkdown/" class="uri">https://bookdown.org/yihui/rmarkdown/</a></li>
<li><a href="https://rmarkdown.rstudio.com/articles_intro.html" class="uri">https://rmarkdown.rstudio.com/articles_intro.html</a></li>
</ul>
<p>Uma boa explicação de markdown vs knitr vs Rmarkdown está aqui: <a href="https://stackoverflow.com/questions/40563479/relationship-between-r-markdown-knitr-pandoc-and-bookdown" class="uri">https://stackoverflow.com/questions/40563479/relationship-between-r-markdown-knitr-pandoc-and-bookdown</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="interactive-plots.html"><span class="header-section-number">39</span> Gráficos interativos</a></div>
<div class="next"><a href="reportfactory.html"><span class="header-section-number">41</span> Organização de relatórios de rotina</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#rmarkdown"><span class="header-section-number">40</span> Relatórios com R Markdown</a></li>
<li><a class="nav-link" href="#prepara%C3%A7%C3%A3o-32"><span class="header-section-number">40.1</span> Preparação</a></li>
<li>
<a class="nav-link" href="#come%C3%A7ando"><span class="header-section-number">40.2</span> Começando</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#instala%C3%A7%C3%A3o-do-pacote-rmarkdown-para-r">Instalação do pacote rmarkdown para R</a></li>
<li><a class="nav-link" href="#come%C3%A7ando-um-novo-arquivo-rmd">Começando um novo arquivo Rmd</a></li>
<li><a class="nav-link" href="#importante-saber">Importante saber</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#componentes-do-r-markdown"><span class="header-section-number">40.3</span> Componentes do R Markdown</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#metadados-yaml">Metadados YAML</a></li>
<li><a class="nav-link" href="#texto"><span class="header-section-number">40.3.1</span> Texto</a></li>
<li><a class="nav-link" href="#blocos-de-c%C3%B3digo">Blocos de código</a></li>
<li><a class="nav-link" href="#imagens"><span class="header-section-number">40.3.2</span> Imagens</a></li>
<li><a class="nav-link" href="#tabelas"><span class="header-section-number">40.3.3</span> Tabelas</a></li>
<li><a class="nav-link" href="#se%C3%A7%C3%B5es-com-guias"><span class="header-section-number">40.3.4</span> Seções com guias</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#estrutura-do-arquivo"><span class="header-section-number">40.4</span> Estrutura do arquivo</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rmd-independente-.n%C3%A3o-numerado"><span class="header-section-number">40.4.1</span> Rmd independente {.não numerado}</a></li>
<li><a class="nav-link" href="#runfile">Runfile</a></li>
<li><a class="nav-link" href="#estrutura-da-pasta"><span class="header-section-number">40.4.2</span> Estrutura da pasta</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#produzindo-o-documento"><span class="header-section-number">40.5</span> Produzindo o documento</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#op%C3%A7%C3%A3o-1-bot%C3%A3o-knit"><span class="header-section-number">40.5.1</span> Opção 1: Botão “Knit”</a></li>
<li><a class="nav-link" href="#op%C3%A7%C3%A3o-2-comando-render">Opção 2: comando render()</a></li>
<li><a class="nav-link" href="#op%C3%A7%C3%B5es-3-pacote-reportfactory">Opções 3: pacote reportfactory</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#relat%C3%B3rios-parametrizados"><span class="header-section-number">40.6</span> Relatórios parametrizados</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#configurando-par%C3%A2metros">Configurando parâmetros</a></li>
<li><a class="nav-link" href="#exemplo-parametrizado">Exemplo parametrizado</a></li>
<li><a class="nav-link" href="#parametriza%C3%A7%C3%A3o-sem-params">Parametrização sem params</a></li>
</ul>
</li>
<li><a class="nav-link" href="#reiterando-relat%C3%B3rios"><span class="header-section-number">40.7</span> Reiterando relatórios</a></li>
<li>
<a class="nav-link" href="#modelos"><span class="header-section-number">40.8</span> Modelos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#documentos-do-word"><span class="header-section-number">40.8.1</span> Documentos do Word</a></li>
<li><a class="nav-link" href="#documentos-do-powerpoint"><span class="header-section-number">40.8.2</span> Documentos do PowerPoint</a></li>
<li><a class="nav-link" href="#integra%C3%A7%C3%A3o-de-modelos-no-yaml">Integração de modelos no YAML</a></li>
<li><a class="nav-link" href="#formatando-arquivos-html">Formatando arquivos HTML</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#conte%C3%BAdo-din%C3%A2mico"><span class="header-section-number">40.9</span> Conteúdo dinâmico</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tabelas-1"><span class="header-section-number">40.9.1</span> Tabelas</a></li>
<li><a class="nav-link" href="#widgets-html">Widgets HTML</a></li>
</ul>
</li>
<li><a class="nav-link" href="#recursos-24"><span class="header-section-number">40.10</span> Recursos</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Manual de R para Epidemiologistas</strong>" was written by the handbook team. It was last built on 2023-10-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
