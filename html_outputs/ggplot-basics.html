<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>30 O básico do ggplot | Manual de R para Epidemiologistas</title>
<meta name="author" content="the handbook team">
<meta name="description" content="O ggplot2 é o pacote R mais popular de visualização de dados. Sua função ggplot() está no centro deste pacote, e toda esta abordagem é conhecida coloquialmente como “ggplot” com as imagens...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="30 O básico do ggplot | Manual de R para Epidemiologistas">
<meta property="og:type" content="book">
<meta property="og:description" content="O ggplot2 é o pacote R mais popular de visualização de dados. Sua função ggplot() está no centro deste pacote, e toda esta abordagem é conhecida coloquialmente como “ggplot” com as imagens...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="30 O básico do ggplot | Manual de R para Epidemiologistas">
<meta name="twitter:description" content="O ggplot2 é o pacote R mais popular de visualização de dados. Sua função ggplot() está no centro deste pacote, e toda esta abordagem é conhecida coloquialmente como “ggplot” com as imagens...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.29/datatables.js"></script><link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.2.0/leaflet.js"></script><script src="libs/leaflet-providers-1.13.0/leaflet-providers_1.13.0.js"></script><script src="libs/leaflet-providers-plugin-2.2.0/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.10/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.2/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script><script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>
</head>
<body>
<div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
      <strong>Você precisa de ajuda para aprender R?</strong> Inscreva-se no curso de <a href="https://www.appliedepi.org/live/" class="alert-link">introdução ao R</a> da Applied Epi, experimente nossos <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriais gratuitos sobre o R</a>, publique em nosso <a href="https://community.appliedepi.org/" class="alert-link">fórum de perguntas e respostas</a>, ou solicite nosso <a href="mailto:contact@appliedepi.org" class="alert-link">suporte ao R</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Manual de R para Epidemiologistas</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Sobre este livro</li>
<li><a class="" href="editorial-style.html"><span class="header-section-number">1</span> Notas editoriais e técnicas</a></li>
<li><a class="" href="data-used.html"><span class="header-section-number">2</span> Baixe o livro e os dados</a></li>
<li class="book-part">Básico</li>
<li><a class="" href="basics.html"><span class="header-section-number">3</span> Introdução ao R</a></li>
<li><a class="" href="transition-to-R.html"><span class="header-section-number">4</span> Transição para o R</a></li>
<li><a class="" href="packages-suggested.html"><span class="header-section-number">5</span> Pacotes sugeridos</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> R projects</a></li>
<li><a class="" href="importing.html"><span class="header-section-number">7</span> Importar e exportar</a></li>
<li class="book-part">Gerenciamento dos Dados</li>
<li><a class="" href="cleaning.html"><span class="header-section-number">8</span> Limpeza de dados e principais funções</a></li>
<li><a class="" href="dates.html"><span class="header-section-number">9</span> Trabalhando com datas</a></li>
<li><a class="" href="characters-strings.html"><span class="header-section-number">10</span> Caracteres e strings</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Fatores</a></li>
<li><a class="" href="pivoting.html"><span class="header-section-number">12</span> Pivoteando dados</a></li>
<li><a class="" href="grouping.html"><span class="header-section-number">13</span> Agrupando dados</a></li>
<li><a class="" href="joining-matching.html"><span class="header-section-number">14</span> Juntando dados (Joins)</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> Eliminação de duplicidades</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> Iterações, loops e listas</a></li>
<li class="book-part">Análise dos dados</li>
<li><a class="" href="tables-descriptive.html"><span class="header-section-number">17</span> Tabelas descritivas</a></li>
<li><a class="" href="stat-tests.html"><span class="header-section-number">18</span> Testes estatísticos simples</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">19</span> Regressão simples e múltipla</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> Campos em branco/faltantes</a></li>
<li><a class="" href="standardization.html"><span class="header-section-number">21</span> Normalização de taxas</a></li>
<li><a class="" href="moving-average.html"><span class="header-section-number">22</span> Médias móveis</a></li>
<li><a class="" href="time-series.html"><span class="header-section-number">23</span> Séries temporais e detecção de surtos</a></li>
<li><a class="" href="epidemic-models.html"><span class="header-section-number">24</span> Modelagem de epidemias</a></li>
<li><a class="" href="contact-tracing.html"><span class="header-section-number">25</span> Rastreamento de contatos</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">26</span> Analises de pesquisa de questionários (survey)</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">27</span> Análise de sobrevivência</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">28</span> Introdução ao GIS</a></li>
<li class="book-part">Visualização de Dados</li>
<li><a class="" href="tables-presentation.html"><span class="header-section-number">29</span> Tabelas para apresentação</a></li>
<li><a class="active" href="ggplot-basics.html"><span class="header-section-number">30</span> O básico do ggplot</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">31</span> Dicas do ggplot</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">32</span> Curvas epidêmicas</a></li>
<li><a class="" href="age-pyramid.html"><span class="header-section-number">33</span> Pirâmides demográficas e escalas Likert</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">34</span> Gráficos de calor</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">35</span> Diagramas e gráficos</a></li>
<li><a class="" href="combination-analysis.html"><span class="header-section-number">36</span> Análise de Combinações</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">37</span> Cadeias de Transmissão</a></li>
<li><a class="" href="phylogenetic-trees.html"><span class="header-section-number">38</span> Árvores filogenéticas</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">39</span> Gráficos interativos</a></li>
<li class="book-part">Relatórios e dashboards</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">40</span> Relatórios com R Markdown</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">41</span> Organização de relatórios de rotina</a></li>
<li><a class="" href="flexdashboard.html"><span class="header-section-number">42</span> Painéis (Dashboards) com R Markdown</a></li>
<li><a class="" href="shiny-basics.html"><span class="header-section-number">43</span> Painéis com Shiny</a></li>
<li class="book-part">Miscelânea</li>
<li><a class="" href="writing-functions.html"><span class="header-section-number">44</span> Escrevendo funções</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">45</span> Interações de diretório</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">46</span> Controle de versão e colaboração com Git e Github</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">47</span> Erros comuns</a></li>
<li><a class="" href="help.html"><span class="header-section-number">48</span> Conseguindo ajuda</a></li>
<li><a class="" href="network-drives.html"><span class="header-section-number">49</span> R em drives (pastas) na rede</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">50</span> Data Table</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="ggplot-basics" class="section level1" number="30">
<h1>
<span class="header-section-number">30</span> O básico do ggplot<a class="anchor" aria-label="anchor" href="#ggplot-basics"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/ggplot_basics_top.png" width="100%" style="display: block; margin: auto;"></div>
<p>O <strong>ggplot2</strong> é o pacote R mais popular de visualização de dados. Sua função <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> está no centro deste pacote, e toda esta abordagem é conhecida coloquialmente como <em>“ggplot”</em> com as imagens resultantes às vezes carinhosamente chamadas de “ggplots”. O “gg” nestes nomes reflete a “<strong>g</strong>ramática de <strong>g</strong>ráficos” utilizados para construir as figuras. O <strong>ggplot2</strong> beneficia-se de uma grande variedade de pacotes R suplementares que melhoram ainda mais sua funcionalidade.</p>
<p>A sintaxe é significativamente diferente dos gráficos gerados pelo R <strong>base</strong>*, e tem uma curva de aprendizado associada a ela. A utilização do <strong>ggplot2</strong> geralmente exige que o usuário formate seus dados de uma forma altamente <strong>compatível com o “tidyverse”</strong>, o que em última análise torna a utilização conjunta destes pacotes muito eficaz.</p>
<p>Nesta página cobriremos os fundamentos da criação de gráficos com o pacote <strong>ggplot2</strong>. Veja a página <a href="ggplot-tips.html#ggplot-tips">Dicas para o ggplot</a> para sugestões e técnicas avançadas para tornar seus gráficos realmente bonitos.</p>
<p>Há vários tutoriais completos de <strong>ggplot2</strong> disponíveis na seção de recursos. Você também pode baixar esta <a href="https://github.com/rstudio/cheatsheets/raw/master/data-visualization-2.1.pdf"><em>cheat sheet</em> (colinha) de visualização de dados</a> do site do RStudio. Se você quiser inspiração para formas de visualizar criativamente seus dados, sugerimos que você revise sites como o <a href="https://www.r-graph-gallery.com/">galeria de gráficos R</a> e <a href="https://www.data-to-viz.com/caveats.html">Data-to-viz</a>.</p>
<!-- ======================================================= -->
<div id="preparação-20" class="section level2" number="30.1">
<h2>
<span class="header-section-number">30.1</span> Preparação<a class="anchor" aria-label="anchor" href="#prepara%C3%A7%C3%A3o-20"><i class="fas fa-link"></i></a>
</h2>
<div id="carregar-pacotes-6" class="section level3 unnumbered">
<h3>Carregar pacotes<a class="anchor" aria-label="anchor" href="#carregar-pacotes-6"><i class="fas fa-link"></i></a>
</h3>
<p>Este trecho de código mostra o carregamento dos pacotes necessários para as análises. Neste manual, enfatizamos <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> de <strong>pacman</strong>, que instala o pacote se necessário <em>e</em> o carrega para utilização. Você também pode carregar os pacotes instalados com <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> do R <strong>base</strong>*. Veja a página em <a href="basics.html#basics">Introdução ao R</a> para mais informações sobre os pacotes R.</p>
<div class="sourceCode" id="cb1422"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">tidyverse</span>,      <span class="co"># inclui ggplot2 e outras ferramentas de manipular dados</span></span>
<span>  <span class="va">ggforce</span>,        <span class="co"># extensão ggplot</span></span>
<span>  <span class="va">rio</span>,            <span class="co"># importar/exportar</span></span>
<span>  <span class="va">here</span>,           <span class="co"># localizador de arquivos</span></span>
<span>  <span class="va">stringr</span>         <span class="co"># trabalhando com caracteres</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div id="importar-datos-1" class="section level3 unnumbered">
<h3>Importar datos<a class="anchor" aria-label="anchor" href="#importar-datos-1"><i class="fas fa-link"></i></a>
</h3>
<p>Importamos o conjunto de dados de casos de uma epidemia simulada de Ebola. Se você quiser acompanhar, <a href="https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds" class="download-button"> clique para baixar a linelist “limpa” </a> (como arquivo .rds). Importe seus dados com a função <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> do pacote <strong>rio</strong> (ele aceita muitos tipos de arquivos como .xlsx, .rds, .csv - veja a página <a href="importing.html#importing">Importar and exportar</a> para detalhes).</p>
<div class="sourceCode" id="cb1423"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.rds"</span><span class="op">)</span></span></code></pre></div>
<p>As primeiras 50 linhas da linelist são exibidas abaixo. Vamos nos concentrar nas variáveis contínuas <code>age</code>, <code>wt_kg</code> (peso em quilos), <code>ct_blood</code> (valores de CT) e <code>days_onset_hosp</code> (diferença entre data de início e hospitalização).</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-1ac1efb179ac6176e8f8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1ac1efb179ac6176e8f8">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2\" data-max=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399075200000\" data-max=\"1406419200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399939200000\" data-max=\"1407024000000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400025600000\" data-max=\"1407110400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400371200000\" data-max=\"1410566400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-29&quot;,&quot;30-49&quot;,&quot;50-69&quot;,&quot;70+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;,&quot;50-54&quot;,&quot;55-59&quot;,&quot;60-64&quot;,&quot;65-69&quot;,&quot;70-74&quot;,&quot;75-79&quot;,&quot;80-84&quot;,&quot;85+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"-13.2697246824573\" data-max=\"-13.209391925612\" data-scale=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"8.45171855856465\" data-max=\"8.48802917129884\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"11\" data-max=\"241\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"20\" data-max=\"24\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"35.9\" data-max=\"38\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"428.994082840237\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Ausente","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Ausente","Ausente","Ausente","Ausente","Port Hospital","Military Hospital","Ausente","Ausente","Other","Port Hospital","Port Hospital","Port Hospital","Ausente","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Ausente","Other","Ausente","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Ausente","Military Hospital","Other","Ausente","Ausente","Port Hospital","Port Hospital","Port Hospital","Ausente","Central Hospital","Military Hospital","Other","Other","Other","Ausente","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Ausente"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.461830626007281,8.462729314626459,8.461443675342711,8.46191259217774,8.472923276435059,8.48401630165138,8.458371253408441,8.477617055125091,8.47570184950483,8.477799468789719,8.47145134147474,8.478048406853629,8.48528034195779,8.469575303958671,8.45957352078114,8.474048895115439,8.488029171298839,8.473437335922,8.484082637344621,8.46242233645879,8.470268221265719,8.463984474805329,8.464134789434199,8.456230946296071,8.48334624336805,8.47493999153642,8.47832062438022,8.469393389176499,8.48480589906514,8.47121232619015,8.48438437371817,8.484661585743391,8.477141599844281,8.462381270106089,8.455685978131131,8.4632880274758,8.47940722413856,8.46353857052336,8.461789681588639,8.47508713872833,8.458258081280711,8.4532568143863,8.4732571907655,8.479115866419329,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.81844297615629,16.06524962926347,22.49657064471879,71.41440190438405,41.61712247324614,62.09538908706566,0,16.83765369253662,22.79032897344431,53.41198979591836,24.28026361429067,22.46003435064077,54.32098765432099,41.05784325564545,28.56648199445983,17.03205520132763,25.04129149128882,38.7172182043977,27.3876813705495,31.55555555555556,14.80690759456621,30.88398111998135,26.61934338952972,59.37499999999999,96.61835748792272,19.23947487550928,84.94031221303948,18.41993774061044,27.77226740726046,41.32231404958677,17.20806665861611,24.16716240333135,15.72189710891781,428.9940828402366,27.99302202929125,243.2610124917817,20.23950075898128,30.52744643563797,25.15589569160998,47,39.04,31.06616432017979,77.96836711962574,29.51659612385831,166.4932362122789,100.3086419753086,37.76,20.60378034578518,23.45856237526698],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="limpeza-geral" class="section level3 unnumbered">
<h3>Limpeza geral<a class="anchor" aria-label="anchor" href="#limpeza-geral"><i class="fas fa-link"></i></a>
</h3>
<p>Ao preparar os dados para traçar o gráfico, é melhor fazer com que os dados adiram aos padrões de dados <a href="https://r4ds.had.co.nz/tidy-data.html">“arrumados”</a> (do inglês <em>tidy</em>) na medida do possível. Como conseguir isto é explicado com mais detalhes nas páginas de gerenciamento de dados deste manual, tais como <a href="cleaning.html#cleaning">Dados de limpeza e principais funções</a>.</p>
<p>Algumas maneiras simples de prepararmos nossos dados para torná-los melhores para a visualização podem incluir tornar o conteúdo dos dados melhor para exibição - o que não necessariamente equivale a melhor para a manipulação de dados. Por exemplo:</p>
<ul>
<li><p>Substituir os valores <code>NA</code> em uma coluna do tipo caracteres pela <em>string</em> “Desconhecido”.<br></p></li>
<li><p>Considerar converter a coluna para classe <em>fator</em> para que seus valores tenham níveis em uma ordem específica.</p></li>
<li><p>Limpar algumas colunas para que os valores adequados à manipulações (<em>“data friendly”</em>), tais como valores que possuam sublinhado (<em>“underline”</em>), por exemplo, sejam alterados para texto normal ou padrão título (ver <a href="characters-strings.html#characters-strings">Caracteres e strings</a>)</p></li>
</ul>
<p>Aqui estão alguns exemplos disso em ação.</p>
<div class="sourceCode" id="cb1424"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#faça uma versão visualizaçãi das colunas com nomes mais amigáveis </span></span>
<span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    gender_disp <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"m"</span> <span class="op">~</span> <span class="st">"Male"</span>,        <span class="co"># m para Male</span></span>
<span>                            <span class="va">gender</span> <span class="op">==</span> <span class="st">"f"</span> <span class="op">~</span> <span class="st">"Female"</span>,      <span class="co"># f para Femimino,</span></span>
<span>                            <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Desconhecido"</span><span class="op">)</span>,    <span class="co"># NA para Desconhecido</span></span>
<span>    </span>
<span>    outcome_disp <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="st">"Desconhecido"</span><span class="op">)</span>          <span class="co"># substituir na por "Desconhecido" </span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div id="pivoteamento-para-mais-longo" class="section level3 unnumbered">
<h3>Pivoteamento para “mais longo”<a class="anchor" aria-label="anchor" href="#pivoteamento-para-mais-longo"><i class="fas fa-link"></i></a>
</h3>
<p>Por uma questão de estrutura de dados, para <strong>ggplot2</strong> muitas vezes também queremos <em>pivotar</em> nossos dados para formatos <em>mais longos</em>. Leia mais sobre isto na página em <a href="pivoting.html#pivoting">Pivoteando dados</a>.</p>
<div class="inline-figure"><img src="images/pivoting/pivot_longer_new.png" width="100%" style="display: block; margin: auto;"></div>
<p>Por exemplo, digamos que queremos fazer um gráfico de dados que estão em um formato “largo”, como para cada caso na <code>linelist</code> e seus sintomas. Abaixo criamos uma mini-linelist chamada <code>symptoms_data</code> que contém apenas as colunas <code>case_id</code> e sintomas.</p>
<div class="sourceCode" id="cb1425"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">symptoms_data</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>tosse<span class="op">=</span><span class="va">cough</span>,</span>
<span>         febre<span class="op">=</span><span class="va">fever</span>, </span>
<span>         vômito<span class="op">=</span><span class="va">vomit</span>,</span>
<span>         dores<span class="op">=</span><span class="va">aches</span>,</span>
<span>         calafrio<span class="op">=</span><span class="va">chills</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co">#traduzindo</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">febre</span>, <span class="va">calafrio</span>, <span class="va">tosse</span>, <span class="va">dores</span>, <span class="va">vômito</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>Veja como são as primeiras 50 linhas desta mini-linelist - veja como elas são formatadas de forma “larga” com cada sintoma como uma coluna:</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d57e79e2c6e2af78a52f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d57e79e2c6e2af78a52f">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>febre<\/th>\n      <th>calafrio<\/th>\n      <th>tosse<\/th>\n      <th>dores<\/th>\n      <th>vômito<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Se quisermos traçar um gráfico com o número de casos com sintomas específicos, estamos limitados pelo fato de que cada sintoma é uma coluna específica. Entretanto, podemos <em>pivotar</em> as colunas de sintomas para um formato mais longo como este:</p>
<div class="sourceCode" id="cb1426"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">symptoms_data_long</span> <span class="op">&lt;-</span> <span class="va">symptoms_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>    <span class="co"># comece com a "mini" linelist chamada symptoms_data</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="op">-</span><span class="va">case_id</span>,                       <span class="co"># pivote todas as colunas exceto case_id </span></span>
<span>    names_to <span class="op">=</span> <span class="st">"nome_sintoma"</span>,             <span class="co"># dê o nome para a nova coluna que contém os sintomas </span></span>
<span>    values_to <span class="op">=</span> <span class="st">"sintoma_esta_presente"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># dê o nome para a coluna que diz se o sintoma está presente </span></span>
<span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>sintoma_esta_presente <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">sintoma_esta_presente</span>, <span class="st">"desconhecido"</span><span class="op">)</span><span class="op">)</span> <span class="co"># converte NA para "desconhecido"</span></span></code></pre></div>
<p>Aqui estão as primeiras 50 linhas. Observe que o caso tem 5 fileiras - uma para cada sintoma possível. As novas colunas <code>nome_sintoma</code> e <code>sintoma_esta_presente</code> são o resultado do pivoteamento. Note que este formato pode não ser muito útil para outras operações, mas é útil para a criação do gráfico.</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6cbfb37a961b65756cb3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6cbfb37a961b65756cb3">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","5fe599","5fe599","5fe599","5fe599","8689b7","8689b7","8689b7","8689b7","8689b7","11f8ea","11f8ea","11f8ea","11f8ea","11f8ea","b8812a","b8812a","b8812a","b8812a","b8812a","893f25","893f25","893f25","893f25","893f25","be99c8","be99c8","be99c8","be99c8","be99c8","07e3e8","07e3e8","07e3e8","07e3e8","07e3e8","369449","369449","369449","369449","369449","f393b4","f393b4","f393b4","f393b4","f393b4","1389ca","1389ca","1389ca","1389ca","1389ca"],["febre","calafrio","tosse","dores","vômito","febre","calafrio","tosse","dores","vômito","febre","calafrio","tosse","dores","vômito","febre","calafrio","tosse","dores","vômito","febre","calafrio","tosse","dores","vômito","febre","calafrio","tosse","dores","vômito","febre","calafrio","tosse","dores","vômito","febre","calafrio","tosse","dores","vômito","febre","calafrio","tosse","dores","vômito","febre","calafrio","tosse","dores","vômito"],["no","no","yes","no","yes","desconhecido","desconhecido","desconhecido","desconhecido","desconhecido","desconhecido","desconhecido","desconhecido","desconhecido","desconhecido","no","no","no","no","no","no","no","yes","no","yes","no","no","yes","no","yes","desconhecido","desconhecido","desconhecido","desconhecido","desconhecido","no","no","yes","no","yes","no","no","yes","no","yes","no","no","yes","no","no"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>nome_sintoma<\/th>\n      <th>sintoma_esta_presente<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
</div>
<div id="básico-do-ggplot" class="section level2" number="30.2">
<h2>
<span class="header-section-number">30.2</span> Básico do ggplot<a class="anchor" aria-label="anchor" href="#b%C3%A1sico-do-ggplot"><i class="fas fa-link"></i></a>
</h2>
<p><strong>“Gramática dos gráficos” - ggplot2</strong></p>
<p>A criação de gráficos com o <strong>ggplot2</strong> é baseada na “adição” de camadas de gráficos e de design uns sobre os outros, com cada comando adicionado aos anteriores com um símbolo de mais (<code>+</code>). O resultado é um objeto do tipo gráfico com várias camadas que pode ser salvo, modificado, impresso, exportado, etc.</p>
<p>Os objetos de ggplot podem ser altamente complexos, mas a ordem básica das camadas geralmente será assim:</p>
<ol style="list-style-type: decimal">
<li>Comece com o comando de base <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> - isto “abre” o ggplot e permite que funções subseqüentes sejam adicionadas com <code>+</code>. Tipicamente, o conjunto de dados também é especificado neste comando<br>
</li>
<li>Adicionar camadas “geom” - estas funções visualizam os dados como <em>geometrias</em> (<em>formas</em>), por exemplo, como um gráfico de barras, gráfico de linhas, gráfico de dispersão, histograma (ou uma combinação!). Todas estas funções começam com <code>geom_</code> como um prefixo.<br>
</li>
<li>Adicione elementos de desenho ao gráfico, como etiquetas de eixos, título, fontes, tamanhos, esquemas de cores, legendas ou rotação de eixos.</li>
</ol>
<p>Um exemplo simples de código esqueleto é o seguinte. Vamos explicar cada componente nas seções abaixo.</p>
<div class="sourceCode" id="cb1427"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plote os dados das colunas do objeto my_data como pontos vermelhos</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">my_data</span><span class="op">)</span><span class="op">+</span>                   <span class="co"># use a base de dados "my_data"</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>                             <span class="co"># adicione uma camada de pontos </span></span>
<span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">col1</span>, y <span class="op">=</span> <span class="va">col2</span><span class="op">)</span>,    <span class="co"># mapeie as colunas para os eixos</span></span>
<span>    color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">+</span>                       <span class="co"># outras especificações para o geom</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                 <span class="co"># aqui você pode adicionar títulos, rótulos dos eixos, etc. </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span><span class="op">)</span>                                 <span class="co"># aqui você pode ajustar a cor, fonte, tamanho, de elementos que não são orindos dos dados (eixo, título, etc.) </span></span></code></pre></div>
</div>
<div id="ggplot" class="section level2" number="30.3">
<h2>
<span class="header-section-number">30.3</span> <code>ggplot()</code><a class="anchor" aria-label="anchor" href="#ggplot"><i class="fas fa-link"></i></a>
</h2>
<p>O comando de abertura de qualquer gráfico ggplot2 é <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>. Este comando simplesmente cria uma tela em branco sobre a qual se pode adicionar camadas. Ele “abre” o caminho para que outras camadas sejam adicionadas com um símbolo <code>+</code>.</p>
<p>Normalmente, o comando <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> inclui o <code>dados =</code> argumento para o gráfico. Isto define o conjunto de dados padrão a ser utilizado para as camadas subsequentes do gráfico.</p>
<p>Este comando terminará com um <code>+</code> após seus parênteses de fechamento. Isto deixa o comando “aberto”. O ggplot só será executado/aparecerá quando o comando completo incluir uma camada final <em>sem</em> um <code>+</code> no final.</p>
<div class="sourceCode" id="cb1428"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Isso irá criar um gráfco que é um painel em branco </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="geoms" class="section level2" number="30.4">
<h2>
<span class="header-section-number">30.4</span> Geoms<a class="anchor" aria-label="anchor" href="#geoms"><i class="fas fa-link"></i></a>
</h2>
<p>Uma tela em branco certamente não é suficiente - precisamos criar geometrias (formas) a partir de nossos dados (por exemplo, gráficos de barra, histogramas, gráficos de dispersão, gráficos de caixa).</p>
<p>Isto é feito adicionando camadas “geoms” ao comando inicial <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>. Há muitas funções do <strong>ggplot2</strong> que criam “geoms”. Cada uma destas funções começa com “geom_”, portanto, vamos nos referir a elas genericamente como <code>geom_XXXX()</code>. Há mais de 40 geoms em <strong>ggplot2</strong> e muitos outros criados por fãs e contribuidores. Veja-os na <a href="https://exts.ggplot2.tidyverse.org/gallery/">galeria ggplot2</a>. Alguns geoms comuns estão listados abaixo:</p>
<ul>
<li>Histogramas - <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code><br>
</li>
<li>Gráficos de barras - <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> ou <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code> (veja <a href="ggplot-basics.html#ggplot_basics_bars">“Bar plot” seção</a>)<br>
</li>
<li>Diagrama de caixas - <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code><br>
</li>
<li>Pontos (por exemplo, gráficos de dispersão) - <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code><br>
</li>
<li>Gráficos de linhas - <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code> ou <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path()</a></code><br>
</li>
<li>Linhas de tendência - <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code>
</li>
</ul>
<p>Em um gráfico você pode exibir um ou vários geoms. Cada um é adicionado aos comandos anteriores <strong>ggplot2</strong> com um <code>+</code>, e eles são plotados sequencialmente de forma que os geoms posteriores sejam plotados sobre os anteriores.</p>
</div>
<div id="ggplot_basics_mapping" class="section level2" number="30.5">
<h2>
<span class="header-section-number">30.5</span> Mapeando dados ao gráfico<a class="anchor" aria-label="anchor" href="#ggplot_basics_mapping"><i class="fas fa-link"></i></a>
</h2>
<p>A maioria das “funções geom” devem ser informadas <em>do que usar</em> para criar suas formas - portanto, você deve dizer-lhes como devem <em>mapear (atribuir) colunas em seus dados</em> aos componentes do gráfico como os eixos, cores das formas, tamanhos das formas, etc. Para a maioria dos geoms, os componentes <em>essenciais</em> que devem ser mapeados para colunas nos dados são o eixo x, e (se necessário) o eixo y.</p>
<p>Este “mapeamento” ocorre com o argumento <code>mapping =</code>. Os mapeamentos que você fornece ao <code>mapping</code> devem ser envolvidos na função <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>, assim você escreveria algo como <code>mapping = aes(x = col1, y = col2)</code>, como mostrado abaixo.</p>
<p>Abaixo, no comando <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>, os dados são definidos como o caso <code>linelist</code>. No argumento <code>mapping = aes()</code> a coluna <code>age</code> é mapeada para o eixo x, e a coluna <code>wt_kg</code> é mapeada para o eixo y.</p>
<p>Depois de um <code>+</code>, os comandos de plotagem continuam. Uma forma é criada com a função “geom” <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>. Este geom <em>herda</em> os mapeamentos do comando <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> anterior - ele conhece as atribuições eixo-coluna e procede para visualizar essas relações como <em>pontos</em> na área do gráfico.</p>
<div class="sourceCode" id="cb1429"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">wt_kg</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1033-1.png" width="672"></div>
<div class="sourceCode" id="cb1430"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># o nome dos eixos fica automaticamente com o nome da variável na base</span></span>
<span><span class="co"># que está em inglês. É possível traduzir na base ou usando a camada</span></span>
<span><span class="co"># labs() para escrever o nome dos eixos como se quer</span></span></code></pre></div>
<p>Como outro exemplo, os seguintes comandos utilizam os mesmos dados, um mapeamento um pouco diferente e um <em>geom</em> diferente. A função <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> requer apenas uma coluna mapeada para o eixo x, pois as contagens do eixo y são geradas automaticamente.</p>
<div class="sourceCode" id="cb1431"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1034-1.png" width="672"></div>
<div id="as-estéticas-do-gráfico" class="section level3 unnumbered">
<h3>As estéticas do gráfico<a class="anchor" aria-label="anchor" href="#as-est%C3%A9ticas-do-gr%C3%A1fico"><i class="fas fa-link"></i></a>
</h3>
<p>Na terminologia ggplot, uma “estética” do gráfico tem um significado específico. Ela se refere a uma propriedade visual de <em>dados plotados</em>. Note que “estético” aqui se refere aos <em>dados que estão sendo plotados em geometrias/formas</em> - não ao display ao redor, como títulos, etiquetas de eixos, cor de fundo, que você pode associar com a <strong>palavra</strong> “estética”. No ggplot, esses detalhes são chamados de “themes” (temas) e são ajustados dentro de um comando <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> (veja <a href="ggplot-basics.html#ggplot_basics_themes">esta seção</a>).</p>
<p>Portanto, os objetos <em>aesthetics</em> podem ser cores, tamanhos, transparências, posição, etc. <em>dos dados traçados</em>. Nem todos os geoms terão as mesmas opções de <em>aesthetics</em>, mas muitos podem ser usados pela maioria dos geoms. Aqui estão alguns exemplos:</p>
<ul>
<li><p><code>shape =</code> Mostra um ponto de <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> como um círculo, estrela, triângulo…<br></p></li>
<li><p><code>fill =</code> A cor de preenchimento (ex. de uma barra ou boxplot)<br></p></li>
<li><p><code>color =</code> A linha exterior de uma barra ou boxplot, ou a cor do ponto se usar o <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code></p></li>
<li><p><code>size =</code> tamanho (ex. grossura da linha, tamanho do ponto)<br></p></li>
<li><p><code>alpha =</code> Transparencia (1 = opaco, 0 = invisível)<br></p></li>
<li><p><code>binwidth =</code> Largura das classes do histograma</p></li>
<li><p><code>width =</code> Largura das barras do gráfico de barras</p></li>
<li><p><code>linetype =</code> Tipo de linha (ex. sólida, tracejada, pontilhada)</p></li>
</ul>
<p>A esses objetos do gráfico podem ser atribuídos valores de duas maneiras:</p>
<ol style="list-style-type: decimal">
<li>Atribuindo um valor estático (por exemplo, <code>color = "blue"</code>) a ser aplicado em todas as observações plotadas<br>
</li>
<li>Atribuído a uma coluna de dados (por exemplo, “color = hospital”) de tal forma que a exibição de cada observação depende de seu valor nessa coluna</li>
</ol>
<!-- * A estes valores do tipo *aesthetics* podem ser atribuídos valores estáticos (por exemplo `size = 1`) ou eles podem ser mapeados a uma coluna existente no banco (por exemplo `size = age`).* Se você quiser que seja atribuído um valor estático, a atribuição é colocada *fora* do `mapping = aes()`. Se você quiser que esse elemento seja dependente do valor em cada linha de dados, a atribuição é feita *dentro* do `mapping = aes()`.   -->
</div>
<div id="configurar-para-um-valor-estático" class="section level3 unnumbered">
<h3>Configurar para um valor estático<a class="anchor" aria-label="anchor" href="#configurar-para-um-valor-est%C3%A1tico"><i class="fas fa-link"></i></a>
</h3>
<p>Se você quiser que a estética do objeto do gráfico seja estática, ou seja - para ser a mesma para cada observação nos dados, você escreve sua atribuição dentro do geom desejado mas <em>fora</em> de qualquer <code>mapping = aes()</code>. Essas atribuições poderiam ser <code>size = 1</code> ou <code>color = "blue"</code>. Aqui estão dois exemplos:</p>
<ul>
<li><p>No primeiro exemplo, o <code>mapping = aes()</code> está no comando <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> e os eixos são mapeados para as colunas de idade e peso nos dados. A estética do gráfico <code>color =</code>, <code>size =</code>, e <code>alpha =</code> (transparência) são atribuídos a valores estáticos. Para maior clareza, isto é feito na função <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>, pois você pode adicionar outras geometrias posteriormente que levariam valores diferentes.</p></li>
<li><p>No segundo exemplo, o histograma requer apenas o eixo x mapeado para uma coluna. O histograma <code>binwidth =</code>, <code>color =</code>, <code>fill =</code> (cor de preenchimento), e <code>alpha =</code> são novamente definidos dentro do geom para valores estáticos.</p></li>
</ul>
<div class="sourceCode" id="cb1432"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gráfico de dispersão</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">wt_kg</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># configurar mapeamento dos dados e eixos </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"darkgreen"</span>, size <span class="op">=</span> <span class="fl">0.5</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>   <span class="co"># configurar a estética estática dos pontos</span></span>
<span></span>
<span><span class="co"># histograma</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>       <span class="co"># configurar mapeamento dos dados e eixos </span></span>
<span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>              <span class="co"># mostra o histograma</span></span>
<span>    binwidth <span class="op">=</span> <span class="fl">7</span>,                <span class="co"># largura das classes</span></span>
<span>    color <span class="op">=</span> <span class="st">"red"</span>,               <span class="co"># cor da linha da classe</span></span>
<span>    fill <span class="op">=</span> <span class="st">"blue"</span>,               <span class="co"># cor de preenchimento da barra</span></span>
<span>    alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>                 <span class="co"># transparência da barra</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1035-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1035-2.png" width="50%"></p>
</div>
<div id="responsivo-a-valores-de-uma-coluna" class="section level3 unnumbered">
<h3>Responsivo a valores de uma coluna<a class="anchor" aria-label="anchor" href="#responsivo-a-valores-de-uma-coluna"><i class="fas fa-link"></i></a>
</h3>
<p>A alternativa é mapear os argumentos da estética de um gráfico a uma coluna (variável) do seus dados. Nesta abordagem, a exibição deste <em>aesthetics</em> dependerá do valor desta observação naquela coluna dos dados. Se os valores da coluna forem contínuos, a escala de exibição (legenda) para aquele <em>aesthetics</em> será contínua. Se os valores da coluna forem discretos, a legenda exibirá cada valor e os dados plotados aparecerão “agrupados” de forma distinta (leia mais na seção <a href="ggplot-basics.html#ggplotgroups">agrupamento</a> desta página).</p>
<p>Para conseguir isso, você mapeia esse <em>aesthetics</em> do gráfico para um nome de <em>coluna</em> (não entre aspas). Isto deve ser feito *em uma função <code>mapping = aes()</code> (nota: há vários lugares no código que você pode fazer estas atribuições de mapeamento, como discutido <a href="#id_#ggplot_basics_map_loc">abaixo</a>)).</p>
<p>Dois exemplos estão abaixo.</p>
<ul>
<li>No primeiro exemplo, a <em>aesthetics</em> <code>color =</code> (de cada ponto) é mapeada para a coluna <code>age</code> - e uma escala de cores apareceu na legenda! Por enquanto, basta observar que a escala existe - mostraremos como modificá-la em seções posteriores.<br>
</li>
<li>No segundo exemplo, duas novas <em>aesthetics</em> do gráfico também são mapeados para colunas (<code>color =</code> e <code>size =</code>), enquanto a <em>aesthetics</em> do gráfico <code>shape =</code> e <code>alpha =</code> são mapeados para valores estáticos fora de qualquer função <code>mapping = aes()</code>.</li>
</ul>
<div class="sourceCode" id="cb1433"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gráfico de dispersão</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>,   <span class="co"># escolha os dados</span></span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>     <span class="co"># mapeie as aesthetics para coluna de valores</span></span>
<span>         x <span class="op">=</span> <span class="va">age</span>,           <span class="co"># mapeie o eixo x para idade (coluna age)       </span></span>
<span></span>
<span>         y <span class="op">=</span> <span class="va">wt_kg</span>,         <span class="co"># mapeie o eixo y para peso (wt_kg)      </span></span>
<span></span>
<span>         color <span class="op">=</span> <span class="va">age</span><span class="op">)</span> <span class="co"># mapeie a cor segundo a idade</span></span>
<span></span>
<span>       <span class="op">)</span><span class="op">+</span>     </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span>         <span class="co"># mostre como pontos</span></span>
<span></span>
<span><span class="co"># gráfico de dispersão</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>,   <span class="co"># escolha os dados</span></span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>     <span class="co"># mapeie as aesthetics para coluna de valores</span></span>
<span>         x <span class="op">=</span> <span class="va">age</span>,           <span class="co"># mapeie o eixo x para idade (coluna age)    </span></span>
<span></span>
<span>         y <span class="op">=</span> <span class="va">wt_kg</span>,         <span class="co"># mapeie o eixo y para peso (wt_kg) </span></span>
<span></span>
<span>         color <span class="op">=</span> <span class="va">age</span>,       <span class="co"># mapeie a cor segundo a idade</span></span>
<span></span>
<span>         size <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>      <span class="co"># mapeie o tamanho segundo a idade</span></span>
<span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>             <span class="co"># mostre como pontos</span></span>
<span>    shape <span class="op">=</span> <span class="st">"diamond"</span>,      <span class="co"># pontos como losangos (diamantes)</span></span>
<span>    alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>            <span class="co"># transparência do ponto a 30%</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1036-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1036-2.png" width="50%"></p>
<p>Nota: Os argumentos referentes aos eixos são sempre atribuídos a colunas dos dados (não a valores estáticos), e isto é sempre feito dentro de <code>mapping = aes()</code>.</p>
<p>Torna-se importante acompanhar as camadas e a <em>aesthetics</em> de seus gráficos à medida que vão ficando mais complexos - por exemplo, gráficos com múltiplos <em>geoms</em>. No exemplo abaixo, a aesthetic <code>size =</code> é atribuída duas vezes - uma para <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> e outra para <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code> - ambas as vezes como um valor estático.</p>
<div class="sourceCode" id="cb1434"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>           <span class="co"># mapeia a aesthetics para as colunas</span></span>
<span>         x <span class="op">=</span> <span class="va">age</span>,</span>
<span>         y <span class="op">=</span> <span class="va">wt_kg</span>,</span>
<span>         color <span class="op">=</span> <span class="va">age_years</span><span class="op">)</span></span>
<span>       <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>                   <span class="co"># addiciona pontos para cada linha de dados</span></span>
<span>    size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>                  <span class="co"># adiciona uma linha de tendência </span></span>
<span></span>
<span>    method <span class="op">=</span> <span class="st">"lm"</span>,              <span class="co"># com um método linear</span></span>
<span>    size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>                   <span class="co"># tamanho (grossura da linha) de 2</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1037-1.png" width="672"></div>
</div>
<div id="ggplot_basics_map_loc" class="section level3 unnumbered">
<h3>Onde incluir os atributos de mapeamento<a class="anchor" aria-label="anchor" href="#ggplot_basics_map_loc"><i class="fas fa-link"></i></a>
</h3>
<p>O mapeamento das <em>aesthetics</em> dentro de <code>mapping = aes()</code> pode ser escrito em vários lugares em seus comandos para criar o gráfico, podendo até mesmo ser escrito mais de uma vez. Isto pode ser escrito no comando superior <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>, e/ou para cada <em>geom</em> individual abaixo. As nuances incluem:</p>
<ul>
<li>As atribuições de mapeamento feitas no primeiro comando <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> serão herdadas como padrão em qualquer geom abaixo, da mesma forma como <code>x =</code> e <code>y =</code> são herdadas</li>
<li>Outros mapeamentos feitos dentro de um geom se aplicam somente a esse geom</li>
</ul>
<p>Da mesma forma, o parâmetro <code>data =</code> (do inglês dados) especificado no primeiro comando <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> será aplicado por padrão a qualquer geom abaixo, mas você também poderia especificar dados novos para cada geom (mas isto é mais complicado).</p>
<p>Assim, cada um dos seguintes comandos irá criar o mesmo gráfico:</p>
<div class="sourceCode" id="cb1435"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Esses comandos irão criar o mesmo gráfico</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="ggplotgroups" class="section level3 unnumbered">
<h3>Grupos<a class="anchor" aria-label="anchor" href="#ggplotgroups"><i class="fas fa-link"></i></a>
</h3>
<p>Você pode facilmente agrupar os dados e “plotar por grupo”. Na verdade, você já fez isso!</p>
<p>Atribua a coluna de “agrupamento” à <em>aesthetic</em> apropriada do gráfico, dentro de um <code>mapping = aes()</code>. Acima, demonstramos isso utilizando valores contínuos quando atribuímos o ponto <code>size =</code> à coluna <code>age</code> (idade). Entretanto, isto funciona da mesma forma para colunas discretas/categóricas.</p>
<p>Por exemplo, se você quiser que os pontos sejam exibidos por gênero, você definiria <code>mapping = aes(color = gender)</code>. Uma legenda aparece automaticamente. Esta atribuição pode ser feita dentro do comando <code>mapping = aes()</code> no <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> do topo (e ser herdada pelo geom), ou pode ser definida em um <code>mapping = aes()</code> separado dentro do geom. Ambas as abordagens são mostradas abaixo:</p>
<div class="sourceCode" id="cb1436"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">wt_kg</span>, color <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1039-1.png" width="672"></div>
<div class="sourceCode" id="cb1437"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Este código alternativo produz o mesmo gráfico </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">wt_kg</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">gender</span><span class="op">)</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p>Observe que, dependendo do geom, será necessário utilizar argumentos diferentes para agrupar os dados. Para <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> você provavelmente utilizará <code>color =</code>, <code>shape =</code> ou <code>size =</code>. Enquanto para <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> é mais provável que você utilize <code>fill =</code>. Isto depende apenas do geom e do tipo de <em>aesthetic</em> do gráfico que você deseja usar para refletir os agrupamentos.</p>
<p>Para sua informação - a forma mais básica de agrupar os dados é utilizando apenas o argumento <code>group =</code> dentro do <code>mapping = aes()</code>. Entretanto, isto por si só não mudará as cores, o preenchimento ou as formas. Tampouco criará uma legenda. No entanto, os dados são agrupados, de modo que as exibições estatísticas poderão ser afetadas.</p>
<p>Para ajustar a ordem dos grupos em um gráfico, veja a página <a href="ggplot-tips.html#ggplot-tips">Dicas para o ggplot</a> ou a página em <a href="factors.html#factors">Fatores</a>. Há muitos exemplos de gráficos agrupados nas seções abaixo sobre a plotagem de dados contínuos e categóricos.</p>
</div>
</div>
<div id="ggplot_basics_facet" class="section level2" number="30.6">
<h2>
<span class="header-section-number">30.6</span> Facetas / Pequenos-Múltiplos<a class="anchor" aria-label="anchor" href="#ggplot_basics_facet"><i class="fas fa-link"></i></a>
</h2>
<p>Facetas, ou “pequenos-múltiplos”, são usadas para dividir uma parcela em uma figura de vários painéis, com um painel (“faceta”) por grupo de dados. O mesmo tipo de gráfico é criado várias vezes, cada um usando um subgrupo do mesmo conjunto de dados.</p>
<p>O Facetamento (<em>Faceting</em>) é uma funcionalidade que vem com <strong>ggplot2</strong>, portanto as legendas e eixos dos “painéis” de faceta são automaticamente alinhados. Há outros pacotes discutidos na página <a href="ggplot-tips.html#ggplot-tips">Dicas para o ggplot</a> que são usados para combinar gráficos completamente diferentes (<strong>cowplot</strong> e <strong>patchwork</strong>) em uma única figura.</p>
<p>O facetamento é feito com uma das seguintes funções <strong>ggplot2</strong>:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> Para mostrar um painel diferente para cada nível de uma variável <em>única</em>. Um exemplo disso poderia ser mostrar uma curva epidêmica diferente para cada hospital de uma região. As facetas são ordenadas alfabeticamente, a menos que a variável seja um fator com outra ordenação definida.<br>
</li>
</ol>
<ul>
<li>Você pode invocar certas opções para determinar o layout das facetas, por exemplo <code>nrow = 1</code> ou <code>ncol = 1</code> para controlar o número de linhas ou colunas dentro das quais as facetas estão dispostas.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> Isto é utilizado quando se deseja trazer uma segunda variável para a disposição das facetas. Aqui cada painel de uma “grade” (grid) mostra a interseção entre os valores em <em>duas colunas</em>. Por exemplo, curvas epidêmicas para cada combinação hospital-idade com hospitais ao longo do topo (colunas) e faixas etárias ao longo dos lados (linhas).</li>
</ol>
<ul>
<li>“nrow” e “ncol” não são relevantes, pois os subgrupos são apresentados em um grid</li>
</ul>
<p>Cada uma destas funções aceita uma sintaxe de fórmula para especificar a(s) coluna(s) de faceta(s). Ambas aceitam até duas colunas, uma de cada lado de um til `~’.</p>
<ul>
<li><p>Para <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> na maioria das vezes você escreverá apenas uma coluna precedida por um til <code>~</code> como <code>facet_wrap(~hospital)</code>. Entretanto, você pode escrever duas colunas <code>facet_wrap(outcome ~ hospital)</code> - cada combinação única será exibida em um painel separado, mas não serão dispostas em um grid. Os cabeçalhos mostrarão termos combinados e estes não terão uma lógica específica para as colunas vs. linhas. Se você estiver fornecendo apenas uma variável facetada, um ponto <code>.</code> é utilizado como um espaço reservado no outro lado da fórmula - veja os exemplos de código.</p></li>
<li><p>Para <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> você também pode especificar uma ou duas colunas para a fórmula (grid <code>linhas ~ colunas</code>). Se você quiser especificar apenas uma, você pode colocar um ponto <code>.</code> no outro lado do til como <code>facet_grid(. ~ hospital)</code> ou <code>facet_grid(hospital ~ .)</code>.</p></li>
</ul>
<p>As facetas podem rapidamente conter uma quantidade avassaladora de informações - é bom garantir que você não tenha muitos níveis de cada variável que você escolher facetar. Aqui estão alguns exemplos rápidos com o conjunto de dados sobre malária (ver <a href="data-used.html#data-used">Baixar manual e dados</a>) que consiste em contagens diárias de casos de malária para estabelecimentos, por faixa etária.</p>
<p>A seguir, importamos e fazemos algumas modificações rápidas para simplificar:</p>
<div class="sourceCode" id="cb1438"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Esses dados correspondem a contagens diárias de malária, por estabelecimento-dia </span></span>
<span><span class="va">malaria_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"malaria_facility_count_data.rds"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># importar</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">submitted_date</span>, <span class="op">-</span><span class="va">Province</span>, <span class="op">-</span><span class="va">newid</span><span class="op">)</span>                                 <span class="co"># remove colunas desnecessárias</span></span></code></pre></div>
<p>As primeiras 50 filas dos dados sobre a malária estão abaixo. Observe que existe uma coluna <code>malaria_tot</code>, mas também colunas para contagens por faixa etária (estas serão utilizadas no segundo exemplo referente ao <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> ).</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-0c68f905cf574bb0df1c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0c68f905cf574bb0df1c">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1596499200000\" data-max=\"1597190400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"81\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"56\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"96\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"233\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Facility 1","Facility 2","Facility 3","Facility 4","Facility 5","Facility 6","Facility 6","Facility 5","Facility 5","Facility 5","Facility 7","Facility 8","Facility 9","Facility 10","Facility 11","Facility 12","Facility 13","Facility 14","Facility 15","Facility 16","Facility 17","Facility 18","Facility 19","Facility 19","Facility 20","Facility 21","Facility 19","Facility 22","Facility 23","Facility 23","Facility 24","Facility 25","Facility 26","Facility 27","Facility 28","Facility 29","Facility 30","Facility 30","Facility 31","Facility 31","Facility 32","Facility 33","Facility 33","Facility 7","Facility 30","Facility 30","Facility 30","Facility 30","Facility 34","Facility 35"],["2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-10","2020-08-10","2020-08-09","2020-08-08","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-10","2020-08-11","2020-08-11","2020-08-09","2020-08-11","2020-08-11","2020-08-12","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-06","2020-08-04","2020-08-11","2020-08-10","2020-08-11","2020-08-11","2020-08-10","2020-08-10","2020-08-07","2020-08-09","2020-08-10","2020-08-11","2020-08-11","2020-08-10"],["Spring","Bolo","Dingo","Bolo","Bolo","Dingo","Dingo","Bolo","Bolo","Bolo","Spring","Bolo","Spring","Bolo","Spring","Dingo","Bolo","Dingo","Barnard","Barnard","Barnard","Bolo","Bolo","Bolo","Barnard","Bolo","Bolo","Bolo","Dingo","Dingo","Bolo","Bolo","Bolo","Spring","Spring","Dingo","Bolo","Bolo","Dingo","Dingo","Spring","Barnard","Barnard","Spring","Bolo","Bolo","Bolo","Bolo","Dingo","Spring"],[11,11,8,16,9,3,4,15,11,19,12,7,27,0,17,36,0,5,6,9,4,7,12,4,14,28,5,11,8,8,21,7,3,7,9,19,28,9,11,7,26,0,4,8,5,25,21,9,4,81],[12,10,5,16,2,1,0,14,11,15,7,1,8,10,15,36,0,1,3,9,4,0,2,7,9,18,3,4,7,7,0,3,2,4,7,4,14,8,2,10,35,2,4,9,9,14,25,20,9,56],[23,5,5,17,6,4,3,13,13,15,13,20,18,24,28,62,0,10,2,16,1,6,18,41,14,5,24,13,16,16,41,13,5,11,33,23,54,10,11,16,30,8,2,11,29,31,38,26,17,96],[46,26,18,49,17,8,7,42,35,49,32,28,53,34,60,134,0,16,11,34,9,13,32,52,37,51,32,28,31,31,62,23,10,22,49,46,96,27,24,33,91,10,10,28,43,70,84,55,30,233]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>location_name<\/th>\n      <th>data_date<\/th>\n      <th>District<\/th>\n      <th>malaria_rdt_0-4<\/th>\n      <th>malaria_rdt_5-14<\/th>\n      <th>malaria_rdt_15<\/th>\n      <th>malaria_tot<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><div id="facet_wrap" class="section level3 unnumbered">
<h3>
<code>facet_wrap()</code><a class="anchor" aria-label="anchor" href="#facet_wrap"><i class="fas fa-link"></i></a>
</h3>
<p>No momento, vamos nos concentrar nas colunas <code>malaria_tot</code> e <code>District</code>. Ignore por enquanto as colunas de contagem por idade. Vamos traçar curvas epidêmicas com <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code>, que produz uma coluna para cada dia com a altura do eixo y sendo especificada com o valor obtido na coluna <code>malaria_tot</code> (os dados já são contagens diárias, então utilizamos <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code> - veja <a href="ggplot-basics.html#ggplot_basics_bars">a seção “Bar plot” abaixo</a>).</p>
<p>Quando adicionamos o comando <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>, especificamos um til e depois a coluna para facetar sobre (neste caso, <code>District</code>). Você pode colocar outra coluna no lado esquerdo do til - isto criará uma faceta para cada combinação - mas recomendamos que você faça isto com <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> em seu lugar. Neste caso de uso, uma faceta é criada para cada valor único de <code>District</code>.</p>
<div class="sourceCode" id="cb1439"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Um gráfico com facetas por distrito </span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">malaria_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">data_date</span>, y <span class="op">=</span> <span class="va">malaria_tot</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span>       <span class="co"># plote a contagem como colunas </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                              <span class="co"># simplifique os paineis de fundo</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>                                         <span class="co"># aficione rótulos, títulos, etc. </span></span>
<span>    x <span class="op">=</span> <span class="st">"Data dos registros"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Casos de malária"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Casos de malária por distrito"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">District</span><span class="op">)</span>                       <span class="co"># As facetas são criadas</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1043-1.png" width="672"></div>
</div>
<div id="facet_grid" class="section level3 unnumbered">
<h3>
<code>facet_grid()</code><a class="anchor" aria-label="anchor" href="#facet_grid"><i class="fas fa-link"></i></a>
</h3>
<p>Podemos utilizar uma abordagem <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> para cruzar duas variáveis. Digamos que queremos cruzar o <code>Distrito</code> (<em>District</em>) e a idade (<em>age</em>). Bem, precisamos fazer algumas transformações de dados nas colunas de idade para obter esses dados no formato “longo”, preferido pelo ggplot. Todos os grupos etários têm suas próprias colunas - queremo-los em uma única coluna chamada <code>faixa_etaria</code> e outra chamada <code>num_casos</code>. Consulte a página em <a href="pivoting.html#pivoting">Pivoteamento de dados</a> para obter mais informações sobre este processo.</p>
<div class="sourceCode" id="cb1440"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">malaria_age</span> <span class="op">&lt;-</span> <span class="va">malaria_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">malaria_tot</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"malaria_rdt_"</span><span class="op">)</span><span class="op">)</span>,  <span class="co"># escolha as colunas que quer pivotear para o formato longo</span></span>
<span>    names_to <span class="op">=</span> <span class="st">"faixa_etaria"</span>,      <span class="co"># column names become age group</span></span>
<span>    values_to <span class="op">=</span> <span class="st">"num_casos"</span>      <span class="co"># values to a single column (num_casos)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    faixa_etaria <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">faixa_etaria</span>, <span class="st">"malaria_rdt_"</span>, <span class="st">""</span><span class="op">)</span>,</span>
<span>    faixa_etaria <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">faixa_etaria</span>, <span class="st">"5-14"</span>, after <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Agora as primeiras 50 linhas dos dados aparecem assim:</p>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-48013b6ce781c51181ec" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-48013b6ce781c51181ec">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1596844800000\" data-max=\"1597104000000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-14&quot;,&quot;15&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"62\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["Facility 1","Facility 1","Facility 1","Facility 2","Facility 2","Facility 2","Facility 3","Facility 3","Facility 3","Facility 4","Facility 4","Facility 4","Facility 5","Facility 5","Facility 5","Facility 6","Facility 6","Facility 6","Facility 6","Facility 6","Facility 6","Facility 5","Facility 5","Facility 5","Facility 5","Facility 5","Facility 5","Facility 5","Facility 5","Facility 5","Facility 7","Facility 7","Facility 7","Facility 8","Facility 8","Facility 8","Facility 9","Facility 9","Facility 9","Facility 10","Facility 10","Facility 10","Facility 11","Facility 11","Facility 11","Facility 12","Facility 12","Facility 12","Facility 13","Facility 13"],["2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-10","2020-08-10","2020-08-10","2020-08-10","2020-08-10","2020-08-10","2020-08-09","2020-08-09","2020-08-09","2020-08-08","2020-08-08","2020-08-08","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11","2020-08-11"],["Spring","Spring","Spring","Bolo","Bolo","Bolo","Dingo","Dingo","Dingo","Bolo","Bolo","Bolo","Bolo","Bolo","Bolo","Dingo","Dingo","Dingo","Dingo","Dingo","Dingo","Bolo","Bolo","Bolo","Bolo","Bolo","Bolo","Bolo","Bolo","Bolo","Spring","Spring","Spring","Bolo","Bolo","Bolo","Spring","Spring","Spring","Bolo","Bolo","Bolo","Spring","Spring","Spring","Dingo","Dingo","Dingo","Bolo","Bolo"],["0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14","15","0-4","5-14"],[11,12,23,11,10,5,8,5,5,16,16,17,9,2,6,3,1,4,4,0,3,15,14,13,11,11,13,19,15,15,12,7,13,7,1,20,27,8,18,0,10,24,17,15,28,36,36,62,0,0]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>location_name<\/th>\n      <th>data_date<\/th>\n      <th>District<\/th>\n      <th>faixa_etaria<\/th>\n      <th>num_casos<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>Quando você passa as duas variáveis para <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code>, o mais fácil é utilizar notação de fórmula (por exemplo <code>x ~ y</code>) onde x corresponde às linhas e y às colunas. Aqui está o gráfico, utilizando <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> para mostrar os gráficos para cada combinação das colunas <code>faixa_etaria</code> e <code>District</code>.</p>
<div class="sourceCode" id="cb1441"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">malaria_age</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">data_date</span>, y <span class="op">=</span> <span class="va">num_casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"darkred"</span>, width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Data dos registros"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Casos de malária"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Casos de malária por distrito e faixa etária"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">District</span> <span class="op">~</span> <span class="va">faixa_etaria</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1046-1.png" width="672"></div>
</div>
<div id="eixos-livres-ou-fixos" class="section level3 unnumbered">
<h3>Eixos livres ou fixos<a class="anchor" aria-label="anchor" href="#eixos-livres-ou-fixos"><i class="fas fa-link"></i></a>
</h3>
<p>As escalas de eixos exibidas quando realizamos o facetamento é por padrão a mesma (ou seja, fixa) em todas as facetas. Isto é útil para a comparação cruzada, mas nem sempre apropriado.</p>
<p>Ao utilizar <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code> ou <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code>, podemos adicionar <code>scales = "free_y"</code> para “liberar” os eixos y dos painéis para escalar adequadamente seu subconjunto de dados. Isto é particularmente útil se as contagens reais forem pequenas para uma das subcategorias e se as tendências forem difíceis de se observar de outra forma. Em vez de “free_y” também podemos escrever “free_x” para fazer o mesmo para o eixo x (por exemplo, para datas) ou apenas “free” para ambos os eixos. Note que em <code>facet_grid</code>, a escala y será a mesma para facetas na mesma linha, e a escala x será a mesma para facetas na mesma coluna.</p>
<p>Ao utilizar somente <code>facet_grid</code>, podemos adicionar <code>space = "free_y"</code> ou <code>space = "free_x"</code> para que a altura ou largura real da faceta seja ponderada para os valores da figura dentro. Isto só funciona se <code>scales = "free"</code> (y ou x) já estiver aplicado.</p>
<div class="sourceCode" id="cb1442"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Eixo y livre</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">malaria_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">data_date</span>, y <span class="op">=</span> <span class="va">malaria_tot</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span>       <span class="co"># plote os dados de contagem como colunas</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                              <span class="co"># simplifique os painel de fundo</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>                                         <span class="co"># adicione rótulos, título, etc.</span></span>
<span></span>
<span>    x <span class="op">=</span> <span class="st">"Data de registro"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Casos de malária"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Casos de malária por distrito - Eixos x e y 'livres'"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">District</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span>        <span class="co"># as facetas são criadas</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1047-1.png" width="672"></div>
<!-- ```{r fig.show='hold', message=FALSE, warning=FALSE, out.width=c('50%', '50%')} -->
<!-- # A) Facet hospitalsation date by hospital, free y axis -->
<!-- ggplot(data = linelist %>% filter(hospital != "Missing"), # filter removes unknown hospital -->
<!--        aes(x = date_hospitalisation ))+ -->
<!--   geom_histogram(binwidth=7) + # Bindwidth = 7 days -->
<!--   labs(title = "A) Histogram with free y axis scales")+ -->
<!--   facet_grid(hospital~., # Facet with hospital as the row  -->
<!--              scales = "free_y") # Free the y scale of each facet -->
<!-- # B) Facet hospitalisation date by hospital, free y axis and vertical spacing -->
<!-- ggplot(data = linelist %>% filter(hospital != "Missing"), # filter removes unknown hospital -->
<!--        aes(x = date_hospitalisation ))+ -->
<!--   geom_histogram(binwidth=7) + # Bindwidth = 7 days -->
<!--   labs(title = "B) Histogram with free y axis scales and spacing")+ -->
<!--   facet_grid(hospital~., # Facet with hospital as the row  -->
<!--              scales = "free_y", # Free the y scale of each facet -->
<!--              space = "free_y") # Free the vertical spacing of each facet to optimise space -->
<!-- ``` -->
</div>
<div id="ordem-dos-fatores-nas-facetas" class="section level3 unnumbered">
<h3>Ordem dos fatores nas facetas<a class="anchor" aria-label="anchor" href="#ordem-dos-fatores-nas-facetas"><i class="fas fa-link"></i></a>
</h3>
<p>Veja este <a href="https://juliasilge.com/blog/reorder-within/">post</a> sobre como reordenar os níveis de um fator <em>dentro</em> de cada faceta.</p>
</div>
</div>
<div id="armazenando-gráficos" class="section level2" number="30.7">
<h2>
<span class="header-section-number">30.7</span> Armazenando gráficos<a class="anchor" aria-label="anchor" href="#armazenando-gr%C3%A1ficos"><i class="fas fa-link"></i></a>
</h2>
<div id="salvando-gráficos-1" class="section level3 unnumbered">
<h3>Salvando gráficos<a class="anchor" aria-label="anchor" href="#salvando-gr%C3%A1ficos-1"><i class="fas fa-link"></i></a>
</h3>
<p>Por padrão, quando você executa um comando ’ggplot()<code>, o gráfico será apresentado no painel Plots do RStudio. Entretanto, você também pode salvar o gráfico como um objeto utilizando o operador de atribuição</code>&lt;-<code>e dando-lhe um nome. Então, ele não será exibido a menos que o próprio nome do objeto seja executado. Você também pode imprimi-lo envolvendo o nome do gráfico com</code>print()`, mas isto só é necessário em certas circunstâncias, como se o gráfico for criado dentro de um <em>loop</em> utilizado para imprimir vários gráficos de uma vez (veja a página <a href="iteration.html#iteration">Iteração, laços e listas</a>).</p>
<div class="sourceCode" id="cb1443"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Atribua o gráfico a um objeto</span></span>
<span></span>
<span></span>
<span><span class="va">age_by_wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age_years</span>, y <span class="op">=</span> <span class="va">wt_kg</span>, color <span class="op">=</span> <span class="va">age_years</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># exiba</span></span>
<span><span class="va">age_by_wt</span>    </span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1048-1.png" width="672"></div>
</div>
<div id="modificando-gráficos-salvos" class="section level3 unnumbered">
<h3>Modificando gráficos salvos<a class="anchor" aria-label="anchor" href="#modificando-gr%C3%A1ficos-salvos"><i class="fas fa-link"></i></a>
</h3>
<p>Uma coisa legal sobre <strong>ggplot2</strong> é que você pode definir um gráfico (como acima), e depois adicionar camadas a ele começando com seu nome. Você não precisa repetir todos os comandos que criaram o gráfico original!</p>
<p>Por exemplo, para modificar o gráfico <code>age_by_wt</code> que foi definida acima, para incluir uma linha vertical aos 50 anos de idade, basta adicionar um <code>+</code> e começar a adicionar camadas adicionais ao gráfico.</p>
<div class="sourceCode" id="cb1444"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_by_wt</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1049-1.png" width="672"></div>
</div>
<div id="exportando-gráficos" class="section level3 unnumbered">
<h3>Exportando gráficos<a class="anchor" aria-label="anchor" href="#exportando-gr%C3%A1ficos"><i class="fas fa-link"></i></a>
</h3>
<p>A exportação de gráficos feitos no ggplot é facilitada com a função <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code> de <strong>ggplot2</strong>. Ela pode funcionar de duas maneiras:</p>
<ul>
<li>
<p>Especifique o nome do objeto do gráfico, depois o caminho do arquivo e o nome com extensão</p>
<ul>
<li>Por exemplo: <code>ggsave(my_plot, here("plots", "my_plot.png"))</code><br>
</li>
</ul>
</li>
<li>
<p>Execute o comando com apenas o parâmetro do caminho de arquivo, para salvar o último gráfico que foi feito</p>
<ul>
<li>Por exemplo: <code>ggsave(here("plots", "my_plot.png"))</code>
</li>
</ul>
</li>
</ul>
<p>Você pode exportar como png, pdf, jpeg, tiff, bmp, svg, ou vários outros tipos de arquivo, especificando a extensão do arquivo no caminho do arquivo.</p>
<p>Você também pode especificar os argumentos <code>width =</code>, (largura) <code>height =</code> (altura), e <code>units =</code> (ou “in”, “cm”, ou “mm”). Você também pode especificar <code>dpi =</code> com um número para a resolução da imagem a ser salva (por exemplo, 300). Veja os detalhes da função digitando <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">?ggsave</a></code> ou lendo a <a href="https://ggplot2.tidyverse.org/reference/ggsave.html">documentação online</a>.</p>
<p>Lembre-se de que você pode utilizar a sintaxe da função <code><a href="https://here.r-lib.org//reference/here.html">here()</a></code> para fornecer o caminho de arquivo desejado. Consulte a página <a href="importing.html#importing">Importar e exportar</a> para obter mais informações.</p>
</div>
</div>
<div id="rótulos" class="section level2" number="30.8">
<h2>
<span class="header-section-number">30.8</span> Rótulos<a class="anchor" aria-label="anchor" href="#r%C3%B3tulos"><i class="fas fa-link"></i></a>
</h2>
<p>Certamente você vai querer adicionar ou ajustar os rótulos (elementos de texto) do gráfico. Estes ajustes são mais facilmente feitos dentro da função <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code> que é adicionada ao gráfico com <code>+</code> tal como os geoms eram.</p>
<p>Dentro de <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code> você pode fornecer <em>strings</em> para estes parâmetros:</p>
<ul>
<li>
<code>x =</code> e <code>y =</code> O título do eixo x e do eixo y (etiquetas)<br>
</li>
<li>
<code>title =</code> O título principal do gráfico</li>
<li>
<code>subtitle =</code> O subtítulo do gráfico, em texto menor abaixo do título<br>
</li>
<li>
<code>caption =</code> A legenda do gráfico, na parte inferior direita por padrão</li>
</ul>
<p>Aqui está um gráfico que fizemos anteriormente, mas com rótulos mais bonitos:</p>
<div class="sourceCode" id="cb1445"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_by_wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">linelist</span>,   <span class="co"># especifique o objeto com os dados</span></span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>     <span class="co"># mapeie as aesthetics para colunas desses dados</span></span>
<span>         x <span class="op">=</span> <span class="va">age</span>,           <span class="co"># mapeie o eixo x para idade (coluna age)            </span></span>
<span>         y <span class="op">=</span> <span class="va">wt_kg</span>,         <span class="co"># mapeie o eixo x para peso (coluna wt_kg)       </span></span>
<span>         color <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>     <span class="co"># mapeie a cor para a idade</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>           <span class="co"># mostre os dados como pontos</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Distribuição de idade e peso"</span>,</span>
<span></span>
<span>    subtitle <span class="op">=</span> <span class="st">"Surto de Ebola fictício, 2014"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Idade em anos"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Peso em quilos"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Idade"</span>,</span>
<span>    caption <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"Dados como em {max(linelist$date_hospitalisation, na.rm=T)}"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">age_by_wt</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1050-1.png" width="672"></div>
<p>Observe como na atribuição do título utilizamos <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> do pacote <strong>stringr</strong> para implantar código R dinâmico dentro do texto da string. O legenda mostrará os “Dados a partir de”: “data que reflete a data máxima de hospitalização na linelist”. Leia mais sobre isto na página em <a href="characters-strings.html#characters-strings">Caracteres e strings</a>.</p>
<p>Uma nota sobre a especificação do título da <em>legenda</em>: Não há nenhum argumento de “título da legenda”, pois você poderia ter múltiplas escalas em sua legenda. Dentro de <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code>, você pode escrever o argumento da <em>aesthetic</em> do gráfico utilizada para criar a legenda, e fornecer o título desta forma. Por exemplo, acima atribuímos <code>color = age</code> para criar a legenda. Portanto, fornecemos <code>color =</code> a <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code> e atribuímos o título da legenda desejada (“Idade” com I maiúsculo). Se você criar a legenda com <code>aes(fill = COLUMN)</code>, então em <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code> você escreveria <code>fill =</code> para ajustar o título dessa legenda. A seção sobre escalas de cores na página <a href="ggplot-tips.html#ggplot-tips">Dicas para o ggplot</a> fornece mais detalhes sobre edição de legendas, e uma abordagem alternativa utilizando funções <code>scales_()</code>.</p>
</div>
<div id="ggplot_basics_themes" class="section level2" number="30.9">
<h2>
<span class="header-section-number">30.9</span> Temas<a class="anchor" aria-label="anchor" href="#ggplot_basics_themes"><i class="fas fa-link"></i></a>
</h2>
<p>Uma das melhores partes do <strong>ggplot2</strong> é a quantidade de controle que você tem sobre o gráfico - você pode definir qualquer coisa! Como mencionado acima, o desenho do gráfico que <em>não</em> está relacionado às formas/geometrias dos dados são ajustados dentro da função <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code>. Por exemplo, a cor de fundo do gráfico, presença/ausência de linhas de grade e a fonte/tamanho/cor/alinhamento do texto (títulos, subtítulos, legendas, texto do eixo…). Estes ajustes podem ser feitos de uma de duas maneiras:</p>
<p>*Adicionar um <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html"><em>tema completo</em></a> <code>theme_()</code>função para fazer ajustes de varredura - estes incluem <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic()</a></code>, <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal()</a></code>, <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_dark()</a></code>, <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light()</a></code>theme_grey()<code>,</code>theme_bw()` entre outros</p>
<ul>
<li>Ajuste cada pequeno aspecto do gráfico individualmente dentro de <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code>
</li>
</ul>
<div id="temas-completos" class="section level3 unnumbered">
<h3>Temas completos<a class="anchor" aria-label="anchor" href="#temas-completos"><i class="fas fa-link"></i></a>
</h3>
<p>Como eles são bastante diretos, demonstraremos as funções temáticas completas abaixo e não as descreveremos mais aqui. Note que quaisquer micro-ajustes com <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> devem ser feitos <em>após</em> a utilização de um tema completo.</p>
<p>Escreva-os com parênteses vazios.</p>
<div class="sourceCode" id="cb1446"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">wt_kg</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"darkgreen"</span>, size <span class="op">=</span> <span class="fl">0.5</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tema classic"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">wt_kg</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"darkgreen"</span>, size <span class="op">=</span> <span class="fl">0.5</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tema bw"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">wt_kg</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"darkgreen"</span>, size <span class="op">=</span> <span class="fl">0.5</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tema minimal"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">wt_kg</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"darkgreen"</span>, size <span class="op">=</span> <span class="fl">0.5</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tema gray"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_gray</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1051-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1051-2.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1051-3.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1051-4.png" width="50%"></p>
</div>
<div id="modifique-o-tema" class="section level3 unnumbered">
<h3>Modifique o tema<a class="anchor" aria-label="anchor" href="#modifique-o-tema"><i class="fas fa-link"></i></a>
</h3>
<p>A função <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> pode levar um grande número de argumentos, cada um dos quais edita um aspecto muito específico do gráfico. Não há como cobrir todos os argumentos, mas vamos descrever o padrão geral para eles e mostrar-lhe como encontrar o nome do argumento que você precisa. A sintaxe básica é esta:</p>
<ol style="list-style-type: decimal">
<li>Dentro de <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> escreva o nome do argumento para o elemento do gráfico que você deseja editar, como <code>plot.title =</code><br>
</li>
<li>Fornecer uma função <code>element_()</code> para o argumento<br>
</li>
</ol>
<ul>
<li>Na maioria das vezes, utilize <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text()</a></code>, mas outros incluem <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect()</a></code> para cores de fundo de tela, ou <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank()</a></code> para remover os elementos do gráfico</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Dentro da função <code>element_()</code>, escreva atribuições de argumentos para fazer os ajustes finos que você deseja</li>
</ol>
<p>Essa descrição foi bastante abstrata, portanto, aqui estão alguns exemplos.</p>
<p>O gráfico abaixo parece bastante tolo, mas serve para mostrar uma variedade de maneiras de ajustar seu gráfico.</p>
<ul>
<li>Começamos com o gráfico <code>age_by_wt</code> definido logo acima e acrescentamos <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic()</a></code><br>
</li>
<li>Para ajustes mais finos, adicionamos <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> e incluímos um argumento para cada elemento do gráfico a ser ajustado</li>
</ul>
<p>Pode ser bom organizar os argumentos em seções lógicas. Para descrever apenas alguns dos utilizados abaixo:</p>
<ul>
<li>
<code>legend.position =</code> é único no sentido de aceitar valores simples como “bottom”, “top”, “left”, e “right”. Mas geralmente, os argumentos relacionados ao texto exigem que você coloque os detalhes <em>no</em> <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text()</a></code>.<br>
</li>
<li>tamanho do título com <code>element_text(size = 30)</code>.<br>
</li>
<li>O alinhamento horizontal do título com <code>element_text(hjust = 0)</code> (da direita para a esquerda)<br>
</li>
<li>O subtítulo está em itálico com <code>element_text(face = "italic")</code>
</li>
</ul>
<div class="sourceCode" id="cb1447"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_by_wt</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                 <span class="co"># ajustes de tema pré-definidos</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>,                    <span class="co"># move a legenda  para baixo</span></span>
<span>    </span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>,          <span class="co"># ajusta o tamanho do título para 30</span></span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,        <span class="co"># alinha a Legenda da figura a esquerda</span></span>
<span>    plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"italic"</span><span class="op">)</span>, <span class="co"># deixa subtítulo em itálico</span></span>
<span></span>
<span>    </span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">15</span>, angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span>, <span class="co"># ajusta o texto o eixo x </span></span>
<span>    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span>,         <span class="co"># ajusta o texto o eixo y</span></span>
<span>    </span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>           <span class="co"># ajusta o texto de ambos os eixos</span></span>
<span>    <span class="op">)</span>     </span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1052-1.png" width="672"></div>
<p>Aqui estão alguns argumentos especialmente comuns em <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code>. Você reconhecerá alguns padrões, tais como acrescentar <code>.x' ou</code>.y’ para aplicar a mudança somente em um eixo.</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="50%">
<col width="49%">
</colgroup>
<thead><tr class="header">
<th>Argumento <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code>
</th>
<th>O que é ajustado</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>plot.title = element_text()</code></td>
<td>O título</td>
</tr>
<tr class="even">
<td><code>plot.subtitle = element_text()</code></td>
<td>O subtítulo</td>
</tr>
<tr class="odd">
<td><code>plot.caption = element_text()</code></td>
<td>A legenda da figura (parâmetros: family, face, color, size, angle,…)</td>
</tr>
<tr class="even">
<td><code>axis.title = element_text()</code></td>
<td>Títulos e ambos eixos (ambos x e y) (parâmetros: size, face, color…)</td>
</tr>
<tr class="odd">
<td><code>axis.title.x = element_text()</code></td>
<td>Título do eixo x (use <code>.y</code> para apenas eixo Y)</td>
</tr>
<tr class="even">
<td><code>axis.text = element_text()</code></td>
<td>Texto do eixo x (ambos x and y)</td>
</tr>
<tr class="odd">
<td><code>axis.text.x = element_text()</code></td>
<td>Texto do eixo x (use <code>.y</code> para apenas eixo Y)</td>
</tr>
</tbody>
</table></div>
<p><code>axis.ticks = element_blank()</code> |Remove marcações de escalas do eixo
<code>axis.line = element_line()</code> |Linhas do eixo (parâmetros: colour, linetype: solid dashed dotted etc)
<code>strip.text = element_text()</code> |Texto do rótulo da faceta (parâmetros: colour, face, size, angle…)
<code>strip.background = element_rect()</code>|Rótulo da faceta (parâmetros: fill, colour, size…)</p>
<p>Mas há tantos argumentos para temas! Como eu poderia me lembrar de todos eles? Não se preocupe - é impossível lembrar-se de todos eles. Felizmente, existem algumas ferramentas para ajudá-lo:</p>
<p>A documentação sobre <a href="https://ggplot2.tidyverse.org/reference/theme.html">modificação do tema</a>, que tem uma lista completa.</p>
<p><span style="color: darkgreen;"><strong><em>DICA:</em></strong> Rode <code><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_get()</a></code> do <strong>ggplot2</strong> para listar os mais de 90 argumentos da função <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> no console .</span></p>
<p><span style="color: darkgreen;"><strong><em>DICA:</em></strong> Se você em algum momento quiser remover um elemento do gráfico, você também o pode fazer com o <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code>. Apenas passe o parâmetro <code><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank()</a></code> para um argumento para que ele desapareca completamente. Para legendas, configure <code>legend.position = "none".</code></span></p>
</div>
</div>
<div id="cores" class="section level2" number="30.10">
<h2>
<span class="header-section-number">30.10</span> Cores<a class="anchor" aria-label="anchor" href="#cores"><i class="fas fa-link"></i></a>
</h2>
<p>Por favor veja <a href="ggplot-tips.html#ggplot_tips_colors">a seção sobre escala de cores na página de dicas do ggplot</a>.</p>
</div>
<div id="usando-o-pipe-no-ggplot2" class="section level2" number="30.11">
<h2>
<span class="header-section-number">30.11</span> Usando o pipe (%&gt;%) no <strong>ggplot2</strong><a class="anchor" aria-label="anchor" href="#usando-o-pipe-no-ggplot2"><i class="fas fa-link"></i></a>
</h2>
<p>Ao utilizar <em>pipes</em> (%&gt;%) para limpar e transformar seus dados, é fácil passar os dados transformados em <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>.</p>
<p>Os <em>pipes</em> que passam o conjunto de dados de função para função passarão a ser um símbolo de mais <code>+</code> assim que a função <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> for chamada. Observe que, neste caso, não há necessidade de especificar o argumento <code>data =</code> (data), pois este é automaticamente definido como o conjunto de dados que vinha sendo usado no <em>pipe</em>.</p>
<p>Esta é a aparência que pode ter:</p>
<div class="sourceCode" id="cb1448"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># comece com a linelist</span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>tosse<span class="op">=</span><span class="va">cough</span>,</span>
<span>         febre<span class="op">=</span><span class="va">fever</span>, </span>
<span>         vômito<span class="op">=</span><span class="va">vomit</span>,</span>
<span>         dores<span class="op">=</span><span class="va">aches</span>,</span>
<span>         calafrio<span class="op">=</span><span class="va">chills</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co">#traduzindo o nome dos sintomas pois a base está em inglês</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">febre</span>, <span class="va">calafrio</span>, <span class="va">tosse</span>, <span class="va">dores</span>, <span class="va">vômito</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># selecione as colunas</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>                                                  <span class="co"># faça o pivotamento para ficar mais longo</span></span>
<span>    cols <span class="op">=</span> <span class="op">-</span><span class="va">case_id</span>,                                  </span>
<span>    names_to <span class="op">=</span> <span class="st">"nome_sintoma"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"sintoma_esta_presente"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>                                                        <span class="co"># substitua valores faltantes</span></span>
<span>    sintoma_esta_presente <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">sintoma_esta_presente</span>, <span class="st">"desconhecido"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>                                                        <span class="co"># comece o gráfico!</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">nome_sintoma</span>, fill <span class="op">=</span> <span class="va">sintoma_esta_presente</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"fill"</span>, col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>                    </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Sintoma"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Status do sintoma (proporção)"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1053-1.png" width="672"></div>
</div>
<div id="fazer-gráficos-de-dados-contínuos" class="section level2" number="30.12">
<h2>
<span class="header-section-number">30.12</span> Fazer gráficos de dados contínuos<a class="anchor" aria-label="anchor" href="#fazer-gr%C3%A1ficos-de-dados-cont%C3%ADnuos"><i class="fas fa-link"></i></a>
</h2>
<p>Ao longo desta página, você já viu muitos exemplos de gráficos de dados contínuos. Aqui nós os consolidamos brevemente e apresentamos algumas variações.</p>
<p>As visualizações aqui abordadas incluem:</p>
<p><em>Gráficos para uma variável contínua:<br></em> <strong>Histograma</strong>, um gráfico clássico para apresentar a distribuição de uma variável contínua.
* <strong>Diagramas de caixa</strong> (box-plots), para mostrar os percentis 25%, 50% e 75%, pontas de cauda da distribuição e outliers (<a href="https://www.data-to-viz.com/caveat/boxplot.html">limitações importantes</a>).<br>
* <strong>Gráfico Jitter</strong>, para mostrar todos os valores como pontos que estão ‘tremidos’ para que possam (principalmente) ser todos vistos, mesmo onde dois têm o mesmo valor.<br>
* <strong>Gráfico Violino</strong>, mostrar a distribuição de uma variável contínua com base na largura simétrica do ‘violino’.
* <strong>Gráfico Sina</strong>, são uma combinação de gráficos de jitter e violino, onde são mostrados pontos individuais mas na forma simétrica da distribuição (via <strong>ggforce</strong> pacote). (Nota do Tradutor: Jitter em inglês significa “agitado, nervoso” e se remete ao fato dos pontos, nesse gráfico ficarem mais “espalhados” de forma a não ficarem sobrepostos )
* <strong>Gráfico de dispersão</strong> Para duas variáveis contínuas.<br>
* <strong>Gráficos de calor</strong> para três variáveis contínuas (ligados à página <a href="heatmaps.html#heatmaps">gráficos de calor</a>)</p>
<div id="histogramas" class="section level3 unnumbered">
<h3>Histogramas<a class="anchor" aria-label="anchor" href="#histogramas"><i class="fas fa-link"></i></a>
</h3>
<p>Os histogramas podem parecer gráficos de barras, mas são distintos porque medem a distribuição de uma variável <em>contínua</em>. Não há espaços entre as “barras”, e apenas uma coluna é fornecida ao <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>.</p>
<p>Abaixo está o código para gerar <strong>histogramas</strong>, que agrupam dados contínuos em intervalos e exibem em barras adjacentes de altura variável. Isto é feito utilizando o <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>. Ver a secção <a href="ggplot-basics.html#ggplot_basics_bars">“Gráfico de barra”</a> da página básico do ggplot para compreender a diferença entre <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>, <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code>, e <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code>.</p>
<p>Mostraremos a distribuição das idades dos casos. Dentro de <code>mapping = aes()</code> especifique a coluna de que deseja ver a distribuição. Pode atribuir esta coluna ao eixo x ou ao eixo y.</p>
<p>As linhas serão atribuídas a “caixas/classes” com base na sua idade numérica, e estas classes serão representadas graficamente por barras. Se especificar um número de classes com a <em>aesthetic</em> <code>bins =</code>, os pontos de quebra são uniformemente espaçados entre os valores mínimo e máximo do histograma. Se <code>bins =</code> não estiver especificado, será adivinhado um número apropriado de classes e esta mensagem será exibida após o gráfico:</p>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p>Se não quiser especificar um número de classes para <code>bins =</code>, pode, em alternativa, especificar <code>binwidth =</code> nas unidades do eixo. Apresentamos alguns exemplos que mostram diferentes quantidades e larguras de classes:</p>
<div class="sourceCode" id="cb1450"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A) Histograma regular</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># forneça a variável do eixo x</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"A) Histograma padrão (30 classes)"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># B) Mais classes</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># forneça a variável do eixo x</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"B) Ajustado para 50 classes"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># C) Menos classes</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># forneça a variável do eixo x</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"C) Ajustado para 5 classes"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># D) Mais classes</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>  <span class="co"># forneça a variável do eixo x</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"D) Largura da classe = 1"</span><span class="op">)</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1054-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1054-2.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1054-3.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1054-4.png" width="50%"></p>
<p>Para obter proporções suavizadas, pode utilizar <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code>:</p>
<div class="sourceCode" id="cb1451"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Frequencia com eixos de proporção, suavizadas. </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Densidade proporcional"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Frequência empilhada com eixo proporcional, suavizada </span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, fill <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">0.2</span>, position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">" Densidades proporcionais 'empilhada'"</span><span class="op">)</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1055-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1055-2.png" width="50%"></p>
<p>Para obter um histograma “empilhado” (de uma coluna contínua de dados), você pode fazer uma das seguintes ações:</p>
<ol style="list-style-type: decimal">
<li>Utilize <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> com o <code>fill =</code> argumento dentro de <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> e atribuído à coluna de agrupamento, ou<br>
</li>
<li>Utilize <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly()</a></code>, que provavelmente é mais fácil de ler (você ainda pode definir <code>binwidth =</code>)<br>
</li>
<li>Para ver as proporções de todos os valores, defina o <code>y = after_stat(density)</code> (utilize esta sintaxe exatamente - não alterada para seus dados). Nota: estas proporções mostrarão <em>por grupo</em>.</li>
</ol>
<p>Cada uma delas é mostrada abaixo (*notar a utilização de <code>color =</code> vs. <code>fill =</code> em cada uma):</p>
<div class="sourceCode" id="cb1452"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Histograma *empilhado*</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, fill <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"histograma 'empilhado'"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Frequência</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, color <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">2</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Polígono de frequência"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Freqüência com eixo de proporção </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">after_stat</a></span><span class="op">(</span><span class="va">density</span><span class="op">)</span>, color <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">5</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Polígono de frequência proporcional"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Freqüência com eixo de proporção , suavizado</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">after_stat</a></span><span class="op">(</span><span class="va">density</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Proportional, suavizado com geom_density()"</span><span class="op">)</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1056-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1056-2.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1056-3.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1056-4.png" width="50%"></p>
<p>Se você quiser se divertir, tente ‘geom_density_ridges’ do pacote <strong>ggridges</strong>* (<a href="https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html">vinheta aqui</a>.</p>
<p>Leia mais em detalhes sobre histogramas no <strong>tidyverse</strong> <a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">página em geom_histogram()</a>.</p>
</div>
<div id="box-plots" class="section level3 unnumbered">
<h3>Box plots<a class="anchor" aria-label="anchor" href="#box-plots"><i class="fas fa-link"></i></a>
</h3>
<p>Os bos-plots são comuns, mas têm limitações importantes. Elas podem obscurecer a distribuição real - por exemplo, uma distribuição bi-modal. Veja este <a href="https://www.r-graph-gallery.com/boxplot.html">galeria de gráficos R</a> e este <a href="https://www.data-to-viz.com/caveat/boxplot.html">artigo data-to-viz</a> para mais detalhes. Entretanto, eles exibem bem a faixa inter-quartil e aberturas - de modo que podem ser sobrepostos em cima de outros tipos de gráficos que mostram a distribuição em mais detalhes.</p>
<p>Abaixo lembramos os vários componentes de um boxplot:</p>
<div class="inline-figure"><img src="images/boxplot.png" width="100%" style="display: block; margin: auto;"></div>
<p>Ao utilizar <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code> para criar diagrama de caixas (box-plot), você geralmente mapeia apenas um eixo (x ou y) dentro de <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>. O eixo especificado determina se as parcelas são horizontais ou verticais.</p>
<p>Na maioria dos geoms, você cria um gráfico por grupo mapeando uma estética como <code>color =</code> ou <code>fill =</code> para uma coluna dentro de <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>. Entretanto, para box-plots, isso é conseguido atribuindo a coluna de agrupamento ao eixo não atribuído (x ou y). Abaixo está o código para um boxplot de <em>todos</em> os valores de idade no conjunto de dados, e o segundo é o código para exibir um box plot para cada sexo (não-faltante) no conjunto de dados. Observe que os valores <code>NA</code> (ausentes) aparecerão como um gráfico de caixa separado, a menos que seja removido. Neste exemplo, também definimos o <code>fill</code> para a coluna <code>outcome</code>, para que cada gráfico seja de uma cor diferente - mas isto não é necessário.</p>
<div class="sourceCode" id="cb1453"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A) Boxplot geral</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span><span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>   <span class="co"># apenas o y é mapeado</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"A) Boxplot geral"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># B) Box plot por grupo</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">age</span>, x <span class="op">=</span> <span class="va">gender</span>, fill <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                     </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span><span class="op">+</span>   <span class="co"># remove a legenda</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"B) Box plot por sexo"</span><span class="op">)</span>      </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1058-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1058-2.png" width="50%"></p>
<p>Para obter o código para adicionar um boxplot às bordas de um gráfico de dispersão (gráficos “marginais”) veja a página [Dicas para o ggplot].</p>
</div>
<div id="gráficos-violino-jitter-sina" class="section level3 unnumbered">
<h3>Gráficos: Violino, jitter, sina<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos-violino-jitter-sina"><i class="fas fa-link"></i></a>
</h3>
<p>Below is code for creating <strong>violin plots</strong> (<code>geom_violin</code>) and <strong>jitter plots</strong> (<code>geom_jitter</code>) to show distributions. You can specify that the fill or color is also determined by the data, by inserting these options within <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>.</p>
<div class="sourceCode" id="cb1454"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A) Gráfico de jitter por grupo</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span>,      <span class="co"># remove valores faltantes</span></span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">age</span>,                     <span class="co"># variável contínua escolhida</span></span>
<span>           x <span class="op">=</span> <span class="va">outcome</span>,                           <span class="co"># variável de agrupamento</span></span>
<span>           color <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                     <span class="co"># variável para cor</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                  <span class="co"># criar o gráfico ´Jitter</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"A) Um grafico 'jitter' por gênero"</span> <span class="op">)</span>  </span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># B) Gráfico de violino</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span>,       <span class="co"># remove valores faltantes</span></span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">age</span>,                      <span class="co"># Variável contínua</span></span>
<span>           x <span class="op">=</span> <span class="va">outcome</span>,                            <span class="co"># Variável de agrupamento</span></span>
<span>           fill <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                       <span class="co"># variável de cor para preenchimento</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                   <span class="co"># criar o gráfico de violino</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"B) Gráfico de violino por gênero"</span><span class="op">)</span>    </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1059-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1059-2.png" width="50%"></p>
<p>Você pode combinar os dois utilizando a função <code>geom_sina()</code> do pacote <strong>ggforce</strong>. Esse gráfico traça os pontos do gráfico <em>jitter</em> na forma do gráfico de violino. Quando sobrepostos (ajustando as transparências), isto pode ser mais fácil de interpretar visualmente.</p>
<div class="sourceCode" id="cb1455"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Um gráfico Sina por grupo</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span>, </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">age</span>,           <span class="co"># variável numérica</span></span>
<span>      x <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>    <span class="co"># variável de agrupamento</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span>, <span class="co"># mapeie o preenchimento (cor do fundo do violino) segundo uma coluna</span></span>
<span>    color <span class="op">=</span> <span class="st">"white"</span>,     <span class="co"># borda exterior branca</span></span>
<span>    alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">+</span>        <span class="co"># transparencia</span></span>
<span>  <span class="fu">geom_sina</span><span class="op">(</span></span>
<span>    size<span class="op">=</span><span class="fl">1</span>,                <span class="co"># Mude o tamanho do "jitter"</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span><span class="op">)</span><span class="op">+</span> <span class="co"># cor dos pontos</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>       <span class="co"># defina as cores de preenchimento do violino</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Death"</span> <span class="op">=</span> <span class="st">"#bf5300"</span>, <span class="co">#óbito</span></span>
<span>              <span class="st">"Recover"</span> <span class="op">=</span> <span class="st">"#11118c"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># recuperado</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>      <span class="co"># defina as cores de preenchimento dos pontos</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Death"</span> <span class="op">=</span> <span class="st">"#bf5300"</span>, </span>
<span>              <span class="st">"Recover"</span> <span class="op">=</span> <span class="st">"#11118c"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>                                <span class="co"># Remove o fundo cinza</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>                <span class="co"># Remove legendas desnecessárias</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Gráfico Sina e Violino por gênero, com formtações extras"</span><span class="op">)</span>      </span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1060-1.png" width="672"></div>
</div>
<div id="duas-variáveis-contínuas" class="section level3 unnumbered">
<h3>Duas variáveis contínuas<a class="anchor" aria-label="anchor" href="#duas-vari%C3%A1veis-cont%C3%ADnuas"><i class="fas fa-link"></i></a>
</h3>
<p>Seguindo uma sintaxe semelhante, <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> permitirá traçar duas variáveis contínuas uma contra a outra em uma <strong>gráfico de dispersão</strong>. Isto é útil para mostrar os valores reais ao invés de suas distribuições. Um gráfico básico de dispersão de idade vs peso é mostrado em (A). Em (B) utilizamos novamente <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code> para mostrar a relação entre duas variáveis contínuas na linelist.</p>
<div class="sourceCode" id="cb1456"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Gráfico de dispersão básico para idade e peso</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, </span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">wt_kg</span>, x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"A) Gráfico de dispesão para idade e peso"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Gráfico de dispersão de peso e idade por gênero e desfecho para o Ebola </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">outcome</span><span class="op">)</span>, <span class="co"># filtro mantém apenas gênero e desfecho não faltantes</span></span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">wt_kg</span>, x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"B) Gráfico de dispersão do peso por idade facetado para gênero e desfecho"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">~</span> <span class="va">outcome</span><span class="op">)</span> </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1061-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1061-2.png" width="50%"></p>
</div>
<div id="três-variáveis-contínuas" class="section level3 unnumbered">
<h3>Três variáveis contínuas<a class="anchor" aria-label="anchor" href="#tr%C3%AAs-vari%C3%A1veis-cont%C3%ADnuas"><i class="fas fa-link"></i></a>
</h3>
<p>Você pode exibir três variáveis contínuas utilizando o argumento <code>fill =</code> para criar um <em>gráfico de calor</em>. A cor de cada “célula” irá refletir o valor da terceira coluna contínua de dados. Veja a página <a href="ggplot-tips.html#ggplot-tips">Dicas para o ggplot</a> e a página em <a href="heatmaps.html#heatmaps">Gráficos de calor</a> para mais detalhes e vários exemplos.</p>
<p>Existem maneiras de fazer gráficos 3D em R, mas para a epidemiologia aplicada, estes são freqüentemente difíceis de interpretar e, portanto, menos úteis para a tomada de decisões.</p>
</div>
</div>
<div id="gráficos-de-dados-categóricos" class="section level2" number="30.13">
<h2>
<span class="header-section-number">30.13</span> Gráficos de dados categóricos<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos-de-dados-categ%C3%B3ricos"><i class="fas fa-link"></i></a>
</h2>
<p>Dados categóricos podem ser variáveis do tipo caractere ou variáveis lógicas (TRUE/FALSE. VERDADEIRO/FALSO), ou ainda fatores (veja a página <a href="factors.html#factors">Fatores</a>).</p>
<div id="preparação-21" class="section level3 unnumbered">
<h3>Preparação<a class="anchor" aria-label="anchor" href="#prepara%C3%A7%C3%A3o-21"><i class="fas fa-link"></i></a>
</h3>
<div id="estrutura-dos-dados" class="section level4 unnumbered">
<h4>Estrutura dos dados<a class="anchor" aria-label="anchor" href="#estrutura-dos-dados"><i class="fas fa-link"></i></a>
</h4>
<p>A primeira coisa a entender sobre seus dados categóricos é se eles em sua forma bruta existem observações como uma lista de casos, ou como um quadro resumido ou agregados que contém contagens ou proporções. O estado de seus dados terá impacto na função de gráficos que você utiliza:</p>
<ul>
<li>Se seus dados forem observações em bruto com uma linha por observação, você provavelmente utilizará <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code><br>
</li>
<li>Se seus dados já estiverem agregados em contagens ou proporções, você provavelmente utilizará <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code>
</li>
</ul>
</div>
<div id="classe-da-coluna-e-ordenamento-dos-valores" class="section level4 unnumbered">
<h4>Classe da coluna e ordenamento dos valores<a class="anchor" aria-label="anchor" href="#classe-da-coluna-e-ordenamento-dos-valores"><i class="fas fa-link"></i></a>
</h4>
<p>Em seguida, examine a classe das colunas que você deseja traçar. Examinamos <code>hospital</code>, primeiro com a função <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> do R <strong>base</strong>, e com <code>tabyl()</code> dO pacote <strong>janitor</strong>.</p>
<div class="sourceCode" id="cb1457"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Veja a classe da coluna hospital - podemos ver que é um caracter</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">hospital</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<div class="sourceCode" id="cb1459"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Veja os valores e proporções dentro dessa coluna "hospital" </span></span>
<span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span></span></code></pre></div>
<pre><code>##                              hospital    n    percent
##                               Ausente 1469 0.24949049
##                      Central Hospital  454 0.07710598
##                     Military Hospital  896 0.15217391
##                                 Other  885 0.15030571
##                         Port Hospital 1762 0.29925272
##  St. Mark's Maternity Hospital (SMMH)  422 0.07167120</code></pre>
<p>Podemos ver que os valores dentro são caracteres, pois se tratam de nomes de hospitais, e por padrão são ordenados alfabeticamente. Existem também “outros” e “faltam” valores, que preferimos que sejam as últimas subcategorias ao apresentarmos as subdivisões. Portanto, transformamos esta coluna em um fator e a reordenamos. Isto é tratado com mais detalhes na página <a href="factors.html#factors">Fatores</a>.</p>
<div class="sourceCode" id="cb1461"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Converte para fator e define a ordem dos níveis para que "Other" (outros) e "Missing" (faltantes) sejam os últimos a aparecer </span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    hospital <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">hospital</span>, </span>
<span>      <span class="st">"St. Mark's Maternity Hospital (SMMH)"</span>,</span>
<span>      <span class="st">"Port Hospital"</span>, </span>
<span>      <span class="st">"Central Hospital"</span>,</span>
<span>      <span class="st">"Military Hospital"</span>,</span>
<span>      <span class="st">"Other"</span>,</span>
<span>      <span class="st">"Missing"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: There was 1 warning in `mutate()`.
## ℹ In argument: `hospital = fct_relevel(...)`.
## Caused by warning:
## ! 1 unknown level in `f`: Missing</code></pre>
<div class="sourceCode" id="cb1463"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">hospital</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "St. Mark's Maternity Hospital (SMMH)" "Port Hospital"                       
## [3] "Central Hospital"                     "Military Hospital"                   
## [5] "Other"                                "Ausente"</code></pre>
</div>
</div>
<div id="ggplot_basics_bars" class="section level3 unnumbered">
<h3>
<code>geom_bar()</code><a class="anchor" aria-label="anchor" href="#ggplot_basics_bars"><i class="fas fa-link"></i></a>
</h3>
<p>Utilize <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> se você quiser que a altura da barra (ou a altura dos componentes da barra empilhada) reflita <em>o número de linhas relevantes nos dados</em>. Essas barras terão espaços entre elas, a menos que a <em>aesthetic</em> largura ( <code>width =</code> ) esteja ajustada.</p>
<ul>
<li>Forneça apenas uma atribuição de coluna de um eixo (tipicamente eixo x). Se você fornecer x e y, você receberá <code>Error: stat_count() só pode ter uma estética x ou y.</code><br>
</li>
<li>Você pode criar barras empilhadas, adicionando uma atribuição de <code>fill =</code> coluna dentro de <code>mapping = aes()</code>.<br>
</li>
<li>O eixo oposto será intitulado “count” por padrão, pois representa o número de linhas</li>
</ul>
<p>A seguir, designamos o resultado para o eixo y, mas poderia ser igualmente fácil no eixo x. Se você tiver valores de caracteres mais longos, às vezes pode parecer melhor virar as barras para o lado e colocar a legenda embaixo. Isto pode ter impacto na forma como os níveis do seu fator são ordenados - neste caso os revertemos com <code><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev()</a></code> para colocar “Other” e “Missing” na parte inferior.</p>
<div class="sourceCode" id="cb1465"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A) Desfecho em todos os casos</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"A) Número de casos por hospital"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Hospital"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># B) Desfecho em todos os casos por hospital</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"B) Número de casos de Ebola recuperados e de óbitos,   por hospital"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Hospital"</span><span class="op">)</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-1065-1.png" width="50%"><img src="_main_files/figure-html/unnamed-chunk-1065-2.png" width="50%"></p>
</div>
<div id="geom_col" class="section level3 unnumbered">
<h3>
<code>geom_col()</code><a class="anchor" aria-label="anchor" href="#geom_col"><i class="fas fa-link"></i></a>
</h3>
<p>Utilize <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code> se você quiser que a altura da barra (ou altura dos componentes da barra empilhados) reflita os <em>valores</em> pré-calculados que existem nos dados. Muitas vezes, estas são contagens sumárias ou “agregadas”, ou proporções.</p>
<p>Forneça atribuições de colunas para <em>ambos</em> eixos para <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code>. Normalmente, sua coluna do eixo x é discreta e sua coluna do eixo y é numérica.</p>
<p>Digamos que temos este conjunto de dados “resultados”:</p>
<pre><code>## # A tibble: 2 × 3
##   outcome        n proporcao
##   &lt;chr&gt;      &lt;int&gt;     &lt;dbl&gt;
## 1 Recuperado   796      43.8
## 2 Óbito       1022      56.2</code></pre>
<p>Abaixo está o código utilizando <code>geom_col</code> para criar gráficos de barras simples para mostrar a distribuição dos resultados dos pacientes com Ebola. Com o geom_col, tanto x como y precisam ser especificados. Aqui x é a variável categórica ao longo do eixo x, e y é a coluna de proporções geradas <code>proporcao</code>.</p>
<div class="sourceCode" id="cb1467"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Desfecho em todos os casos</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">outcomes</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">outcome</span>, y <span class="op">=</span> <span class="va">proporcao</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"Número de casos recuperados e óbitos de Ebola"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1067-1.png" width="432"></div>
<p>Para mostrarmos as detalhamentos por hospital, precisaríamos que nossa tabela contivesse mais informações e que estivesse em formato “longo”. Criamos esta tabela com as freqüências das categorias combinadas <code>outcome</code> (Desfecho) e <code>hospital</code> (ver página <a href="grouping.html#grouping">Agrupando dados</a> para dicas de agrupamento).</p>
<div class="sourceCode" id="cb1468"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomes2</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># obtém contagens para hospital e desfecho </span></span>
<span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>        <span class="co"># Agrupa para que proporção esteja fora do total do hospital </span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>proportion <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span> <span class="co"># Calcula as proporções</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">outcomes2</span><span class="op">)</span> <span class="co"># Veja uma prévia dos dados</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
## # Groups:   hospital [3]
##   hospital                             outcome     n proportion
##   &lt;fct&gt;                                &lt;chr&gt;   &lt;int&gt;      &lt;dbl&gt;
## 1 St. Mark's Maternity Hospital (SMMH) Death     199       61.2
## 2 St. Mark's Maternity Hospital (SMMH) Recover   126       38.8
## 3 Port Hospital                        Death     785       57.6
## 4 Port Hospital                        Recover   579       42.4
## 5 Central Hospital                     Death     193       53.9
## 6 Central Hospital                     Recover   165       46.1</code></pre>
<p>Criamos então o ggplot com alguma formatação adicional:</p>
<ul>
<li>
<strong>Rotação do eixo</strong>: Trocamos o eixo com <code><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip()</a></code> para que pudéssemos ler os nomes dos hospitais.</li>
<li>
<strong>Colunas lado a lado</strong>: Acrescentou o argumento <code>position = "dodge"</code> para que as barras de óbitos e recuperação sejam apresentadas lado a lado em vez de empilhadas. Note que as barras empilhadas são o padrão.</li>
<li>
<strong>Largura da coluna</strong>: Largura especificada, de modo que as colunas são agora metade da largura normal.</li>
<li>
<strong>Ordem das colunas</strong>: Inverteu a ordem das categorias no eixo y para que ‘Other’ (Outros) e ‘Missing’ (Faltantes) estejam na parte inferior, com <code>scale_x_discrete(limits=rev)</code>. Note que utilizamos isso em vez de <code>scale_y_discrete</code> porque o hospital é indicado no argumento ‘x’ de ’aes()`, mesmo que visualmente esteja no eixo y. Fazemos isso porque ggplot parece apresentar categorias ao contrário, a menos que digamos lhe o contrário.<br>
</li>
<li>
<strong>Outros detalhes</strong>: Etiquetas/títulos e cores adicionadas dentro de <code>labs</code> e <code>scale_fill_color</code> respectivamente.</li>
</ul>
<div class="sourceCode" id="cb1470"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Desfecho em todos os casos por hospital</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">outcomes2</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">proportion</span>,                 <span class="co"># apresenta os dados calculados previamente</span></span>
<span>      y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span>,          <span class="co"># reordenas os níveis do fator, colocando na base os desejados </span></span>
<span>      fill <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span>,                <span class="co"># empilhados por desfecho</span></span>
<span>    width <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">+</span>                     <span class="co"># barras mais finas (valores menores que 1)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>                   <span class="co"># Tema mínimo</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"Número de casos recuperados e óbitos por Ebola, por hospital"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Desfecho"</span>,             <span class="co"># título da legenda</span></span>
<span>       y <span class="op">=</span> <span class="st">"Contagem"</span>,                <span class="co"># título do eixo y</span></span>
<span>       x <span class="op">=</span> <span class="st">"Hospital de admissão"</span><span class="op">)</span><span class="op">+</span>   <span class="co"># título do eixo x</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>                 <span class="co"># escolhendo as cores manualmente</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Death"</span><span class="op">=</span> <span class="st">"#3B1c8C"</span>,   <span class="co"># para óbito</span></span>
<span>               <span class="st">"Recover"</span> <span class="op">=</span> <span class="st">"#21908D"</span> <span class="op">)</span><span class="op">)</span> <span class="co"># para recuperado</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-1069-1.png" width="768"></div>
<p>Note que as proporções são binárias, por isso podemos preferir abandonar a “recuperação” e apenas mostrar a proporção de quem morreu. Isto é apenas para fins ilustrativos.</p>
<p>Se utilizar <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code> com dados de datas (por exemplo, uma epicurva a partir de dados agregados) - você vai querer ajustar o argumento <code>width =</code> (largura) para remover as linhas de “espaço” entre as barras. Se utilizar o conjunto de dados diário, ajuste <code>width = 1</code>. Se for semanal, ajuste <code>width = 7</code>. Os meses não são possíveis de serem visualizados dessa forma, porque cada mês tem um número de dias diferente.</p>
</div>
<div id="geom_histogram" class="section level3 unnumbered">
<h3>
<code>geom_histogram()</code><a class="anchor" aria-label="anchor" href="#geom_histogram"><i class="fas fa-link"></i></a>
</h3>
<p>Os histogramas podem parecer gráficos de barras, mas são distintos porque medem a distribuição de uma variável <em>contínua</em>. Não há espaços entre as “barras”, e apenas uma coluna é fornecida para <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>. Há argumentos específicos para histogramas como <code>bin_width =</code> e <code>breaks =</code> para especificar como os dados devem ser cdivididos em classes. A seção acima sobre dados contínuos e a página sobre <a href="epicurves.html#epicurves">Curvas Epidemiológicas</a> fornecem detalhes adicionais.</p>
</div>
</div>
<div id="recursos-16" class="section level2" number="30.14">
<h2>
<span class="header-section-number">30.14</span> Recursos<a class="anchor" aria-label="anchor" href="#recursos-16"><i class="fas fa-link"></i></a>
</h2>
<p>Há uma enorme quantidade de ajuda online, especialmente com o ggplot. Veja:</p>
<ul>
<li><a href="http://r-statistics.co/ggplot2-cheatsheet.html">Cheat sheet (cola) do ggplot2</a></li>
<li><a href="https://biostats.w.uib.no/the-ggplot2-cheat-sheet-by-rstudio/">Outra cheat sheet</a></li>
<li>
<a href="https://ggplot2.tidyverse.org/reference/">Página do básico do ggplot do tidyverse</a><br>
</li>
<li>
<a href="http://www.sthda.com/english/articles/32-r-graphics-essentials/131-plot-two-continuous-variables-scatter-graph-and-alternatives/">Platando variáveis contínuas</a><br>
</li>
<li>R for Data Science pages on <a href="https://r4ds.had.co.nz/data-visualisation.html">visualização de dados</a>
</li>
<li><a href="https://r4ds.had.co.nz/graphics-for-communication.html">gráficos para comunicação</a></li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="tables-presentation.html"><span class="header-section-number">29</span> Tabelas para apresentação</a></div>
<div class="next"><a href="ggplot-tips.html"><span class="header-section-number">31</span> Dicas do ggplot</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#ggplot-basics"><span class="header-section-number">30</span> O básico do ggplot</a></li>
<li>
<a class="nav-link" href="#prepara%C3%A7%C3%A3o-20"><span class="header-section-number">30.1</span> Preparação</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#carregar-pacotes-6">Carregar pacotes</a></li>
<li><a class="nav-link" href="#importar-datos-1">Importar datos</a></li>
<li><a class="nav-link" href="#limpeza-geral">Limpeza geral</a></li>
<li><a class="nav-link" href="#pivoteamento-para-mais-longo">Pivoteamento para “mais longo”</a></li>
</ul>
</li>
<li><a class="nav-link" href="#b%C3%A1sico-do-ggplot"><span class="header-section-number">30.2</span> Básico do ggplot</a></li>
<li><a class="nav-link" href="#ggplot"><span class="header-section-number">30.3</span> ggplot()</a></li>
<li><a class="nav-link" href="#geoms"><span class="header-section-number">30.4</span> Geoms</a></li>
<li>
<a class="nav-link" href="#ggplot_basics_mapping"><span class="header-section-number">30.5</span> Mapeando dados ao gráfico</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#as-est%C3%A9ticas-do-gr%C3%A1fico">As estéticas do gráfico</a></li>
<li><a class="nav-link" href="#configurar-para-um-valor-est%C3%A1tico">Configurar para um valor estático</a></li>
<li><a class="nav-link" href="#responsivo-a-valores-de-uma-coluna">Responsivo a valores de uma coluna</a></li>
<li><a class="nav-link" href="#ggplot_basics_map_loc">Onde incluir os atributos de mapeamento</a></li>
<li><a class="nav-link" href="#ggplotgroups">Grupos</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#ggplot_basics_facet"><span class="header-section-number">30.6</span> Facetas / Pequenos-Múltiplos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#facet_wrap">facet_wrap()</a></li>
<li><a class="nav-link" href="#facet_grid">facet_grid()</a></li>
<li><a class="nav-link" href="#eixos-livres-ou-fixos">Eixos livres ou fixos</a></li>
<li><a class="nav-link" href="#ordem-dos-fatores-nas-facetas">Ordem dos fatores nas facetas</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#armazenando-gr%C3%A1ficos"><span class="header-section-number">30.7</span> Armazenando gráficos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#salvando-gr%C3%A1ficos-1">Salvando gráficos</a></li>
<li><a class="nav-link" href="#modificando-gr%C3%A1ficos-salvos">Modificando gráficos salvos</a></li>
<li><a class="nav-link" href="#exportando-gr%C3%A1ficos">Exportando gráficos</a></li>
</ul>
</li>
<li><a class="nav-link" href="#r%C3%B3tulos"><span class="header-section-number">30.8</span> Rótulos</a></li>
<li>
<a class="nav-link" href="#ggplot_basics_themes"><span class="header-section-number">30.9</span> Temas</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#temas-completos">Temas completos</a></li>
<li><a class="nav-link" href="#modifique-o-tema">Modifique o tema</a></li>
</ul>
</li>
<li><a class="nav-link" href="#cores"><span class="header-section-number">30.10</span> Cores</a></li>
<li><a class="nav-link" href="#usando-o-pipe-no-ggplot2"><span class="header-section-number">30.11</span> Usando o pipe (%&gt;%) no ggplot2</a></li>
<li>
<a class="nav-link" href="#fazer-gr%C3%A1ficos-de-dados-cont%C3%ADnuos"><span class="header-section-number">30.12</span> Fazer gráficos de dados contínuos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#histogramas">Histogramas</a></li>
<li><a class="nav-link" href="#box-plots">Box plots</a></li>
<li><a class="nav-link" href="#gr%C3%A1ficos-violino-jitter-sina">Gráficos: Violino, jitter, sina</a></li>
<li><a class="nav-link" href="#duas-vari%C3%A1veis-cont%C3%ADnuas">Duas variáveis contínuas</a></li>
<li><a class="nav-link" href="#tr%C3%AAs-vari%C3%A1veis-cont%C3%ADnuas">Três variáveis contínuas</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#gr%C3%A1ficos-de-dados-categ%C3%B3ricos"><span class="header-section-number">30.13</span> Gráficos de dados categóricos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#prepara%C3%A7%C3%A3o-21">Preparação</a></li>
<li><a class="nav-link" href="#ggplot_basics_bars">geom_bar()</a></li>
<li><a class="nav-link" href="#geom_col">geom_col()</a></li>
<li><a class="nav-link" href="#geom_histogram">geom_histogram()</a></li>
</ul>
</li>
<li><a class="nav-link" href="#recursos-16"><span class="header-section-number">30.14</span> Recursos</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Manual de R para Epidemiologistas</strong>" was written by the handbook team. It was last built on 2023-10-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
