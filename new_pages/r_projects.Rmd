
# Projetos no R {}  


Um projeto R permite que seu trabalho seja agrupado em uma pasta portátil e autônoma. Dentro do projeto, todos os scripts relevantes, arquivos de dados, figuras/saídas e histórico são armazenados em subpastas e, o mais importante - o *diretório de trabalho* é a pasta raiz do projeto.  


## Sugestão de uso

Uma maneira comum, eficiente e sem problemas de usar R é combinar estes 3 elementos. Um projeto de trabalho é hospedado dentro de um projeto R. Cada elemento é descrito nas seções abaixo.  

1) Um projeto **R**.  
     - Um ambiente de trabalho autônomo com pastas para dados, roteiros, saídas, etc.  
2) O pacote **here** para caminhos de arquivos relativos  
     - Os caminhos de arquivos são escritos em relação à pasta raiz do projeto R - veja [Importação e exportação] para mais informações  
3) O pacote **rio** para importação/exportação  
     - `import()` e `export()` lidam com qualquer tipo de arquivo por sua extensão (por exemplo, .csv, .xlsx, .png)  

<!-- ======================================================= -->
## Criando um Projeto no R{}

Para criar um projeto R, selecione "Novo Projeto" no menu Arquivo.

* Se você deseja criar uma nova pasta para o projeto, selecione "Novo diretório" e indique onde você deseja que ele seja criado.  
* Se você quiser criar o projeto dentro de uma pasta existente, clique em "Diretório existente" e indique a pasta.  
* Se você quiser clonar um repositório Github, selecione a terceira opção "Controle de Versão" e depois "Git". Consulte a página em [Controle de versão e colaboração com Git e Github] para mais detalhes.  


```{r out.width = "75%", fig.align = "center", echo=F}
knitr::include_graphics(here::here("images", "create_project.png"))
```


O projeto R que você criar virá na forma de uma pasta contendo um arquivo *.Rproj*. Este arquivo é um atalho e provavelmente a principal maneira de você abrir seu projeto. Você também pode abrir um projeto, selecionando "Open Project" no menu Arquivo. Alternativamente no lado superior direito do RStudio você verá um ícone de projeto R e um menu suspenso de projetos R disponíveis. 

Para sair de um projeto R, ou abra um novo projeto, ou feche o projeto (Arquivo - Fechar Projeto).  


### Trocar de Projetos {.unnumbered}

Para alternar entre projetos, clique no ícone de projeto R e no menu suspenso no canto superior direito do RStudio. Você verá opções para Fechar Projeto, Abrir Projeto e uma lista de projetos recentes. 


```{r out.width = "100%", fig.align = "center", echo=F}
knitr::include_graphics(here::here("images", "Rproject_dropdown.png"))
```


### Configurações {.unnumbered}  

Geralmente é aconselhável que você inicie o RStudio cada vez com uma "tábula rasa" - ou seja, com seu espaço de trabalho **não estando** preservado de sua sessão anterior. Isto significará que seus objetos e resultados não persistirão sessão a sessão (você deve recriá-los executando seus scripts). Isto é bom, pois o forçará a escrever melhores scripts e evitará erros a longo prazo.  

Para definir o RStudio para ter uma "tábula rasa" sempre ao iniciá-lo:  

* Selecione "Opções de Projeto" no menu Ferramentas.  
* Na aba "Geral", configure o RStudio para **não** restaurar .RData no espaço de trabalho na inicialização, e para **não** salvar o espaço de trabalho para .RData na saída.  



### Organização {.unnumbered}  

É comum ter subpastas em seu projeto. Considere ter pastas como "dados", "scripts", "figuras", "apresentações". Você pode adicionar pastas da maneira típica de adicionar uma nova pasta para seu computador. Alternativamente, veja a página em [Interações de diretório] para aprender como criar novas pastas com comandos R.  


### Controle de versões {.unnumbered}  

Considere um sistema de controle de versão. Poderia ser algo tão simples como ter datas nos nomes dos scripts (por exemplo, "transmission_analysis_2020-10-03.R") e uma pasta de "arquivamento". Considere também ter comentado o texto de cabeçalho no topo de cada script com uma descrição, etiquetas, autores e registro de mudanças.  

Um método mais complicado envolveria o uso do Github ou de uma plataforma similar para controle de versão. Veja a página em [Controle de versão e colaboração com Git e Github].  

Uma dica é que você pode pesquisar em todo um projeto ou pasta usando a ferramenta "Localizar em Arquivos" (menu Editar). Ela pode pesquisar e até mesmo substituir *strings* em vários arquivos.  


## Exemplos

Abaixo estão alguns exemplos para importar/exportar/salvar utilizando `here()` de dentro de um projeto R. Leia mais sobre a utilização do pacote **here** na página [Importação e exportação].


*Importando `linelist_raw.xlsx` da pasta "dados" no seu projeto R*  

```{r eval=F}
linelist <- import(here("dados", "linelist_raw.xlsx"))
```

*Exportando o objeto `linelist` com o nome "meu_linelist.rds" para a subpasta "limpos" dentro da pasta "dados" no seu projeto R.*   

```{r, eval=F}
export(linelist, here("dados","limpos", "meu_linelist.rds"))
```

*Salvando o gráfico exibido mais recentemente como "epicurve_2021-02-15.png" dentro da subpasta "epicurvass" na pasta "saídas" em seu projeto R*  

```{r, eval=F}
ggsave(here("saidas", "epicurvas", "epicurve_2021-02-15.png"))
```




<!-- ======================================================= -->
## Recursos {}

RStudio webpage on [using R projects](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects)




